 /**
 * Jeeliz Glance Tracker - https://github.com/jeeliz/jeelizGlanceTracker
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

window['GLANCETRACKERAPI']=(function(){"use strict";function ba(a,b){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&b(e.responseText)};e.send()}
var k=function(){function a(a,b){a=c.createShader(a);c.shaderSource(a,b);c.compileShader(a);return c.getShaderParameter(a,c.COMPILE_STATUS)?a:!1}function b(y,b,g){y=a(c.VERTEX_SHADER,y,g+" VERTEX");b=a(c.FRAGMENT_SHADER,b,g+" FRAGMENT");g=c.createProgram();c.attachShader(g,y);c.attachShader(g,b);c.linkProgram(g);return g}function e(a){void 0===a.Y&&(a.Y="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===a.$&&(a.$=["a0"]);
void 0===a.U&&(a.U=[2]);void 0===a.precision&&(a.precision="highp");void 0===a.u&&(a.u=[]);a.id=r++;void 0!==a.Hb&&a.Hb.forEach(function(b,g){a.c=a.c.replace(b,a.Sa[g])});a.ya=0;a.U.forEach(function(b){a.ya+=4*b});a.ha=b(a.Y,"precision "+a.precision+" float;\n"+a.c,a.name);console.log(a.name);a.m={};a.g.forEach(function(b){a.m[b]=c.getUniformLocation(a.ha,b)});a.attributes={};a.V=[];a.$.forEach(function(b){var g=c.getAttribLocation(a.ha,b);a.attributes[b]=g;a.V.push(g)});if(a.h){c.useProgram(a.ha);
d=a;h=a.id;for(var g in a.h)c.uniform1i(a.m[g],a.h[g])}a.Bc=!0}function f(a){ea.Nb(B);h!==a.id&&(B.O(),h=a.id,d=a,c.useProgram(a.ha),a.V.forEach(function(a){0!==a&&c.enableVertexAttribArray(a)}))}var h=-1,d=!1,r=0,g=!1,l=["u0"],m=["u1"],q={u0:0},v={u1:0},t={u0:0,u2:1},z={u3:0},A={u4:0,u5:1},x={s0:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vv0);}",g:l,h:q},s1:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vv0);}",
g:l,h:q,precision:"lowp"},s2:{name:"_",c:"uniform sampler2D u0,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u0,vv0);gl_FragColor=a*b;}",g:["u0","u2"],h:t},s3:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a.r*f;}",g:l,h:q},s4:{name:"_",c:"uniform sampler2D u0,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u0,vv0);gl_FragColor=a.a*b.r*f;}",
g:["u0","mask"],h:t},s5:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vec2(1.-vv0.x,vv0.y));}",g:l,h:q},s6:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vec2(vv0.x,1.-vv0.y));}",g:l,h:q},s7:{name:"_",c:"uniform sampler2D u1;uniform float u6;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*u6;}",g:["u1","u6"],h:v},s8:{name:"_",c:"uniform sampler2D u1;uniform float u6;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=dot(a*u6,g);gl_FragColor=b*e;}",
g:["u1","u6"],h:v},s9:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u0,vv0));gl_FragColor=a*e;}",g:l,h:q},s10:{name:"_",c:"uniform sampler2D u0,u7;uniform float u8;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),b=texture2D(u7,vv0);gl_FragColor=mix(b,a,u8*f);}",g:["u0","u7","u8"],h:{u0:0,u7:1}},s11:{name:"_",c:"uniform sampler2D u0;uniform vec2 u9;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u0,vv0+u9)+texture2D(u0,vv0+u9*vec2(1.,-1.))+texture2D(u0,vv0+u9*vec2(-1.,-1.))+texture2D(u0,vv0+u9*vec2(-1.,1.)));}",
g:["u0","u9"],h:q},s12:{name:"_",c:"uniform sampler2D u0;uniform vec4 u10;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0,0,0,0);float l=a>0.?0.:1.;a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.)/255.,q=e(b,8.,16.)/255.,r=(n*128.+e(b,16.,23.))/255.,j=(l*128.+o)/255.;return vec4(p,q,r,j);}void main(){float a=dot(texture2D(u0,vv0),u10);gl_FragColor=k(a);}",
g:["u0","u10"],h:q},s13:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",g:m,h:v,u:m,v:!0},s14:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=max(e,a);}",g:m,h:v,u:m,v:!0},s15:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",
g:m,h:v,u:m,v:!0},s16:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",g:m,h:v,u:m,v:!0},s17:{name:"_",c:"uniform sampler2D u1,u8,u11;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0),c=texture2D(u8,vv0),d=texture2D(u11,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",g:["u1","u8","u11"],h:{u1:0,u8:1,u11:2},u:m,v:!0},s18:{name:"_",
c:"uniform sampler2D u1;const float e=3.141593;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=atan(e*a)/e;gl_FragColor=b;}",g:m,h:v,u:m,v:!0},s19:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u1,vv0),b=log(e+a);gl_FragColor=b;}",g:m,h:v,u:m,v:!0},s20:{name:"_",c:"uniform sampler2D u1;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=exp(a);}",g:["u1","u12"],h:v,u:m,v:!0},
s21:{name:"_",c:"uniform sampler2D u1,u13;uniform float u14;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u13,f);float b=u14*u14;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u1,vv0)/c;}",g:["u1","u15","u14"],h:{u1:0,u15:1}},s22:{name:"_",c:"uniform sampler2D u0;uniform vec2 u16;varying vec2 vv0;void main(){float a=u16.x*u16.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u16.y),g=floor(u16.x*fract(b*u16.y)),f=(g*u16.y+d)/a;gl_FragColor=texture2D(u0,f+c/a);}",
g:["u0","u16"],h:q},s23:{name:"_",c:"uniform sampler2D u17,u5,u18;varying vec2 vv0;void main(){vec4 a=texture2D(u18,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u17,b),e=texture2D(u5,c);gl_FragColor=d*e;}",g:["u17","u5","u18"],u:["u17","u5","u18"],h:{u5:0,u17:1,u18:2},v:!0},s24:{name:"_",c:"uniform float u19;uniform sampler2D u17,u5;varying vec2 vv0;void main(){vec2 a=vv0*u19,b=floor(a),c=a-b;vec4 d=texture2D(u17,vv0),f=texture2D(u5,c);gl_FragColor=d*f;}",g:["u5","u17","u19"],u:["u5","u17"],h:{u5:0,u17:1},
v:!0},s25:{name:"_",c:"uniform float u19;uniform sampler2D u17,u5,u20,u21,u22,u23;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u19,m=floor(i),c=i-m;vec4 n=texture2D(u17,vv0),d=texture2D(u5,c),a=texture2D(u23,vv0);a=a*255.;vec4 o=texture2D(u20,c),p=texture2D(u21,c),q=texture2D(u22,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",g:"u17 u5 u19 u23 u20 u21 u22".split(" "),
h:{u5:0,u17:1,u23:3,u20:4,u21:5,u22:6},v:!0},s26:{name:"_",c:"uniform sampler2D u17,u5,u24;uniform float u19,u25,u26,u27;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u25*vv0),g=u25*vv0-a;float b=u19/u25;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u25;float l=u25*u27/u19;vec2 m=l*c,i=(m+d*u26)/u27,e=step(i,j);vec4 n=texture2D(u17,h),o=texture2D(u5,i),p=n*o*e.x*e.y,k=texture2D(u24,h);gl_FragColor=p*u26*u26+k;}",g:"u17 u5 u19 u25 u26 u27 u24".split(" "),u:["u17","u5","u24"],h:{u5:0,u17:1,
u24:2},v:!0},s27:{name:"_",c:"uniform sampler2D u17,u5;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0),b=texture2D(u5,vv0);gl_FragColor=a*b;}",g:["u17","u5"],u:["u17","u5"],h:{u5:0,u17:1},v:!0},s28:{name:"_",c:"uniform sampler2D u0,u24;uniform float u28;varying vec2 vv0;void main(){gl_FragColor=texture2D(u24,vv0)+u28*texture2D(u0,vv0);}",g:["u0","u24","u28"],u:["u0","u24"],v:!0,h:{u0:0,u24:1}},s29:{name:"_",c:"varying vec2 vv0;uniform sampler2D u0;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=dot(a,e)*g;}",
g:l,h:q,precision:"lowp"},s30:{name:"_",c:"varying vec2 vv0;uniform sampler2D u0,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u0,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u0,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u0,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u0,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u0,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u0,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u0,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u0,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u0,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u0,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u0,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u0,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u0,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
g:["u0","u2","u29"],h:t},s31:{name:"_",c:"varying vec2 vv0;uniform sampler2D u0,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u0,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u0,c).r-i/g)*j;}",g:["u0","u2","u29"],h:t},s32:{name:"_",c:"uniform sampler2D u3;uniform vec2 u9;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u9*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u9*i),d=texture2D(u3,a+u9*j),k=texture2D(u3,a+u9),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
g:["u3","u9"],h:z},s33:{name:"_",c:"uniform sampler2D u3;uniform vec2 u9;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u9*j),d=texture2D(u3,a+u9*k),g=texture2D(u3,a+u9),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u9*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u9*l),d=f(a+u9*2.),g=f(a+u9*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",g:["u3","u9"],h:z},
s34:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*a;}",g:["u0"],h:q,precision:"lowp"},s35:{name:"_",c:"uniform sampler2D u0;uniform vec2 u9;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u0,vv0-3.*u9)+2002./d*texture2D(u0,vv0-2.*u9)+3003./d*texture2D(u0,vv0-u9)+3432./d*texture2D(u0,vv0)+3003./d*texture2D(u0,vv0+u9)+2002./d*texture2D(u0,vv0+2.*u9)+1001./d*texture2D(u0,vv0+3.*u9);gl_FragColor=a;}",
g:["u9","u0"],h:q,precision:"lowp"},s36:{name:"_",c:"uniform sampler2D u0,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u0,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",g:["u0","u30","u31"],h:{u0:0,u30:1,u31:2},v:!0},s37:{name:"_",c:"uniform sampler2D u17,u32,u33;varying vec2 vv0;void main(){vec4 a=texture2D(u33,vv0);vec2 b=a.rg;vec4 c=texture2D(u17,b);vec2 d=a.ba;vec4 e=texture2D(u32,d);gl_FragColor=c*e;}",
g:["u17","u32","u33"],h:{u32:0,u33:1,u17:2}},s38:{name:"_",c:"uniform sampler2D u17,u32;uniform float u19,u27;varying vec2 vv0;void main(){float d=u19*u27;vec2 b=vv0*u27,c=floor(b),a=b-c;a.y=1.-a.y;vec2 g=floor(a*u19),h=(g*u27+c)/d;vec4 i=texture2D(u17,h),e=texture2D(u32,a);gl_FragColor=i*e;}",g:["u17","u32","u19","u27"],h:{u32:0,u17:1}},s39:{name:"_",c:"uniform sampler2D u17,u32;uniform float u19,u27,u26,u25;varying vec2 vv0;const vec2 e=vec2(1.,1.);void main(){float k=u19*u26/u27,d=u25*u27/u19,l=k/u25,m=u19/u25,n=k/u25;vec2 g=e-vv0,c=floor(u27*g),h=u27*g-c,i=floor(u25*h),j=u25*h-i,q=j*l,r=floor(c/d),s=c-r*d,t=floor(c/d),u=t+n*j,a=(u+i*m)/u19;a=mod(a,e),a=e-a;vec2 v=s-d*q,b=mod(v/u26,e);b=e-b,b+=vec2(1./u19,1./u19),b=mod(b,e);vec2 w=floor(a*u25),f=(w+b)/u25;f=mod(f,e);vec4 x=texture2D(u17,f),o=texture2D(u32,a);gl_FragColor=x*o;}",
g:"u17 u32 u19 u27 u26 u25".split(" "),h:{u32:0,u17:1}},s40:{name:"_",c:"uniform sampler2D u1,u34,u35;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u34,vv0),c=texture2D(u35,vv0);gl_FragColor=a-b;}",g:["u1","u34","u35"],h:{u1:0,u34:1,u35:2}},s41:{name:"_",c:"uniform sampler2D u1,u34,u35;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u34,vv0),c=texture2D(u35,vv0);gl_FragColor=c*(a-b);}",g:["u1","u34","u35"],h:{u1:0,u34:1,u35:2}},
s42:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;void main(){vec4 a=u28*texture2D(u4,vv0),b=texture2D(u5,vv0);gl_FragColor=a;}",g:["u4","u5","u28"],h:A},s43:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);vec4 g(vec4 b){vec4 a=exp(-b);return a/((f+a)*(f+a));}void main(){vec4 a=u28*texture2D(u4,vv0),b=texture2D(u5,vv0);gl_FragColor=a*g(b);}",g:["u4","u5","u28"],h:A},s44:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.),i=vec4(1.,1.,1.,1.);const float h=1e-4;vec4 f(vec4 a){return h+step(g,a);}void main(){vec4 a=u28*texture2D(u4,vv0),b=texture2D(u5,vv0);gl_FragColor=a*f(b);}",
g:["u4","u5","u28"],h:A},s45:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);vec4 f(vec4 a){vec4 b=exp(-abs(a));return mix(b,g,step(0.,a));}void main(){vec4 a=u28*texture2D(u4,vv0),b=texture2D(u5,vv0);gl_FragColor=a*f(b);}",g:["u4","u5","u28"],h:A},s46:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);const float h=3.141593;vec4 g(vec4 b){vec4 a=b*h;return e/(e+a*a);}void main(){vec2 a=vv0;vec4 b=u28*texture2D(u4,a),c=texture2D(u5,a);gl_FragColor=b*g(c);}",
g:["u4","u5","u28"],h:A}},C={},B={ra:function(){return g},j:function(){if(!g){for(var a in x)e(x[a],a);k.set("s0");c.enableVertexAttribArray(0);a=fa.j();g=!0;return a}},Ya:function(a){a.forEach(function(a){B.Xa(a)})},Xa:function(a){x[a.id]=a;e(a,a.id)},zb:function(a,b,g){a in C&&(b||(b=a),x[b]=Object.create(C[a]),C[a].Sa&&C[a].Sa.forEach(function(a,d){x[b].c=x[b].c.replace(new RegExp(a,"g"),g[d])}),e(x[b],b))},Jc:function(){},set:function(a){f(x[a])},mc:function(){return d.ic},O:function(){-1!==h&&
(h=-1,d.V.forEach(function(a){0!==a&&c.disableVertexAttribArray(a)}))},wa:function(){var a=0;d.V.forEach(function(b,g){g=d.U[g];c.vertexAttribPointer(b,g,c.FLOAT,!1,d.ya,a);a+=4*g})},xa:function(){c.vertexAttribPointer(d.V[0],2,c.FLOAT,!1,8,0)},Uc:function(a,b){c.uniform1i(d.m[a],b)},w:function(a,b){c.uniform1f(d.m[a],b)},G:function(a,b,g){c.uniform2f(d.m[a],b,g)},Vc:function(a,b){c.uniform2fv(d.m[a],b)},Wc:function(a,b){c.uniform3fv(d.m[a],b)},Ob:function(a,b,g,e){c.uniform3f(d.m[a],b,g,e)},Ua:function(a,
b){c.uniform4fv(d.m[a],b)},Xc:function(a,b){c.uniformMatrix2fv(d.m[a],!1,b)},Yc:function(a,b){c.uniformMatrix3fv(d.m[a],!1,b)},Zc:function(a,b){c.uniformMatrix4fv(d.m[a],!1,b)},N:function(a,b){B.set(a);b.forEach(function(a){switch(a.type){case "4f":c.uniform4fv(d.m[a.name],a.value);break;case "3f":c.uniform3fv(d.m[a.name],a.value);break;case "2f":c.uniform2fv(d.m[a.name],a.value);break;case "1f":c.uniform1f(d.m[a.name],a.value);break;case "1i":c.uniform1i(d.m[a.name],a.value);break;case "mat2":c.uniformMatrix2fv(d.m[a.name],
!1,a.value);break;case "mat3":c.uniformMatrix3fv(d.m[a.name],!1,a.value);break;case "mat4":c.uniformMatrix4fv(d.m[a.name],!1,a.value)}})}};return B}(),c,ia=function(){var a=!1,b=!1,e=!1,f=!1,h=!0,d=!1,r={A:function(){return a.width},H:function(){return a.height},nc:function(){return a},lc:function(){return c},o:function(){return h},flush:function(){c.flush()},rb:function(){d||(d=new Uint8Array(a.width*a.height*4));c.readPixels(0,0,a.width,a.height,c.RGBA,c.UNSIGNED_BYTE,d);return d},pc:function(){return a.toDataURL("image/jpeg")},
qc:function(){n.D();b||(b=document.createElement("canvas"),e=b.getContext("2d"));b.width=a.width;b.height=a.height;var g=r.rb(),d=e.createImageData(b.width,b.height),h,f,v=b.width,t=b.height,z=d.data;for(f=0;f<t;++f){var A=t-f-1;for(h=0;h<v;++h){var x=4*(f*v+h);var C=4*(A*v+h);z[x]=g[C];z[x+1]=g[C+1];z[x+2]=g[C+2];z[x+3]=g[C+3]}}e.putImageData(d,0,0);return b.toDataURL("image/png")},oc:function(g){!b&&g&&(b=document.createElement("canvas"),e=b.getContext("2d"));var d=g?b:document.createElement("canvas");
d.width=a.width;d.height=a.height;(g?e:d.getContext("2d")).drawImage(a,0,0);return d},j:function(b){b.Fa&&!b.aa?a=document.getElementById(b.Fa):b.aa&&(a=b.aa);a||(a=document.createElement("canvas"),document.body.appendChild(a));a.width=b&&void 0!==b.width?b.width:512;a.height=b&&void 0!==b.height?b.height:512;"undefined"===typeof b&&(b={});void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!1);void 0===b.pa&&(b.pa=!0);void 0===b.antialias&&(b.antialias=!1);var d={antialias:b.antialias,alpha:!0,
preserveDrawingBuffer:!0,premultipliedAlpha:b.premultipliedAlpha,stencil:!1,depth:b.pa};(c=a.getContext("webgl2",d))?h=!0:((c=a.getContext("webgl",d))||(c=a.getContext("experimental-webgl",d)),h=!1);if(!c)return!1;(f=c.getExtension("WEBGL_lose_context"))&&a.addEventListener("webglcontextlost",b.Kc,!1);if(!p.j()||!p.eb()&&h)return!1;c.clearColor(0,0,0,0);c.disable(c.DEPTH_TEST);c.disable(c.BLEND);c.disable(c.DITHER);c.disable(c.STENCIL_TEST);c.GENERATE_MIPMAP_HINT&&c.hint(c.GENERATE_MIPMAP_HINT,c.NICEST);
c.disable(c.SAMPLE_ALPHA_TO_COVERAGE);c.disable(c.SAMPLE_COVERAGE);return!0},Ac:function(){if(!k.j())return!1;c.depthFunc(c.LEQUAL);c.clearDepth(1);return!0}};return r}(),ea=function(){var a="undefined"===typeof k?JEShaders:k;return{Nb:function(b){a!==b&&(a.O(),a=b)},ra:function(){return a.ra()},xa:function(){a.xa()},wa:function(){a.wa()},O:function(){a.O()},set:function(b){a.set(b)}}}(),H=function(){var a,b,e=0,f=-2,h=-2,d=!1,r={reset:function(){h=f=-2},j:function(){d||(a=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,
a),c.bufferData(c.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),c.STATIC_DRAW),b=c.createBuffer(),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),c.STATIC_DRAW),r.ka(),d=!0)},a:function(a){var b=e++,d=a.T.length,g=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,g);c.bufferData(c.ARRAY_BUFFER,a.vertices instanceof Float32Array?a.vertices:new Float32Array(a.vertices),c.STATIC_DRAW);f=b;if(a.T){var r=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,
r);if(65536>a.T.length){var t=Uint16Array;var z=c.UNSIGNED_SHORT;var A=2}else t=Uint32Array,z=c.UNSIGNED_INT,A=4;c.bufferData(c.ELEMENT_ARRAY_BUFFER,a.T instanceof t?a.T:new t(a.T),c.STATIC_DRAW);h=b}var x={bb:function(a){f!==b&&(c.bindBuffer(c.ARRAY_BUFFER,g),f=b);a&&ea.wa()},$a:function(){h!==b&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),h=b)},bind:function(a){x.bb(a);x.$a()},fc:function(){c.drawElements(c.TRIANGLES,d,z,0)},gc:function(a,b){c.drawElements(c.TRIANGLES,a,z,b*A)},remove:function(){c.deleteBuffer(g);
a.T&&c.deleteBuffer(r);x=null}};return x},ka:function(){-1!==f&&(c.bindBuffer(c.ARRAY_BUFFER,a),f=-1);-1!==h&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b),h=-1)},f:function(a,b){a&&H.ka();b&&ea.xa();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},qb:function(){c.deleteBuffer(a);c.deleteBuffer(b)}};return r}(),n=function(){var a,b,e,f=!1,h={s:-2,ob:1};return{j:function(){if(!f){a=c.createFramebuffer();var d=p.o();b=d&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;e=d&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:
c.FRAMEBUFFER;f=!0}},tc:function(){return b},Ja:function(){return e},ca:function(){return c.FRAMEBUFFER},vc:function(){return h},kc:function(){return a},a:function(d){void 0===d.Na&&(d.Na=!1);var e=d.Rb?d.Rb:!1,f=d.width,l=void 0!==d.height?d.height:d.width,m=a,q=!1,v=!1,t=0;e&&(f=f?f:e.A(),l=l?l:e.H());var z={ua:function(){v||(m=c.createFramebuffer(),v=!0,t=h.ob++)},Wa:function(){z.ua();z.i();q=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,q);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,
f,l);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,q);c.clearDepth(1)},bind:function(a,d){t!==h.s&&(c.bindFramebuffer(b,m),h.s=t);e&&e.i();d&&c.viewport(0,0,f,l);a&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Yb:function(){t!==h.s&&(c.bindFramebuffer(b,m),h.s=t)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},bc:function(){c.clear(c.COLOR_BUFFER_BIT)},cc:function(){c.clear(c.DEPTH_BUFFER_BIT)},Pb:function(){c.viewport(0,0,f,l)},i:function(){t!==h.s&&(c.bindFramebuffer(b,
m),h.s=t)},rtt:function(a){e=a;h.s!==t&&(c.bindFramebuffer(c.FRAMEBUFFER,m),h.s=t);a.i()},D:function(){c.bindFramebuffer(b,null);h.s=-1},resize:function(a,b){f=a;l=b;q&&(c.bindRenderbuffer(c.RENDERBUFFER,q),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,f,l))},remove:function(){c.bindFramebuffer(b,m);c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0);q&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null);c.bindFramebuffer(b,null);c.deleteFramebuffer(m);q&&
c.deleteRenderbuffer(q);z=null}};d.Na&&z.Wa();return z},D:function(){c.bindFramebuffer(b,null);h.s=-1},Ub:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.viewport(0,0,p.A(),p.H());h.s=-1},reset:function(){h.s=-2},J:function(){0!==h.s&&(c.bindFramebuffer(b,a),h.s=0)},clear:function(){c.viewport(0,0,p.A(),p.H());c.clear(c.COLOR_BUFFER_BIT)}}}(),L=function(){function a(a){c.bindTexture(c.TEXTURE_2D,a)}function b(a){U[0]=a;a=da[0];var b=a>>16&32768,D=a>>12&2047,d=
a>>23&255;return 103>d?b:142<d?b|31744|((255==d?0:1)&&a&8388607):113>d?(D|=2048,b|(D>>114-d)+(D>>113-d&1)):b=(b|d-112<<10|D>>1)+(D&1)}function e(a){var D=new Uint16Array(a.length);a.forEach(function(a,d){D[d]=b(a)});return D}function f(){if(void 0!==K)return K;if(!ea.ra()||!t)return!0;var a=I.a({isFloat:!1,C:!0,array:e([1,1,1,1]),width:1});n.D();c.viewport(0,0,1,1);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);ea.set("s0");a.Aa(0);H.f(!1,!0);var b=new Uint8Array(4);c.readPixels(0,0,1,1,c.RGBA,
c.UNSIGNED_BYTE,b);K=.9<b[0];a.remove();n.J();return K}var h=0,d,r=0,g,l=!1,m,q,v,t=!1,z=!1,A,x,C,B=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],y=!1,V=!1,U=new Float32Array(1),da=new Int32Array(U.buffer),K=void 0,I={j:function(){if(!t){q=[c.RGB,!1,c.RGB,c.RGBA];v=[c.RGB,!1,c.RGB,c.RGBA];d=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7];y="undefined"!==typeof JEContext;V="undefined"!==typeof p;y&&JEContext.Hc()&&d.push(c.TEXTURE8,c.TEXTURE9);g=[-1,-1,-1,-1,-1,
-1,-1,-1];m=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT];if(!l){for(var a=new Float32Array(16384),b=0;16384>b;++b)a[b]=2*Math.random()-1;l={random:I.a({isFloat:!0,isPot:!0,array:a,width:64}),Va:I.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}t=!0}},yb:function(){I.Vb()},yc:function(){return l.Va},Vb:function(){m[1]=p.da()},Jb:function(){v=q=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},Mc:function(a,b){k.set("s1");n.D();var D=a.A(),d=a.H();c.viewport(0,0,D,d);a.b(0);H.f(!1,!1);c.readPixels(0,0,D,d,c.RGBA,
c.UNSIGNED_BYTE,b)},pb:function(b,d,f){c.activeTexture(c.TEXTURE0);h=0;var D=c.createTexture();a(D);var e=p.o()&&c.RGBA32F?c.RGBA32F:c.FLOAT;d=d instanceof Float32Array?d:new Float32Array(d);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,f);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,b.A(),b.H(),0,c.RGBA,e,d);a(null);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);n.J();k.set("s0");b.l();c.clearColor(0,0,
0,0);c.clear(c.COLOR_BUFFER_BIT);a(D);H.f(!0,!1);c.deleteTexture(D)},a:function(b){function l(){a(F);W&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,W);b.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b.Oa?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.K?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));b.fa&&"undefined"!==typeof JESETTINGS&&c.texParameterf(c.TEXTURE_2D,
JEContext.rc().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Wb);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,b.isLinear?c.LINEAR:c.NEAREST);b.isLinear?c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,b.isMipmap&&!Q?c.NEAREST_MIPMAP_LINEAR:c.LINEAR):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,b.isMipmap&&!Q?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);M=q[b.L-1];N=v[b.L-1];T=m[D];if(p.o()){var d=c.RGBA32F;M===c.RGBA&&T===c.FLOAT&&d&&(N=d);M===c.RGB&&T===c.FLOAT&&d&&(N=d,M=c.RGBA)}if(b.C&&!b.isFloat||b.isFloat&&
b.isMipmap&&fa.Cb())(d=c.RGBA16F)&&(N=d),T=p.da();b.Pa&&4===b.L&&(M=JEContext.wc());b.B?c.texImage2D(c.TEXTURE_2D,0,N,M,T,b.B):b.url?c.texImage2D(c.TEXTURE_2D,0,N,M,T,J):O?(c.texImage2D(c.TEXTURE_2D,0,N,w,u,0,M,T,O),b.isKeepArray||(O=null)):c.texImage2D(c.TEXTURE_2D,0,N,w,u,0,M,T,null);if(b.isMipmap)if(!Q&&E)E.P(),Z=!0;else if(Q){d=Math.log(Math.min(w,u))/Math.log(2);var f;ca=Array(1+d);ca[0]=F;for(f=1;f<=d;++f){var e=Math.pow(2,f);var l=w/e;e=u/e;var r=c.createTexture();a(r);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,N,l,e,0,M,T,null);a(null);ca[f]=r}Z=!0}a(null);g[h]=-1;W&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);U=!0;G&&E&&(G(E),G=!1)}void 0===b.isFloat&&(b.isFloat=!1);void 0===b.C&&(b.C=!1);void 0===b.isPot&&(b.isPot=!0);void 0===b.isLinear&&(b.isLinear=!1);void 0===b.isMipmap&&(b.isMipmap=!1);void 0===b.la&&(b.la=!1);void 0===b.fa&&(b.fa=!1);void 0===b.K&&(b.K=!1);void 0===b.Oa&&(b.Oa=!1);
void 0===b.Pa&&(b.Pa=!1);void 0===b.L&&(b.L=4);void 0===b.qa&&(b.qa=!1);void 0===b.isFlipY&&(b.isFlipY=b.url||b.array?!0:!1);void 0===b.isKeepArray&&(b.isKeepArray=!1);b.data&&(b.array=b.isFloat?new Float32Array(b.data):new Uint8Array(b.data),b.isFlipY=!1);var D=0,t=b.B?!0:!1;b.isFloat&&(b.C=!0);b.C&&(D=1);b.qa||p.o()||!b.isFloat||!V||p.Da()||(b.isFloat=!1);b.isFloat&&(D=2);b.fa&&y&&!JEContext.Cc()&&(b.fa=!1);var F=c.createTexture(),G=b.la,J=null,O=!1,w=0,u=0,U=!1,K=r++,aa=!1,Y,R,N,M,T,W=b.isFlipY,
Q=b.C&&b.isMipmap&&fa&&!fa.fb(),ca,Z=!1;void 0!==b.width&&b.width&&(w=b.width,u=void 0!==b.height&&b.height?b.height:w);var E={get:function(){return F},A:function(){return w},H:function(){return u},zc:function(){return b.url},Dc:function(){return b.isFloat},Fc:function(){return b.C},Gc:function(){return b.isLinear},P:function(){c.generateMipmap(c.TEXTURE_2D)},Ba:function(b,d){Q?(b||(b=E.Ka()),E.ja(d),a(ca[b]),g[d]=-1):E.b(d)},Ka:function(){return Math.log(w)/Math.log(2)},Ia:function(b){if(Q){b||(b=
E.Ka());k.set("s11");E.ja(0);var d,f=w,e=u;for(d=1;d<=b;++d)f/=2,e/=2,k.G("u9",.25/f,.25/e),c.viewport(0,0,f,e),a(ca[d-1]),c.framebufferTexture2D(n.ca(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,ca[d],0),H.f(!1,1===d);g[0]=-1}else E.P()},ja:function(a){a!==h&&(c.activeTexture(d[a]),h=a)},b:function(b){if(!U)return!1;E.ja(b);if(g[b]===K)return!1;a(F);g[b]=K;return!0},Aa:function(b){c.activeTexture(d[b]);h=b;a(F);g[b]=K},i:function(){c.framebufferTexture2D(n.ca(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,F,0)},l:function(){c.viewport(0,
0,w,u);c.framebufferTexture2D(n.ca(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,F,0)},dd:function(){c.framebufferTexture2D(n.ca(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},resize:function(a,b){w=a;u=b;l()},clone:function(a){a=I.a({width:w,height:u,C:b.C,isFloat:b.isFloat,isLinear:b.isLinear,K:b.K,isFlipY:a?!W:W,isPot:b.isPot});ea.set("s0");n.J();a.i();c.viewport(0,0,w,u);E.b(0);H.f(!0,!0);return a},Pb:function(){c.viewport(0,0,w,u)},remove:function(){c.deleteTexture(F);E=null},refresh:function(){E.Aa(0);W&&
c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);t?c.texImage2D(c.TEXTURE_2D,0,N,M,c.UNSIGNED_BYTE,b.B):c.texImage2D(c.TEXTURE_2D,0,N,w,u,0,M,T,O);W&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Ea:function(){var a=w*u*4;R=[new Uint8Array(a),new Uint8Array(a),new Uint8Array(a),new Uint8Array(a)];Y=[new Float32Array(R[0].buffer),new Float32Array(R[1].buffer),new Float32Array(R[2].buffer),new Float32Array(R[3].buffer)];aa=!0},Gb:function(){aa||E.Ea();R.forEach(function(a,b){c.readPixels(0,u*b,w,u,c.RGBA,c.UNSIGNED_BYTE,
a)});return Y},Ga:function(){n.D();k.set("s12");E.b(0);c.viewport(0,0,w,4*u);c.clear(c.COLOR_BUFFER_BIT);for(var a=0;4>a;++a)c.viewport(0,u*a,w,u),k.Ua("u10",B[a]),H.f(!1,0===a)},ed:function(b){a(F);W&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,W);c.texImage2D(c.TEXTURE_2D,0,N,w,u,0,M,T,b);g[h]=K;W&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},fd:function(b,d){a(F);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,d);c.texImage2D(c.TEXTURE_2D,0,N,M,T,b);g[h]=K;d&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Qc:function(a,d){var f=
w*u,e=4*f;a=b.C?a?"RGBE":"JSON":"RGBA";d&&(a=d);d=p.o()&&!1;switch(a){case "RGBE":var h="s47";break;case "JSON":h=d?"s0":"s12";break;case "RGBA":case "RGBAARRAY":h="s6"}aa||("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a?(R=new Uint8Array(e),aa=!0):"JSON"!==a||d||E.Ea());n.D();k.set(h);E.b(0);if("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a){c.viewport(0,0,w,u);H.f(!0,!0);c.readPixels(0,0,w,u,c.RGBA,c.UNSIGNED_BYTE,R);if("RGBAARRAY"===a)return{data:R};z||(A=document.createElement("canvas"),x=A.getContext("2d"),
z=!0);A.width=w;A.height=u;C=x.createImageData(w,u);C.data.set(R);x.putImageData(C,0,0);var g=A.toDataURL("image/png")}else if("JSON"===a)if(d)g=new Float32Array(f),c.viewport(0,0,w,u),H.f(!0,!0),c.readPixels(0,0,w,u,c.RGBA,c.FLOAT,g);else{for(g=0;4>g;++g)c.viewport(0,u*g,w,u),k.Ua("u10",B[g]),H.f(!g,!g);R.forEach(function(a,b){c.readPixels(0,u*b,w,u,c.RGBA,c.UNSIGNED_BYTE,a)});g=Array(f);for(h=0;h<f;++h)g[4*h]=Y[0][h],g[4*h+1]=Y[1][h],g[4*h+2]=Y[2][h],g[4*h+3]=Y[3][h]}return{format:a,data:g,width:w,
height:u,isMirrorY:b.K,isFlipY:"RGBA"===a?b.isFlipY:!b.isFlipY}}};b.isMipmap&&!Q&&U&&!Z&&(E.P(),Z=!0);if(b.url)a(F),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),J=new Image,J.ec="Anonymous",J.crossOrigin="Anonymous",J.src=b.url,J.onload=function(){w=J.width;u=J.height;l()};else if(b.B){var pa=function(){w=void 0!==b.B.videoWidth?b.B.videoWidth:b.B.width;u=void 0!==b.B.videoHeight?b.B.videoHeight:b.B.height;w?l():setTimeout(pa,1)};pa()}else b.array?(b.C&&!b.isFloat?b.array instanceof
Uint16Array?(O=b.array,l()):f()?(O=e(b.array),l()):(l(),I.pb(E,b.array,W)):(O=b.isFloat?b.array instanceof Float32Array?b.array:new Float32Array(b.array):b.array instanceof Uint8Array?b.array:new Uint8Array(b.array),l()),b.isKeepArray||(O&&O!==b.array&&(O=null),delete b.array)):l();E.ub=E.A;G&&U&&(G(E),G=!1);return E},D:function(b){b!==h&&(c.activeTexture(d[b]),h=b);g[b]=-1;a(null)},Zb:function(a){l.random.b(a)},reset:function(){for(var a=0;a<d.length;++a)g[a]=-1;h=-1},Oc:function(){h=-1},bd:function(){for(var a=
0;a<d.length;++a)I.D(a)},qb:function(){l&&(l.random.remove(),l.Va.remove())},cd:function(a,b){if("RGBA"===a.format||"RGBE"===a.format){var d=new Image;d.src=a.data;d.onload=function(){I.a({K:a.isMirrorY,isFlipY:a.isFlipY,isFloat:!1,B:d,la:function(d){if("RGBA"===a.format)b(d);else{var f=a.width,e=a.height,h=I.a({K:a.isMirrorY,isFloat:!0,width:f,height:e,isFlipY:a.isFlipY});n.J();c.viewport(0,0,f,e);k.set("s48");h.i();d.b(0);H.f(!0,!0);I.D(0);b(h);c.flush();setTimeout(d.remove,50)}}})}}else"JSON"===
a.format?b(I.a({isFloat:!0,isFlipY:a.isFlipY,width:a.width,height:a.height,array:new Float32Array(a.data)})):b(!1)}};return I}(),p=function(){function a(){b="undefined"===typeof ia?JEContext:ia;e=!0}var b,e=!1,f=!1,h=!1,d=!1,r=!1,g=!1,l=!1,m=!1,q=!1,v=!1,t=!1,z=!0,A=!0,x=!0,C,B,y={j:function(){if(e)return!0;a();y.o()||(y.Ha(),y.ba());y.mb();y.nb();n.j();L.j();if(!y.hb())return!1;H.j();L.yb();return!0},A:function(){e||a();return b.A()},H:function(){e||a();return b.H()},o:function(){e||a();return b.o()},
mb:function(){t=(v=c.getExtension("EXT_color_buffer_float")||c.getExtension("WEBGL_color_buffer_float")||c.getExtension("OES_color_buffer_float"))?!0:!1;window.GL_EXT_COLORBUFFERFLOAT=v},nb:function(){c.getExtension("EXT_color_buffer_half_float")||c.getExtension("WEBGL_color_buffer_half_float")||c.getExtension("OES_color_buffer_half_float")},Ha:function(){if(!f){this.o()||(h=c.getExtension("OES_texture_float")||c.getExtension("MOZ_OES_texture_float")||c.getExtension("WEBKIT_OES_texture_float"),r=
(window.GL_EXT_FLOAT=h)?!0:!1);if(r||this.o())d=c.getExtension("OES_texture_float_linear")||c.getExtension("MOZ_OES_texture_float_linear")||c.getExtension("WEBKIT_OES_texture_float_linear"),window.GL_EXT_FLOATLINEAR=d;f=!0}},ba:function(){if(!q){if(!this.o()){if(g=c.getExtension("OES_texture_half_float")||c.getExtension("MOZ_OES_texture_half_float")||c.getExtension("WEBKIT_OES_texture_half_float"))B=g.HALF_FLOAT_OES,l=!0;window.GL_EXT_HALFFLOAT=g}if(l||this.o())m=c.getExtension("OES_texture_half_float_linear")||
c.getExtension("MOZ_OES_texture_half_float_linear")||c.getExtension("WEBKIT_OES_texture_half_float_linear"),window.GL_EXT_HALFFLOATLINEAR=m;q=!0}},da:function(){if(y.o())return c.HALF_FLOAT;y.ba();return l?B:c.FLOAT},Da:function(){return z},ac:function(){return A},$b:function(){return x},eb:function(){return t},jb:function(){C=!y.o();if(!C)return A=z=!0;var a=n.a({width:1});a.ua();var b=L.a({width:1,isFloat:!0,qa:!0,L:4});a.i();b.i();c.flush();y.ba();if(!l)return!1;b.remove();b=L.a({width:1,isFloat:!1,
C:!0,L:4});b.i();if(c.checkFramebufferStatus(n.Ja())!==c.FRAMEBUFFER_COMPLETE)return!1;z=!1;A=!0;a.remove();b.remove();return!0},ib:function(){var a=n.a({width:1});a.ua();var b=L.a({width:1,isFloat:!0,L:3});a.i();b.i();c.flush();c.checkFramebufferStatus(n.Ja())!==c.FRAMEBUFFER_COMPLETE?(L.Jb(),x=!1):x=!0;a.remove();b.remove();return!0},hb:function(){return y.jb()&&y.ib()?!0:!1}};return y}(),fa=function(){var a=!1,b=[.8,1,.8,1],e=0,f,h=new Uint8Array(4),d=b.concat(b).concat(b).concat(b),r=!0,g={j:function(){function b(){c.generateMipmap(c.TEXTURE_2D);
H.ka();H.f(!1,!0);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,h)}p.Ha();p.ba();var g=c.RGBA,q=c.RGBA;if(ia.o()){var v=c.RGBA32F;v&&(g=v);(v=c.RGBA16F)&&(q=v)}H.j();n.reset();n.D();c.viewport(0,0,1,1);k.set("s0");a=!0;f=c.createTexture();c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,f);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,
c.NEAREST_MIPMAP_NEAREST);c.texImage2D(c.TEXTURE_2D,0,g,2,2,0,c.RGBA,c.FLOAT,new Float32Array(d));b();if(0!==h[0]){if(!p.Da())return e=2,!0;e=3;return!0}c.texImage2D(c.TEXTURE_2D,0,q,2,2,0,c.RGBA,p.da(),new Uint16Array(d));b();if(0!==h[0])return e=2,!0;c.texImage2D(c.TEXTURE_2D,0,q,2,2,0,c.RGBA,c.FLOAT,new Float32Array(d));b();if(0!==h[0])return e=2,!0;r=!1;c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texImage2D(c.TEXTURE_2D,
0,q,2,2,0,c.RGBA,p.da(),new Float32Array(d));b();return 0!==h[0]?(e=2,!0):!1},fb:function(){return r},uc:function(){return e},Ec:function(){a||g.j();return 3===e},Cb:function(){a||g.j();return 2===e}};return g}(),ja={a:function(a){var b=L.a(a.alpha),e=L.a(a.beta);return{kb:function(){b.b(1);e.b(2)}}}},na={a:function(a){var b=a.Qb;b.index=a.index;b.M=a.M;b.parent=a.parent;switch(b.type){case "input":var e=la.a(b);break;case "composite":break;default:e=ma.a(b)}return e}},la={a:function(a){void 0===
a.sift&&(a.sift=!1);void 0===a.DWT&&(a.DWT=!1);void 0===a.blur&&(a.blur=!1);void 0===a.siftOutWidth&&(a.siftOutWidth=!1);void 0===a.filterBank&&(a.filterBank=!1);void 0===a.poolType&&(a.poolType="max");void 0===a.postpreprocessing&&(a.postpreprocessing="copy");void 0===a.density&&(a.density=1);a.filterBank&&(FilterBank.Tc(a.poolType,a.postpreprocessing),FilterBank.Rc(a.density));var b=!1;if(a.sa){b=!0;oa&&void 0!==oa.Za&&(a.sa=oa.Za+a.sa);var e=L.a({isFloat:!1,url:a.sa})}var f=!1,h=void 0!==a.preprocessing?
a.preprocessing:!1,d=!1;a.sift?Sift.j({xb:c,aa:!1,width:a.size,Lc:a.siftOutWidth}):a.DWT&&DWT.j({xb:c,aa:!1,width:a.size});switch(h){case "sobel":var r="s30";d=!0;break;case "meanNormalization":r="s31";d=!0;break;case "grayScale":r="s29";d=!1;break;case "copy":r="s0";break;case "inputLightRegulation":r="s29";qa.j({width:a.size,nBlurPass:a.nBlurPass,Bb:!1});f=!0;break;default:r="s3"}b&&(r+="Mask");if(a.blur)var g=L.a({isFloat:!1,isPot:!1,width:a.size});var l=L.a({isFloat:!1,isPot:!1,width:a.size}),
m,q,v,t={A:function(){return a.sift?Sift.S():a.filterBank?FilterBank.S():a.size},S:function(){return t.A()},Ma:function(){return a.sift?Sift.W():a.DWT?DWT.W():a.filterBank?FilterBank.W():f?qa.W():l},F:function(){n.J();a.blur&&(g.l(),k.set("s49"),k.G("u9",1/a.size,1/a.size),H.f(!1,!0),g.b(0));k.set(r);d&&k.w("u29",1/a.size);l.l();b&&e.b(1);H.f(!1,!1);l.b(0);f?qa.ga_(l):a.sift?(k.O(),Sift.ga_()):a.DWT?(k.O(),DWT.ga_(4)):a.filterBank&&(k.O(),FilterBank.ga_(l))},Sc:function(a){m=a},va:function(b){m=b;q="s42";
v=L.a({isFloat:!0,isPot:!0,width:a.size})},na:function(){return v},I:function(){var a=t.Ma(),b=m.na();m.oa().I(b);b=m.oa().R();k.set(q);k.w("u28",b*b);a.b(1);v.l();H.f(!1,!1);v.b(0)}};return t}},ma={a:function(a){void 0===a.disableNormalize&&(a.disableNormalize=!1);var b=[],e=[],f,h,d=!1,r,g=!0,l,m,q=a.isReorganize?a.isReorganize:!1,v=a.kernelSize?!0:!1,t,z,A,x,C,B,y,V,U=a.lb?ja.a(a.lb):!1,da=U?!0:!1,K={isEnabled:!1},I;if("softmax"===a.type){a.activation="softmax";a.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(a.num_classes))/
Math.log(2)));a.sparsity=void 0!==a.sparsity?a.sparsity:a.M.S();a.gain=void 0!==a.gain?a.gain:1;k.N("s20",[{type:"1f",name:"u12",value:a.gain}]);var D=L.a({isFloat:!0,isPot:!1,width:a.size}),X=L.a({isFloat:!0,isPot:!1,width:a.size,isMipmap:!0});g=!1;var S=new Uint8Array(Math.pow(4*a.size,2)),P;for(P=0;P<a.size*a.size;++P){var F=P<a.num_classes?255:0;S[4*P]=F;S[4*P+1]=F;S[4*P+2]=F;S[4*P+3]=F}var G=L.a({isFloat:!1,isPot:!1,width:a.size,array:S})}else a.cost?(a.sparsity=void 0!==a.sparsity?a.sparsity:
a.M.S(),g=!1):"full"===a.connectivityUp&&(a.sparsity=a.M.S());var J={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[a.activation],O=a.sparsity*a.sparsity,w=!1,u=a.size;if(a.maxPooling){switch(a.maxPooling.size){case 2:var ha="s32";break;case 4:ha="s33"}w=!0;u/=a.maxPooling.size;var ka=L.a({isFloat:!0,isPot:!1,width:u})}var aa=void 0!==a.X&&a.X?!0:!1;if(aa){var Y="s50"+a.index;k.zb("s50",Y,[((a.X.n-1)/2).toFixed(1)]);k.N(Y,[{type:"1i",
name:"u0",value:0},{type:"2f",name:"u9",value:[1/a.size,1/a.size]},{type:"1f",name:"u8",value:a.X.alpha},{type:"1f",name:"u11",value:a.X.beta},{type:"1f",name:"u36",value:a.X.k}]);var R=L.a({isFloat:!0,isPot:!0,width:a.size});var N=L.a({isFloat:!0,isPot:!0,width:a.size})}S=a.size*a.sparsity;var M=L.a({isMipmap:!0,isFloat:!0,isPot:!0,width:S}),T=L.a({isFloat:!0,isPot:!0,width:a.size}),W=Math.log(S/a.size)/Math.log(2),Q;g&&(Q=L.a({isFloat:!0,isPot:!1,width:a.size}));var ca=L.a(a.bias),Z,E={A:function(){return a.size},
S:function(){return u},La:function(){return a.num_classes},ab:function(a){I.b(a)},Fb:function(){a.remap&&a.remap.isEnabled&&(K={isEnabled:!0,ta:L.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.ta.data),width:a.remap.ta.width,isPot:!1}),layers:a.remap.layers.map(function(b){return a.parent.tb(b)}),depth:a.remap.depth})},Lb:function(){switch(a.connectivityUp){case "gaussian":Z=ra.a(a.connectivity);break;case "direct":Z=sa.a(a.connectivity);break;case "square":Z=ta.a(a.connectivity);break;case "full":Z=
ua.a(a.connectivity);break;case "conv":m=a.kernelSize,Z=va.a(a.connectivity),q&&(l=L.a({width:u,isFloat:!0,Pc:!1,isPot:!1}))}},F:function(b,e){I=b;M.l();v&&ca.b(2);Z.F(K);M.b(0);M.Ia(W);T.l();v?k.set("s0"):(k.set("s28"),k.w("u28",O),ca.b(1));M.Ba(W,0);H.f(!1,!1);k.set(J);aa?R.i():Q.i();T.b(0);da&&U.kb();H.f(!1,!1);aa&&(k.set(Y),N.i(),R.b(0),H.f(!1,!1),k.set("s51"),k.w("u8",1),Q.i(),N.b(1),H.f(!1,!1));if(g)return w?(ka.l(),Q.b(0),k.set(ha),k.G("u9",1/a.size,1/a.size),H.f(!1,!1),e=ka):e=Q,e.b(0),q&&
(l.i(),k.set("s22"),k.G("u16",m,u/m),H.f(!1,!1),e=l,l.b(0)),B=e;if("softmax"===a.type)return k.set("s20"),Q.b(0),D.i(),H.f(!1,!1),a.disableNormalize?b=D:(k.set("s2"),D.b(0),G.b(1),X.i(),H.f(!1,!1),k.set("s0"),h.l(),X.b(0),X.Ia(!1),H.f(!1,!1),k.set("s21"),f.l(),X.Ba(!1,0),k.w("u14",Q.ub()),h.b(1),H.f(!1,!1),b=f),e?e=E.Ra(b):!1;if(a.cost){k.set("gpuRawAvg"===d?"s8":"s7");e=Q;a.disableNormalize||(k.w("u6",1/a.size),f.l(),Q.b(0),H.f(!1,!1),e=f);B=e;switch(d){case "cpuRGBA2Float":e.Ga();e=E.Ra(e);r(e);
break;case "gpuRawAvg":case "gpuRaw":e.b(0),r(e)}return!1}},gb:function(g){g&&void 0!==g.Qa&&(d=g.Qa,r=g.Eb);Q=L.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===a.type,width:a.size});"softmax"===a.type&&(h=L.a({isFloat:!0,isPot:!0,width:1}));var l=0,m=0,q=void 0!==a.num_classes?a.num_classes:a.size*a.size;for(g=0;g<q;++g)b.push(l+(a.size-1-m)*a.size),e.push([-1,-1,-1,-1]),++l,l===a.size&&(l=0,++m);a.disableNormalize||(f=L.a({isFloat:!0,isPot:!0,width:a.size}))},Ra:function(a){a.Ga();var d=a.Gb();b.forEach(function(a,
b){e[b][0]=d[0][a];e[b][1]=d[1][a];e[b][2]=d[2][a];e[b][3]=d[3][a]});return e},va:function(b){C=b;V={$c:"s43",Nc:"s44",dc:"s42",hc:"s45",Xb:"s46"}[a.activation];b={isFloat:!0,isPot:!0,width:a.size};y=L.a(b);z=L.a(b);w&&L.a(b);q&&(A=L.a(b));g||(x=L.a({isFloat:!0,isPot:!1,width:a.size}))},na:function(){return t},I:function(b){if(!g){x.l();k.set("quadratic"===a.cost?"s41":"s40");b.b(1);B.b(0);H.f(!1,!1);x.b(0);var d=1}b=T;g&&(d=C.na(),q&&(y.l(),k.set("s22"),T.b(0),k.G("u16",m,u/m),H.f(!1,!1),b=y,d.b(0)),
C.oa().I(d),d=C.oa().R());k.set(V);k.w("u28",d*d);b.b(1);z.l();H.f(!1,!1);t=z;q&&(k.set("s22"),A.l(),z.b(0),k.G("u16",u/m,m),H.f(!1,!1),t=A);t.b(0)}};a.M&&E.Lb(a.M);return E}};
function wa(){var a,b,e;a||(a={});this.tb=function(a){return b[a]};this.Ib=function(a){var f=!1;b=a.map(function(a,b){return f=a=na.a({index:b,parent:this,Qb:a,M:f})});e=b[b.length-1];b.forEach(function(a,b){0!==b&&a.Fb()})};this.F=function(a,e){var d=e;b.forEach(function(b){d=b.F(d,a)});return d};this.va=function(){var a;for(a=b.length-1;0<=a;--a){var e=a!==b.length-1?b[a+1]:!1;b[a].va(e)}};this.I=function(a){var e;for(e=b.length-1;0<=e;--e)b[e].I(a)};this.W=function(){return e.Ma()};this.Kb=function(a){e.gb(a)};
this.La=function(){return e.La()}}
var sa={a:function(a){var b=L.a(a.weights);delete a.weights.data;return{R:function(){return 1},ea:function(){return b},F:function(){k.set("s27");b.b(1);H.f(!1,!1)}}}},ua={a:function(a){var b=a.fromLayerSize*a.toLayerSize,e=a.fromLayerSize,f=L.a({isFloat:!0,isPot:!0,width:b,isFlipY:!1,array:new Float32Array(a.weights.data)});delete a.weights.data;var h=L.a({isFloat:!0,isPot:!0,width:b,isMipmap:!0}),d=L.a({isFloat:!0,isPot:!0,width:a.fromLayerSize});return{R:function(){return e},ea:function(){return f},
sc:function(){return _fboWeights},F:function(b){if(b.isEnabled){k.set("s25");b.ta.b(3);var d,e=Math.min(b.layers.length,b.depth);for(d=0;d<e;++d)b.layers[d].ab(4+d)}else k.set("s24");k.w("u19",a.toLayerSize);f.b(1);H.f(!1,!1)},I:function(){k.set("s38");k.w("u19",a.toLayerSize);k.w("u27",a.fromLayerSize);h.l();f.b(1);H.f(!1,!1);d.l();k.set("s0");h.b(0);h.P();H.f(!1,!1);d.b(0)}}}},ra={a:function(a){var b=a.toSparsity*a.toLayerSize,e=b/a.fromLayerSize,f=L.a(a.weights);delete a.weights.data;var h=L.a({isFloat:!0,
isPot:!0,width:b,array:new Float32Array(a.hd)}),d=L.a({width:b,isFloat:!0,array:new Float32Array(a.jc),isPot:!0}),r=L.a({width:b,isFloat:!0,array:new Float32Array(a.ad),isPot:!0});return{R:function(){return e},ea:function(){return f},sb:function(){return d},vb:function(){return r},wb:function(){return h},F:function(){k.set("s23");f.b(1);r.b(2);H.f(!1,!0)}}}},ta={a:function(a){var b=a.fromLayerSize,e=a.toLayerSize,f=a.toSparsity*e,h=f/b,d=a.toSparsity,r=b/e,g,l,m,q,v=0,t=0,z=0,A=Array(d*e*d*e*4),x=
Array(d*e*d*e*4),C=Array(d*e*d*e*4),B=Array(b*b);for(g=0;g<B.length;++g)B[g]=0;var y=Math.floor(d/2),V=.5/e,U=.5/b,da=.5/f;for(g=0;g<e;++g)for(l=0;l<e;++l){var K=Math.round(g*r);var I=Math.round(l*r);var D=g/e;var X=l/e;D+=V;X+=V;for(m=0;m<d;++m)for(q=0;q<d;++q){var S=v/f;var P=t/f;var F=K+m-y;var G=I+q-y;0>F&&(F+=b);0>G&&(G+=b);F>=b&&(F-=b);G>=b&&(G-=b);var J=F/b;var O=G/b;P=1-P-1/f;J+=U;O+=U;S+=da;P+=da;A[4*z]=J;A[4*z+1]=O;A[4*z+2]=D;A[4*z+3]=X;var w=g*d+m,u=l*d+q;u=e*d-u-1;w=u*e*d+w;x[4*w]=S;x[4*
w+1]=P;x[4*w+2]=J;x[4*w+3]=O;J=B[G*b+F]++;O=J%h;F=F*h+O;G=G*h+(J-O)/h;G=b*h-1-G;G=G*b*h+F;C[4*G]=S;C[4*G+1]=P;C[4*G+2]=D;C[4*G+3]=X;++v>=f&&(v=0,++t);++z}}var ha=L.a({isFloat:!0,isPot:!0,width:f,isFlipY:!1,array:new Float32Array(a.weights.data)});delete a.weights.data;var ka=L.a({isFloat:!0,isPot:!0,width:f,array:new Float32Array(A)}),aa=L.a({width:f,isFloat:!0,array:new Float32Array(C),isPot:!0});C=null;var Y=L.a({width:f,isFloat:!0,array:new Float32Array(x),isPot:!0});x=null;var R=L.a({isFloat:!0,
isPot:!0,width:f,isMipmap:!0}),N=L.a({isFloat:!0,isPot:!0,width:f/h});return{R:function(){return h},ea:function(){return ha},sb:function(){return aa},vb:function(){return Y},wb:function(){return ka},F:function(){k.set("s23");ha.b(1);Y.b(2);H.f(!1,!1)},I:function(){k.set("s37");R.l();aa.b(1);ha.b(2);H.f(!1,!1);k.set("s0");N.l();R.b(0);R.P();H.f(!1,!1);N.b(0)}}}},va={a:function(a){function b(){k.w("u25",e);k.w("u26",f);k.w("u19",a.toLayerSize);k.w("u27",a.fromLayerSize)}var e=a.kernelSize,f=a.toSparsity,
h=f*a.toLayerSize,d=h/a.fromLayerSize,r=L.a(a.weights),g=L.a({isFloat:!0,isPot:!0,width:h,isMipmap:!0}),l=L.a({isFloat:!0,isPot:!0,width:a.fromLayerSize});return{R:function(){return d},xc:function(){return f},ea:function(){return r},F:function(){k.set("s26");b();r.b(1);H.f(!1,!1)},I:function(){k.set("s39");b();g.l();r.b(1);H.f(!1,!1);k.set("s0");l.l();g.b(0);g.P();H.f(!1,!1);l.b(0)}}}},qa=function(){var a,b,e,f,h,d,r,g,l;return{j:function(m){a=m.nBlurPass?m.nBlurPass:3;b=m.width?m.width:64;f=m.Bb?
!0:!1;f=!0;m={isFloat:!1,width:b,isPot:!1,isFlipY:!1};h=L.a(m);d=L.a(m);r=L.a(m);g=L.a(m);l=L.a({isFloat:!0,width:b,isPot:!1,isFlipY:!1});e=1/b},ga_:function(b){k.set("s35");for(var m=0;m<a;++m)h.i(),k.G("u9",e,0),H.f(f,!1),d.i(),h.b(0),k.G("u9",0,e),H.f(f,!1),d.b(0);k.set("s34");g.i();b.b(0);H.f(f);k.set("s35");for(m=0;m<a;++m)r.i(),g.b(0),k.G("u9",e,0),H.f(f,!1),g.i(),r.b(0),k.G("u9",0,e),H.f(f,!1);k.set("s36");l.i();b.b(0);d.b(1);g.b(2);H.f(f,!1);l.b(0)},W:function(){return l}}}();
function xa(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return!1;var a=document.createElement("video");a.autoplay=!0;return a}
function ya(){var a=!1,b=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,
4)))a=!0;return a}function za(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Aa(){var a=navigator.userAgent.toLowerCase();return-1==a.indexOf("safari")||-1<a.indexOf("chrome")?!1:!0}
function Ba(a,b){var e=xa(),f={video:{facingMode:{ideal:"user"},width:{min:480,max:1280,ideal:800},height:{min:480,max:1280,ideal:600}},audio:!1};if(e)if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var h=f&&f.audio;f&&f.video&&f.video.width&&f.video.width.ideal&&(e.style.width=f.video.width.ideal+"px");f&&f.video&&f.video.height&&f.video.height.ideal&&(e.style.height=f.video.height.ideal+"px");e.setAttribute("autoplay","");h?e.volume=0:e.setAttribute("muted","");e.setAttribute("playsinline",
"");za()&&(f.video.width&&delete f.video.width,f.video.height&&delete f.video.height);ya()&&!za()&&(f.video.width&&f.video.width.ideal&&delete f.video.width.ideal,f.video.height&&f.video.height.ideal&&delete f.video.height.ideal);(function(d){return navigator.mediaDevices.getUserMedia(d).then(function(b){function d(){e.play();a(e,b)}za()||e.addEventListener("loadeddata",d,!1);"undefined"!==typeof e.srcObject?e.srcObject=b:(e.src=window.URL.createObjectURL(b),e.gd=b);if(Aa()&&(e.volume=0,1===e.volume)){var f=
function(){e.volume=0;window.removeEventListener("mousemove",f,!1);window.removeEventListener("touchstart",f,!1)};window.addEventListener("mousemove",f,!1);window.addEventListener("touchstart",f,!1)}za()&&d()}).catch(function(a){b(a)})})(f)}else b&&b();else b&&b()}var Ca=[1,1,2],Da=[.2,.8],oa={};
function Ea(a){function b(a){S=setTimeout(f.bind(null,a),10)}function e(){X&&(window.cancelAnimationFrame(X),X=!1);S&&(window.clearTimeout(S),S=!1)}function f(){if(y!==B.pause){n.J();var a=l.currentTime-J;0>a&&(J=l.currentTime);20>1E3*a||(m.refresh(),J+=a,k.set("s53"),q.l(),m.b(0),H.f(!1,!0));for(a=0;1>a;++a)k.set("s54"),v.l(),q.b(0),t.b(1),H.f(!1,!1),v.b(0),d.F(!1,v);U===V.visible&&(n.Ub(),k.set("s52"),t.b(0),q.b(1),H.f(!1,!1));c.flush();X=window.requestAnimationFrame(b)}}var h=Date.now(),d,r=1.6/
3,g=[.125,.125],l,m,q,v,t,z,A,x,C=new Uint8Array([0,0,0,0]),B={Db:0,ia:1,ma:2,pause:3},y=B.Db,V={hidden:0,visible:1},U=a.Ab?V.visible:V.hidden,da=0,K=.25,I=.25,D=1.6,X=!1,S=!1,P=0,F="undefined"!==typeof a.za?a.za:"./",G=(("undefined"!==typeof a.Ta?a.Ta:.55)-Da[0])/(Da[1]-Da[0]),J=0;return{Mb:function(a){G=a},Sb:function(a){U=a?V.visible:V.hidden},Tb:function(a){a&&y!==B.pause?(y=B.pause,e()):a||y!==B.pause||(y=B.ma,e(),y=B.ia,f(0))},j:function(b){l=b;k.Ya([{id:"s53",name:"_",Y:"attribute vec2 a0;uniform vec2 u37,u38;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u38+u37*a0;}",
$:["a0"],U:[2],c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vv0);}",g:["u0","u37","u38"],precision:"lowp"},{id:"s54",name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vv0);}",Y:"attribute vec2 a0;uniform sampler2D u39;uniform vec2 u40;const vec2 k=vec2(.25,.5),j=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u39,k);vec2 d=a.gb,b=a.a*u40;vec4 c=texture2D(u39,j);float l=c.a,g=c.y;vec2 f=vec2(1./cos(g),1.);b*=f;vec2 i=a0*.5+e;vv0=d+(i-e)*b,gl_Position=vec4(a0,0.,1.);}",
$:["a0"],U:[2],g:["u0","u39","u40"],precision:"lowp"},{id:"s55",name:"_",Y:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u41,u39;uniform vec3 u42,u43;uniform float u44,u45,u46,u47,u48,u49;const vec4 e=vec4(.25,.25,.25,.25);const float f=1e-3;void main(){vec4 b=texture2D(u39,vec2(.25,.5));float a=floor(b.r+f),h=dot(e,texture2D(u41,vec2(.25,.75))),i=dot(e,texture2D(u41,vec2(.5,.75))),j=dot(e,texture2D(u41,vec2(.75,.75))),k=dot(e,texture2D(u41,vec2(0.,.75))),c=clamp(k,-1.+f,1.-f);vec4 l=texture2D(u41,vec2(0.,.5)),m=texture2D(u41,vec2(.25,.5));float d=dot(l,e),n=dot(m,e);bool o=d>u47&&d>n+u48;o?a=2.:a>u46?a=0.:a>1.9&&(b.a>u45||b.a<u44)?a=0.:a>1.9?a+=1.:0.;if(a<.9)b.gba=u42,a=1.,c=0.;else{float p=step(1.5,a);a*=p;float g=b.a*u49;b.gba+=vec3(h,i,j)*u43*g;}b.r=a+c*.5+.5,gl_FragColor=b;}",
g:"u41 u39 u42 u44 u45 u46 u48 u47 u43 u49".split(" ")},{id:"s56",name:"_",c:"uniform sampler2D u39,u50;uniform float u51;varying vec2 vv0;const vec2 e=vec2(.5,.5);void main(){vec4 a=texture2D(u39,e),b=texture2D(u50,e);float c=step(2.,a.r),d=fract(a.r);vec4 f=vec4(c,d,0.,1.);gl_FragColor=mix(f,b,u51);}",g:["u39","u50","u51"]},{id:"s52",name:"_",c:"uniform sampler2D u39,u52;uniform vec2 u40;varying vec2 vv0;const vec2 j=vec2(1.,1.);const vec3 k=vec3(0.,.7,1.);void main(){vec4 g=texture2D(u39,vec2(.5,.5));vec3 l=texture2D(u52,vv0).rgb;vec2 h=g.gb;float m=g.a;vec2 b=m*u40,d=h+b,c=h;c-=b/2.,d-=b/2.;vec2 n=.5*(c+d),i=step(c,vv0)*step(vv0,d);float o=i.x*i.y;vec2 a=2.*abs(n-vv0)/b;a=pow(a,3.*j);float f=max(a.x,a.y);f*=o,gl_FragColor=vec4(mix(l,k,f),1.);}",
g:["u39","u52","u40"]}]);k.N("s54",[{type:"1i",name:"u0",value:0},{type:"1i",name:"u39",value:1},{type:"2f",name:"u40",value:g}]);k.N("s56",[{type:"1i",name:"u39",value:0},{type:"1i",name:"u50",value:1},{type:"1f",name:"u51",value:.9}]);k.N("s52",[{type:"1i",name:"u39",value:0},{type:"1i",name:"u52",value:1},{type:"2f",name:"u40",value:g}]);k.N("s55",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u39",value:1},{type:"1f",name:"u44",value:1.1},{type:"1f",name:"u45",value:5.8},{type:"1f",name:"u46",
value:55},{type:"1f",name:"u47",value:.95},{type:"1f",name:"u48",value:1.1},{type:"1f",name:"u49",value:g[0]},{type:"3f",name:"u43",value:[Ca[0]*g[0],Ca[1]*g[1],Ca[2]]}]);m=L.a({B:l,isPot:!1,isFloat:!1,isFlipY:!0});q=L.a({isPot:!1,Ic:!0,isFloat:!1,width:512,height:512});v=L.a({isPot:!0,isFloat:!1,width:64});b={width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.25,.25,0])};t=L.a(b);z=L.a(b);b={width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,0,1])};A=L.a(b);x=L.a(b);ba(F+
'NNC.json',function(b){b=JSON.parse(b);d=new wa;d.Ib(b.layers);d.Kb({Qa:"gpuRawAvg",Eb:function(){t.l();k.set("s55");k.Ob("u42",K,I,D);z.b(1);H.f(!1,!1);0!==++da%2&&(D+=r,3.2<D&&(K+=.1,D=1.6,.75<K&&(K=.25,I+=.1,.75<I&&(I=.25))));k.set("s56");A.i();t.b(0);x.b(1);H.f(!1,!1);k.set("s0");z.i();H.f(!1,!1);x.i();A.b(0);H.f(!1,!1);var b=Date.now();if(100<b-h){h=b;k.set("s1");n.D();H.f(!1,!1);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,C);b=Da[0]+G*(Da[1]-Da[0]);var d=
Math.abs(C[1]/255*2-1),e=128<C[0],f=e&&d<b+.1;y===B.ia&&e&&d<b-.1?(a.Ca(!0),y=B.ma):y!==B.ma||f||(a.Ca(!1),y=B.ia);n.J()}}});++P;1===P&&(Fa.ready=!0,a.cb(!1),e(),y=B.ia,f(0),P=0)})}}}
var Fa={ready:!1,set_sensibility:function(a){Fa.ready&&Fa.Z.Mb(a)},toggle_pause:function(a){Fa.ready&&Fa.Z.Tb(a)},toggle_display:function(a){Fa.ready&&Fa.Z.Sb(a)},init:function(a){function b(b){a.callbackReady&&a.callbackReady(b?b:"UNKNOW_ERROR")}Fa.Z=Ea({Ab:"undefined"===typeof a.isDisplayVideo?!0:a.isDisplayVideo,cb:function(){a.callbackReady&&a.callbackReady()},Ca:a.callbackTrack,Ta:a.sensibility,za:a.NNCpath});if(!ia.j({Fa:a.canvasId,width:512,height:512,debug:!1,pa:!1,premultipliedAlpha:!0}))return b&&
b("COMPAT_FAIL"),!1;k.j();Ba(function(a){function b(){if(0===a.currentTime){var e=a.play();void 0!==e&&e.then(function(){}).catch(function(){});setTimeout(b,100)}else{var d=a.videoWidth,f=a.videoHeight;0===d||0===f?setTimeout(b,100):(e=[.5,.5],f/=d,d=ia.H()/ia.A(),f>d?1>=f?e[0]*=f:e[1]/=f:(e[0]*=f,f=1/d,e[0]*=f,e[1]*=f),e[1]*=d,Fa.Z.j(a),k.N("s53",[{type:"1i",name:"u0",value:0},{type:"2f",name:"u37",value:e},{type:"2f",name:"u38",value:[.5,.5]}]))}}b()},function(){b("NO_WEBCAM")});return!0}};
window.GLANCETRACKERAPI=Fa;
;return GLANCETRACKERAPI;})();
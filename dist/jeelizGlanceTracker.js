 /**
 * Jeeliz Glance Tracker - https://github.com/jeeliz/jeelizGlanceTracker
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var GLANCETRACKERAPI=(function(){/*
 SharedContext.is_webgl2() &&*/
function fa(b,c){var d=new XMLHttpRequest;d.open("GET",b,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||c(d.responseText)};d.send()}function ha(b,c){if(0===c||"object"!==typeof b)return b;b=Object.assign({},b);c=void 0===c||-1===c?-1:c-1;for(var d in b)b[d]=ha(b[d],c);return b}
function ma(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function sa(b,c){var d=c%8;return b[(c-d)/8]>>7-d&1}
function ua(b){var c=JSON.parse(b);b=c.ne;var d=c.nf,l=c.n;var q="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var t=q.length;c=new Uint8Array(t);for(var p=0;p<t;++p)c[p]=q.charCodeAt(p);q=new Float32Array(l);t=new Float32Array(d);p=b+d+1;for(var u=0;u<l;++u){for(var e=p*u,w=0===sa(c,e)?1:-1,A=e+1,m=1,h=0,z=A+b-1;z>=A;--z)h+=m*sa(c,z),m*=2;A=h;e=e+1+b;m=t.length;h=0;for(z=e;z<e+m;++z)t[h]=sa(c,z),++h;for(m=e=0;m<d;++m)e+=t[m]*Math.pow(2,-m-1);q[u]=0===e&&0===
A?0:w*(1+e)*Math.pow(2,1+A-Math.pow(2,b-1))}return q}
var D=function(){function b(r,n,v){n=r.createShader(n);r.shaderSource(n,v);r.compileShader(n);return r.getShaderParameter(n,r.COMPILE_STATUS)?n:!1}function c(r,n,v){n=b(r,r.VERTEX_SHADER,n);v=b(r,r.FRAGMENT_SHADER,v);r===a&&p.push(n,v);var E=r.createProgram();r.attachShader(E,n);r.attachShader(E,v);r.linkProgram(E);return E}function d(r,n){n.v=n.v?!0:!1;if(!n.v){void 0===n.ra&&(n.ra="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===
n.ta&&(n.ta=["a0"]);void 0===n.ka&&(n.ka=[2]);if(void 0===n.precision||"highp"===n.precision)n.precision=m;n.id=w++;void 0!==n.vc&&(n.vc.forEach(function(E,K){n.h=n.h.replace(E,n.Ja[K])}),n.vc.splice(0));n.Bb=0;n.ka.forEach(function(E){n.Bb+=4*E});n.Z=c(r,n.ra,"precision "+n.precision+" float;\n"+n.h);n.u={};n.i.forEach(function(E){n.u[E]=r.getUniformLocation(n.Z,E)});n.attributes={};n.la=[];n.ta.forEach(function(E){var K=r.getAttribLocation(n.Z,E);n.attributes[E]=K;n.la.push(K)});if(n.j){r.useProgram(n.Z);
e=n;u=n.id;for(var v in n.j)r.uniform1i(n.u[v],n.j[v])}n.Y=!0}}function l(r){za.Xd(I);u!==r.id&&(I.J(),u=r.id,e=r,a.useProgram(r.Z),r.la.forEach(function(n){0!==n&&a.enableVertexAttribArray(n)}))}function q(r,n,v){d(r,n,v);r.useProgram(n.Z);r.enableVertexAttribArray(0);u=-1;return e=n}function t(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var p=[],u=-1,e=null,w=0,A=!1,m="highp",h=["u1"],z=["u0"],y={u1:0},g={u0:0},k={u1:0,u2:1},
B={u3:0},L={s0:t(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:h,j:y,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:k},s3:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:h,j:y},s4:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:k},s5:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:h,j:y},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:h,j:y},s7:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],j:g},s8:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
i:["u0","u4"],j:g},s9:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:h,j:y},s10:{h:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",i:["u1","u5","u6"],j:{u1:0,u5:1}},s11:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",
i:["u1","u7"],j:y},s12:{h:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
i:["u1","u8"],j:y},s13:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:z,j:g,v:!0},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:z,j:g},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:z,j:g},
s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:z,j:g},s17:{h:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u6","u9"],j:{u0:0,u6:1,u9:2},v:!0},s18:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
i:z,j:g},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",i:z,j:g,v:!0},s20:{h:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u10","u11"],j:{u0:0,u10:1},v:!0},s21:{h:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u12"],j:y},s22:{h:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",i:["u13","u14","u15"],j:{u14:0,u13:1,u15:2},v:!0},s23:{h:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",i:["u14","u13","u16"],j:{u14:0,u13:1}},s24:{h:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u13 u14 u16 u20 u17 u18 u19".split(" "),j:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6},v:!0},s25:{h:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",i:"u13 u14 u16 u22 u23 u24 u21".split(" "),
j:{u14:0,u13:1,u21:2}},s26:{h:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",i:["u13","u14"],j:{u14:0,u13:1},v:!0},s27:{h:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",i:["u1","u21","u25"],j:{u1:0,u21:1}},s28:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:h,j:y,precision:"lowp"},s29:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u26"],j:y,precision:"lowp"},s30:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u26"],j:y,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u27"],j:k,v:!0},s32:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u27"],j:k,v:!0},s33:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u7"],j:B},s34:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u7"],j:B,v:!0},
s35:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:y,precision:"lowp",v:!0},s36:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",i:["u7","u1"],j:y,precision:"lowp",
v:!0},s37:{h:"uniform sampler2D u1,u10,u28;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u10,vv0),b=texture2D(u28,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u10","u28"],j:{u1:0,u10:1,u28:2},v:!0}},J={s38:{h:"uniform float u16,u29;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u29*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u16","u13","u14","u21","u29"],Ja:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{h:"uniform float u16,u29,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u29*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u16 u24 u13 u14 u21 u29".split(" "),Ja:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},N=null,G=null,I={Ca:function(){return A},s:function(){if(!A){N=ha(L,2);G=ha(J,2);m="highp";for(var r in N)d(a,N[r],r);D.set("s0");a.enableVertexAttribArray(0);A=!0}},Fb:function(r){r.forEach(function(n){I.Eb(n)})},Eb:function(r){N[r.id]=r;d(a,r,r.id)},bc:function(r,n,v){n||(n=r);N[n]=Object.create(G[r]);N[n].sd=!0;G[r].Ja&&G[r].Ja.forEach(function(E,K){N[n].h=N[n].h.replace(new RegExp(E,"g"),v[K])});d(a,N[n],
n)},set:function(r){r=N[r];r.v&&(r.v=!1,d(a,r,r.id));l(r)},pa:function(r){return q(r,t(),"s40")},tb:function(r){return q(r,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"},"s41")},$c:function(r){return"undefined"===typeof N[r]?!1:N[r].Y},J:function(){-1!==u&&(u=-1,e.la.forEach(function(r){0!==r&&a.disableVertexAttribArray(r)}))},vb:function(){var r=0;e.la.forEach(function(n,v){v=e.ka[v];a.vertexAttribPointer(n,v,a.FLOAT,!1,e.Bb,r);r+=4*v})},we:function(){a.enableVertexAttribArray(0)},
Ka:function(){I.La(a)},La:function(r){r.vertexAttribPointer(e.la[0],2,r.FLOAT,!1,8,0)},af:function(r,n){a.uniform1i(e.u[r],n)},M:function(r,n){a.uniform1f(e.u[r],n)},$:function(r,n,v){a.uniform2f(e.u[r],n,v)},bf:function(r,n){a.uniform2fv(e.u[r],n)},Yd:function(r,n){a.uniform3fv(e.u[r],n)},cf:function(r,n,v,E){a.uniform3f(e.u[r],n,v,E)},df:function(r,n,v,E,K){a.uniform4f(e.u[r],n,v,E,K)},ub:function(r,n){a.uniform4fv(e.u[r],n)},ef:function(r,n){a.uniformMatrix2fv(e.u[r],!1,n)},ff:function(r,n){a.uniformMatrix3fv(e.u[r],
!1,n)},gf:function(r,n){a.uniformMatrix4fv(e.u[r],!1,n)},N:function(r,n){I.set(r);n.forEach(function(v){switch(v.type){case "4f":a.uniform4fv(e.u[v.name],v.value);break;case "3f":a.uniform3fv(e.u[v.name],v.value);break;case "2f":a.uniform2fv(e.u[v.name],v.value);break;case "1f":a.uniform1f(e.u[v.name],v.value);break;case "1i":a.uniform1i(e.u[v.name],v.value);break;case "mat2":a.uniformMatrix2fv(e.u[v.name],!1,v.value);break;case "mat3":a.uniformMatrix3fv(e.u[v.name],!1,v.value);break;case "mat4":a.uniformMatrix4fv(e.u[v.name],
!1,v.value)}})},He:function(){return"lowp"},m:function(){a.disableVertexAttribArray(0);I.J();for(var r in N){var n=N[r];n.Y&&(n.Y=!1,a.deleteProgram(n.Z));n.sd&&delete N[r]}p.forEach(function(v){a.deleteShader(v)});p.splice(0);w=0;A=!1;e=null;u=-1}};return I}(),a=null,Ea=function(){function b(m){console.log("ERROR in ContextFF: ",m);return!1}function c(m){function h(){Da.m();M.reset();y.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var z=document.createElement("canvas");z.setAttribute("width",5);z.setAttribute("height",5);var y=null;try{y=z.getContext("webgl2",m)}catch(g){return!1}if(!y)return!1;d(y);M.Pb(y);m=M.Wa(y);if(!m.R&&!m.S)return h(),!1;m=Da.Jb(y,m);h();return m?!0:!1}function d(m){m.clearColor(0,0,0,0);m.disable(m.DEPTH_TEST);m.disable(m.BLEND);m.disable(m.DITHER);m.disable(m.STENCIL_TEST);m.disable(m.CULL_FACE);m.GENERATE_MIPMAP_HINT&&m.hint(m.GENERATE_MIPMAP_HINT,m.FASTEST);m.disable(m.SAMPLE_ALPHA_TO_COVERAGE);
m.disable(m.SAMPLE_COVERAGE);m.depthFunc(m.LEQUAL);m.clearDepth(1)}var l=null,q=null,t=null,p=null,u=!0,e=null,w=null,A={A:function(){return l.width},H:function(){return l.height},ze:function(){return l},ye:function(){return a},T:function(){return u},flush:function(){a.flush()},cd:function(){e||(e=new Uint8Array(l.width*l.height*4));a.readPixels(0,0,l.width,l.height,a.RGBA,a.UNSIGNED_BYTE,e);return e},Be:function(){return l.toDataURL("image/jpeg")},Ce:function(){R.G();q||(q=document.createElement("canvas"),
t=q.getContext("2d"));q.width=l.width;q.height=l.height;for(var m=A.cd(),h=t.createImageData(q.width,q.height),z=q.width,y=q.height,g=h.data,k=0;k<y;++k)for(var B=y-k-1,L=0;L<z;++L){var J=4*(k*z+L),N=4*(B*z+L);g[J]=m[N];g[J+1]=m[N+1];g[J+2]=m[N+2];g[J+3]=m[N+3]}t.putImageData(h,0,0);return q.toDataURL("image/png")},Ae:function(m){!q&&m&&(q=document.createElement("canvas"),t=q.getContext("2d"));var h=m?q:document.createElement("canvas");h.width=l.width;h.height=l.height;(m?t:h.getContext("2d")).drawImage(l,
0,0);return h},s:function(m){m.Mb&&!m.Lb?l=document.getElementById(m.Mb):m.Lb&&(l=m.Lb);l||(l=document.createElement("canvas"));l.width=m&&void 0!==m.width?m.width:512;l.height=m&&void 0!==m.height?m.height:512;"undefined"===typeof m&&(m={});void 0===m.premultipliedAlpha&&(m.premultipliedAlpha=!1);void 0===m.hb&&(m.hb=!0);void 0===m.antialias&&(m.antialias=!1);if(a)u=a instanceof WebGL2RenderingContext;else{u=!0;var h={antialias:m.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:m.premultipliedAlpha,
stencil:!1,depth:m.hb};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(h.antialias=!1);var z=c(h);!z&&h.antialias&&(h.antialias=!1,z=c(h));z&&(a=l.getContext("webgl2",h));a?u=!0:((a=l.getContext("webgl",h))||(a=l.getContext("experimental-webgl",h)),u=!1)}if(!a)return b("WebGL1 and 2 are not enabled");(p=a.getExtension("WEBGL_lose_context"))&&m.Cd&&(w=m.Cd,l.addEventListener("webglcontextlost",w,!1));if(!M.s())return b("Not enough GL capabilities");d(a);D.s();U.s();
return Da.Jb(a,M.bd())?!0:b("Cannot filter float textures")},m:function(){a&&(M.m(),Da.m());p&&w&&(l.removeEventListener("webglcontextlost",w,!1),p=w=null);a=e=t=q=l=null}};return A}(),za=function(){function b(){null===c&&("undefined"!==typeof D?c=D:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;b();return{Xd:function(d){c!==d&&(c&&c.J(),c=d)},Ca:function(){return c.Ca()},Ka:function(){return c.Ka()},La:function(d){return c.La(d)},vb:function(){return c.vb()},J:function(){return c.J()},
set:function(d){return c.set(d)},pa:function(d){b();return c.pa(d)},tb:function(d){b();return c.tb(d)},m:function(){return c.m()}}}(),V=function(){function b(f){a.bindTexture(a.TEXTURE_2D,f)}function c(f){n[0]=f;f=v[0];var H=f>>16&32768,F=f>>12&2047,S=f>>23&255;return 103>S?H:142<S?H|31744|((255==S?0:1)&&f&8388607):113>S?(F|=2048,H|(F>>114-S)+(F>>113-S&1)):H=(H|S-112<<10|F>>1)+(F&1)}function d(f){var H=new Uint16Array(f.length);f.forEach(function(F,S){H[S]=c(F)});return H}function l(){if(null!==E.eb)return E.eb;
var f=t(d([.5,.5,.5,.5]));return null===f?!0:E.eb=f}function q(){if(null!==E.fb)return E.fb;var f=t(new Uint8Array([127,127,127,127]));return null===f?!0:E.fb=f}function t(f){if(!za.Ca()||!g)return null;var H=null,F=Math.sqrt(f.length/4);try{var S=a.getError();if("FUCKING_BIG_ERROR"===S)return!1;H=K.instance({isFloat:!1,F:!0,array:f,width:F});S=a.getError();if(S!==a.NO_ERROR)return!1}catch(ia){return!1}R.G();a.viewport(0,0,F,F);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);za.set("s0");H.Gb(0);
U.l(!0,!0);f=4*F*F;S=new Uint8Array(f);a.readPixels(0,0,F,F,a.RGBA,a.UNSIGNED_BYTE,S);F=!0;for(var Z=0;Z<f;++Z)F=F&&3>Math.abs(S[Z]-127);H.remove();R.W();return F}var p=0,u=null,e=0,w=null,A=null,m=null,h=null,z=null,y=null,g=!1,k=[],B={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,D:null,ac:null,rd:!1,F:!1,X:null,Ea:4,mb:0},L=!1,J=null,N=null,G=[[1,0,0,0],[0,1,0,
0],[0,0,1,0],[0,0,0,1]],I=!1,r=!1,n=new Float32Array(1),v=new Int32Array(n.buffer),E={eb:null,fb:null},K={s:function(){g||(z=[a.RGBA,null,a.RGBA,a.RGBA],y=[a.RGBA,null,a.RGBA,a.RGBA],u=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7],I="undefined"!==typeof JEContext,r="undefined"!==typeof M,I&&JEContext.Ve()&&u.push(a.TEXTURE8,a.TEXTURE9),w=[-1,-1,-1,-1,-1,-1,-1,-1],h=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT],g=!0)},ld:function(){if(!A){for(var f=new Float32Array(16384),
H=0;16384>H;++H)f[H]=2*Math.random()-1;A={random:K.instance({isFloat:!0,isPot:!0,array:f,width:64}),Cc:K.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}K.he()},Ne:function(){return A.Cc},he:function(){h[1]=M.Za(a)},Ud:function(){y=z=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},sc:function(f){D.set("s1");R.G();var H=f.A(),F=f.H();a.viewport(0,0,H,F);f.g(0);U.l(!1,!1)},Xe:function(f,H){K.sc(f);a.readPixels(0,0,f.A(),f.H(),a.RGBA,a.UNSIGNED_BYTE,H)},Ye:function(f,H){K.sc(f);return M.Ia(0,
0,f.A(),f.H(),H)},Wb:function(f,H,F,S,Z,ia,x){f.activeTexture(f.TEXTURE0);var da=f.createTexture();f.bindTexture(f.TEXTURE_2D,da);Z=Z instanceof Float32Array?Z:new Float32Array(Z);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,ia);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,
F,S,0,f.RGBA,f.FLOAT,Z);f.bindTexture(f.TEXTURE_2D,null);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);x&&(R.W(),D.pa(f));f.viewport(0,0,F,S);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,H,0);f.bindTexture(f.TEXTURE_2D,da);x?U.l(!0,!0):U.xa(f);f.deleteTexture(da);g&&(w[0]=-1,m=null,p=0)},Pa:function(f){f!==p&&(a.activeTexture(u[f]),p=f)},instance:function(f){function H(C){var O=a.getError();if("FUCKING_BIG_ERROR"===O)return!1;a.texImage2D(a.TEXTURE_2D,0,aa,Y,ba,C);O=a.getError();
O!==a.NO_ERROR&&Y!==a.RGBA&&(Y=a.RGBA,a.texImage2D(a.TEXTURE_2D,0,aa,Y,ba,C));return!0}function F(){if(!Ja){b(ea);ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,ka);x.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,x.isMirrorX?a.MIRRORED_REPEAT:a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,x.isMirrorY?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));x.isAnisotropicFiltering&&"undefined"!==
typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.De().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.je);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,x.isLinear?a.LINEAR:a.NEAREST);x.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,x.isMipmap&&!qa?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,x.isMipmap&&!qa?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);Y=z[x.Ea-1];aa=y[x.Ea-1];ba=h[Ga];if(M.T()){var C=M.dd();Y===a.RGBA&&ba===a.FLOAT?x.isMipmap||x.isLinear?
aa=Da.fd(a):M.Kb()?C&&(aa=C):aa=a.RGBA16F||a.RGBA:Y===a.RGB&&ba===a.FLOAT&&C&&(aa=C,Y=a.RGBA)}if(x.F&&!x.isFloat||x.isFloat&&x.isMipmap&&Da.vd())aa=M.ed(),ba=M.Za(a);x.mb&&(Aa=x.mb);x.isSrgb&&4===x.Ea&&(Y=JEContext.Le());if(x.D)H(x.D);else if(x.url)H(pa);else if(la){C=la;try{"FUCKING_BIG_ERROR"!==a.getError()&&(a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,C),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,P,Q,0,
a.RGBA,a.UNSIGNED_BYTE,null)))}catch(pb){a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,null)}x.isKeepArray||(la=null)}else C=a.getError(),"FUCKING_BIG_ERROR"!==C&&(a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,null),C=a.getError(),C!==a.NO_ERROR&&(Y=a.RGBA,x.F&&ba!==a.FLOAT&&(ba=a.FLOAT,a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,null))));if(x.isMipmap)if(!qa&&X)X.Ya(),Ba=!0;else if(qa){C=Math.log2(Math.min(P,Q));ta=Array(1+C);ta[0]=ea;for(var O=1;O<=C;++O){var ca=Math.pow(2,O),T=P/ca;ca=Q/ca;var ra=a.createTexture();
b(ra);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,aa,T,ca,0,Y,ba,null);b(null);ta[O]=ra}Ba=!0}b(null);w[p]=-1;ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);va=!0;x.X&&X&&(x.X(X),x.X=null)}}function S(){for(var C=P*Q,O=2*C,ca=3*C,T=0;T<C;++T)ja[0][T]=wa[T],ja[1][T]=wa[T+C],ja[2][T]=wa[T+O],ja[3][T]=wa[T+ca]}function Z(){var C=P*Q*4;na=[new Uint8Array(C),new Uint8Array(C),new Uint8Array(C),new Uint8Array(C)];
ja=[new Float32Array(na[0].buffer),new Float32Array(na[1].buffer),new Float32Array(na[2].buffer),new Float32Array(na[3].buffer)];Ca=new Uint8Array(4*C);wa=new Float32Array(Ca.buffer);xa=!0}function ia(){oa.Ra=new Uint8Array(P*Q*4);oa.Xb=new Float32Array(oa.buffer);oa.jb=!0}var x=Object.assign({},B,f),da=e++;null===x.isFlipY&&(x.isFlipY=x.url||x.array?!0:!1);x.data&&(x.array="string"===typeof x.data?ua(x.data):x.isFloat?new Float32Array(x.data):new Uint8Array(x.data),x.isFlipY=!1);var Ga=0,Ya=x.D?
!0:!1,ya=null,Ha=null,Ka=!1,Ia=null;x.F=x.F||x.isFloat;x.F&&(Ga=1);!x.rd&&x.isFloat&&r&&!M.Kb()&&(x.isFloat=!1);x.isFloat&&(Ga=2);x.isAnisotropicFiltering&&I&&!JEContext.Qe()&&(x.isAnisotropicFiltering=!1);var ea=x.ac||a.createTexture(),pa=null,la=!1,P=0,Q=0,va=!1,Ja=!1,xa=!1,ja=null,na=null,Ca=null,wa=null,aa=null,Y=null,ba=null,ka=x.isFlipY,Za=(f=x.F&&x.isMipmap)&&Da.Mc(),qa=f&&Za?!0:!1,ta=null,Aa=-1,Ba=!1,oa={jb:!1,Ra:null,Xb:null};x.width&&(P=x.width,Q=x.height?x.height:P);var X={get:function(){return ea},
A:function(){return P},H:function(){return Q},Oe:function(){return x.url},Re:function(){return x.isFloat},Te:function(){return x.F},Ue:function(){return x.isLinear},Ya:function(){a.generateMipmap(a.TEXTURE_2D)},Jc:function(C,O){qa?(C||(C=X.$b()),K.Pa(O),b(ta[C]),w[O]=-1):X.g(O)},$b:function(){-1===Aa&&(Aa=Math.log(P)/Math.log(2));return Aa},ad:function(C){if(qa){C||(C=X.$b());D.set("s11");K.Pa(0);for(var O=P,ca=Q,T=1;T<=C;++T)O/=2,ca/=2,D.$("u7",.25/O,.25/ca),a.viewport(0,0,O,ca),b(ta[T-1]),a.framebufferTexture2D(R.za(),
a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ta[T],0),U.l(!1,1===T);w[0]=-1}else X.Ya()},g:function(C){if(!va)return!1;K.Pa(C);if(w[C]===da)return!1;b(ea);w[C]=da;return!0},Gb:function(C){a.activeTexture(u[C]);p=C;b(ea);w[C]=da},o:function(){m=X;a.framebufferTexture2D(R.za(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ea,0)},K:function(){m=X;a.viewport(0,0,P,Q);a.framebufferTexture2D(R.za(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ea,0)},Ab:K.Ab,resize:function(C,O){P=C;Q=O;F()},clone:function(C){C=K.instance({width:P,height:Q,
F:x.F,isFloat:x.isFloat,isLinear:x.isLinear,isMirrorY:x.isMirrorY,isFlipY:C?!ka:ka,isPot:x.isPot});za.set("s0");R.W();C.o();a.viewport(0,0,P,Q);X.g(0);U.l(!0,!0);return C},$d:function(){a.viewport(0,0,P,Q)},remove:function(){a.deleteTexture(ea);Ja=!0;k.splice(k.indexOf(X),1);X=null},refresh:function(){X.Gb(0);ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);Ya?a.texImage2D(a.TEXTURE_2D,0,aa,Y,a.UNSIGNED_BYTE,x.D):a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,la);ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},
rc:function(){xa||Z();a.readPixels(0,0,P,4*Q,a.RGBA,a.UNSIGNED_BYTE,Ca);S();return ja},Id:function(){xa||Z();return M.Ia(0,0,P,4*Q,Ca).then(function(){S();return ja})},Kd:function(){oa.jb||ia();a.readPixels(0,0,P,Q,a.RGBA,a.UNSIGNED_BYTE,oa.Ra);return oa.Xb},Jd:function(){oa.jb||ia();return M.Ia(0,0,P,Q,oa.Ra)},Nb:function(C){R.G();D.set("s12");X.g(0);if(C)a.viewport(0,0,P,Q),D.ub("u8",.25,.25,.25,.25),U.l(!1,!0);else for(C=0;4>C;++C)a.viewport(0,Q*C,P,Q),D.ub("u8",G[C]),U.l(!1,0===C)},kf:function(C){var O=
ba===h[0]&&!q();b(ea);ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);O?(Ka||(ya=document.createElement("canvas"),ya.width=P,ya.height=Q,Ha=ya.getContext("2d"),Ia=Ha.createImageData(P,Q),Ka=!0),Ia.data.set(C),Ha.putImageData(Ia,0,0),a.texImage2D(a.TEXTURE_2D,0,aa,Y,ba,ya)):a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,C);w[p]=da;ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},lf:function(C,O){b(ea);O&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);a.texImage2D(a.TEXTURE_2D,0,aa,Y,ba,C);w[p]=da;O&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
!1)},$e:function(C,O){var ca=P*Q,T=4*ca;C=x.F?C?"RGBE":"JSON":"RGBA";O&&(C=O);O=M.T()&&!1;var ra=null;switch(C){case "RGBE":ra="s42";break;case "JSON":ra=O?"s0":"s12";break;case "RGBA":case "RGBAARRAY":ra="s6"}xa||("RGBA"===C||"RGBE"===C||"RGBAARRAY"===C?(na=new Uint8Array(T),xa=!0):"JSON"!==C||O||Z());R.G();D.set(ra);X.g(0);T=null;if("RGBA"===C||"RGBE"===C||"RGBAARRAY"===C){a.viewport(0,0,P,Q);U.l(!0,!0);a.readPixels(0,0,P,Q,a.RGBA,a.UNSIGNED_BYTE,na);if("RGBAARRAY"===C)return{data:na};L||(J=document.createElement("canvas"),
N=J.getContext("2d"),L=!0);J.width=P;J.height=Q;ca=N.createImageData(P,Q);ca.data.set(na);N.putImageData(ca,0,0);T=J.toDataURL("image/png")}else if("JSON"===C)if(O)T=new Float32Array(ca),a.viewport(0,0,P,Q),U.l(!0,!0),a.readPixels(0,0,P,Q,a.RGBA,a.FLOAT,T);else{for(T=0;4>T;++T)a.viewport(0,Q*T,P,Q),D.ub("u8",G[T]),U.l(!T,!T);X.rc();T=Array(ca);for(O=0;O<ca;++O)T[4*O]=ja[0][O],T[4*O+1]=ja[1][O],T[4*O+2]=ja[2][O],T[4*O+3]=ja[3][O]}return{format:C,data:T,width:P,height:Q,isMirrorY:x.isMirrorY,isFlipY:"RGBA"===
C?x.isFlipY:!x.isFlipY}}};x.isMipmap&&!qa&&va&&!Ba&&(X.Ya(),Ba=!0);if(x.url)b(ea),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),pa=new Image,pa.se="Anonymous",pa.crossOrigin="Anonymous",pa.src=x.url,pa.onload=function(){P=pa.width;Q=pa.height;F()};else if(x.D){var La=function(){P=void 0!==x.D.videoWidth?x.D.videoWidth:x.D.width;Q=void 0!==x.D.videoHeight?x.D.videoHeight:x.D.height;P?F():setTimeout(La,1)};La()}else x.array?(x.F&&!x.isFloat?x.array instanceof Uint16Array?(la=
x.array,F()):l()?(la=d(x.array),F()):(F(),K.Wb(a,ea,X.A(),X.H(),x.array,ka,!0)):(la=x.isFloat?x.array instanceof Float32Array?x.array:new Float32Array(x.array):x.array instanceof Uint8Array?x.array:new Uint8Array(x.array),F()),x.isKeepArray||(la&&la!==x.array&&(la=null),delete x.array)):x.ac?va=!0:F();X.Ke=X.A;x.X&&va&&(x.X(X),x.X=null);k.push(X);return X},G:function(f){f!==p&&(a.activeTexture(u[f]),p=f);w[f]=-1;b(null)},me:function(f){A.random.g(f)},Ab:function(){m=null;a.framebufferTexture2D(R.za(),
a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)},reset:function(){0!==p&&a.activeTexture(u[0]);for(var f=0;f<u.length;++f)w[f]=-1;p=-1},Ze:function(){p=-1},fe:function(){for(var f=0;f<u.length;++f)K.G(f)},Yb:function(){A&&(A.random.remove(),A.Cc.remove())},jf:function(f,H){if("RGBA"===f.format||"RGBE"===f.format){var F=new Image;F.src=f.data;F.onload=function(){K.instance({isMirrorY:f.isMirrorY,isFlipY:f.isFlipY,isFloat:!1,D:F,X:function(S){if("RGBA"===f.format)H(S);else{var Z=f.width,ia=f.height,x=K.instance({isMirrorY:f.isMirrorY,
isFloat:!0,width:Z,height:ia,isFlipY:f.isFlipY});R.W();a.viewport(0,0,Z,ia);D.set("s43");x.o();S.g(0);U.l(!0,!0);K.G(0);H(x);a.flush();setTimeout(S.remove,50)}}})}}else"JSON"===f.format?H(K.instance({isFloat:!0,isFlipY:f.isFlipY,width:f.width,height:f.height,array:new Float32Array(f.data)})):H(!1)},Pc:d,m:function(){m&&(R.W(),K.Ab(),R.G());K.fe();k.slice(0).forEach(function(f){f.remove()});k.splice(0);g=!1;e=0;"undefined"!==typeof Da&&Da.m();A=null}};return K}(),Fa={instance:function(b){var c=[V.instance(b),
V.instance(b)],d=[c[1],c[0]],l=d,q={Rd:function(t){l[1].o();l[0].g(t);q.zc()},Sd:function(t){l[1].K();l[0].g(t);q.zc()},zc:function(){l=l===c?d:c},refresh:function(){l[0].refresh();l[1].refresh()},g:function(t){l[0].g(t)},le:function(t){l[1].g(t)},Ge:function(){return l[0]},Ie:function(){return l[1]},remove:function(){l[0].remove();l[1].remove();l=null}};return q}},U=function(){function b(e){var w={P:null,C:null};w.P=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,w.P);e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,
-1,3,-1,-1,3]),e.STATIC_DRAW);w.C=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,w.C);e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),e.STATIC_DRAW);return w}var c=null,d=0,l=!1,q=[],t=-2,p=-2,u={reset:function(){p=t=-2},s:function(){l||(c=b(a),u.Qa(),l=!0)},instance:function(e){var w=d++,A=e.C?e.C.length:0,m="undefined"===typeof e.mode?a.STATIC_DRAW:e.mode,h=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,h);a.bufferData(a.ARRAY_BUFFER,e.P instanceof Float32Array?e.P:new Float32Array(e.P),
m);t=w;var z=null,y=null,g=null;if(e.C){z=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,z);var k=null;65536>e.C.length?(k=Uint16Array,y=a.UNSIGNED_SHORT,g=2):(k=Uint32Array,y=a.UNSIGNED_INT,g=4);k=e.C instanceof k?e.C:new k(e.C);a.bufferData(a.ELEMENT_ARRAY_BUFFER,k,m);p=w}var B={Kc:function(L){t!==w&&(a.bindBuffer(a.ARRAY_BUFFER,h),t=w);L&&za.vb()},Hc:function(){p!==w&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,z),p=w)},bind:function(L){B.Kc(L);B.Hc()},ue:function(){a.drawElements(a.TRIANGLES,A,
y,0)},ve:function(L,J){a.drawElements(a.TRIANGLES,L,y,J*g)},remove:function(){a.deleteBuffer(h);e.C&&a.deleteBuffer(z);B=null}};q.push(B);return B},Qa:function(){-1!==t&&(a.bindBuffer(a.ARRAY_BUFFER,c.P),t=-1);-1!==p&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.C),p=-1)},l:function(e,w){e&&U.Qa();w&&za.Ka();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},xa:function(e){e=e||a;var w=b(e);e.bindBuffer(e.ARRAY_BUFFER,w.P);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,w.C);za.La(e);e.clear(e.COLOR_BUFFER_BIT);e.drawElements(e.TRIANGLES,
3,e.UNSIGNED_SHORT,0);e.flush();e.bindBuffer(e.ARRAY_BUFFER,null);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);e.deleteBuffer(w.P);e.deleteBuffer(w.C);u.reset();l&&(u.Qa(),za.Ka())},Yb:function(){var e=a,w=c;e.deleteBuffer(w.P);e.deleteBuffer(w.C)},m:function(){u.Yb();q.forEach(function(e){e.remove()});a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);u.reset();l=!1;q.splice(0);d=0}};return u}(),R=function(){var b=null,c=null,d=null,l=!1,q=[],t={B:-2,Vb:1},p={Ca:function(){return l},
s:function(){if(!l){b=a.createFramebuffer();var u=M.T();c=u&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;d=u&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;l=!0}},Ee:function(){return c},gd:function(){return d},za:function(){return a.FRAMEBUFFER},Je:function(){return t},xe:function(){return b},instance:function(u){void 0===u.ec&&(u.ec=!1);var e=u.ha?u.ha:null,w=u.width,A=void 0!==u.height?u.height:u.width,m=b,h=null,z=!1,y=!1,g=0;e&&(w=w?w:e.A(),A=A?A:e.H());var k={yc:function(){z||
(m=a.createFramebuffer(),z=!0,g=t.Vb++)},Fc:function(){k.yc();k.o();h=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,h);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,w,A);a.framebufferRenderbuffer(c,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,h);a.clearDepth(1)},bind:function(B,L){g!==t.B&&(a.bindFramebuffer(c,m),t.B=g);e&&e.o();L&&a.viewport(0,0,w,A);B&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},ke:function(){g!==t.B&&(a.bindFramebuffer(c,m),t.B=g)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|
a.DEPTH_BUFFER_BIT)},qe:function(){a.clear(a.COLOR_BUFFER_BIT)},re:function(){a.clear(a.DEPTH_BUFFER_BIT)},$d:function(){a.viewport(0,0,w,A)},o:function(){g!==t.B&&(a.bindFramebuffer(c,m),t.B=g)},rtt:function(B){e=B;t.B!==g&&(a.bindFramebuffer(a.FRAMEBUFFER,m),t.B=g);B.o()},G:function(){a.bindFramebuffer(c,null);t.B=-1},resize:function(B,L){w=B;A=L;h&&(a.bindRenderbuffer(a.RENDERBUFFER,h),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,w,A))},remove:function(){m===b||y||(a.bindFramebuffer(c,
m),a.framebufferTexture2D(c,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0),h&&a.framebufferRenderbuffer(c,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null),a.bindFramebuffer(c,null),a.deleteFramebuffer(m),h&&a.deleteRenderbuffer(h));y=!0}};u.ec&&k.Fc();q.push(k);return k},G:function(){a.bindFramebuffer(c,null);t.B=-1},ge:function(){a.bindFramebuffer(c,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,M.A(),M.H());t.B=-1},reset:function(){t.B=-2},W:function(){0!==t.B&&(a.bindFramebuffer(c,b),t.B=
0)},clear:function(){a.viewport(0,0,M.A(),M.H());a.clear(a.COLOR_BUFFER_BIT)},m:function(){p.G();q.forEach(function(u){u.remove()});null!==b&&(a.deleteFramebuffer(b),b=null);p.reset();l=!1;q.splice(0);t.Vb=1}};return p}(),M=function(){function b(){l="undefined"===typeof Ea?JEContext:Ea;q=!0}function c(g,k){for(var B=0;B<g.length;++B){var L=k.getExtension(g[B]);if(L)return L}return null}function d(){null!==h.Oa&&(clearInterval(h.Oa),h.Oa=null);h.na=!1}var l=null,q=!1,t={fc:!1,wb:null,xb:null,jc:!1,
ud:!1,yb:null,kc:!1,zb:null,hc:!1,Sa:null,od:!1,Ta:null,pd:!1},p=null,u={R:!0,S:!0,Xa:!0,qc:!1},e=null,w=!0,A=null,m=null,h={na:!1,ca:null,Aa:null,bb:-1,da:null,Oa:null},z="undefined"===typeof window?{}:window,y={s:function(){if(q)return!0;y.reset();q||b();var g=a;if(!p.fc){p.wb=y.Sb(g);z.GL_EXT_FLOAT=p.wb;p.jc=p.wb?!0:!1;if(p.jc||y.T())p.xb=y.Tb(g),p.ud=p.xb?!0:!1,z.GL_EXT_FLOATLINEAR=p.xb;p.fc=!0}if(!p.hc){p.yb=y.wa(g);p.yb&&(p.kc=!0,z.GL_EXT_HALFFLOAT=p.yb);if(p.kc||y.T())p.zb=y.Ub(g),z.GL_EXT_HALFFLOATLINEAR=
p.zb;p.Pe=p.zb?!0:!1;p.hc=!0}p.Sa=y.Qb(g);p.od=p.Sa?!0:!1;z.GL_EXT_COLORBUFFERFLOAT=p.Sa;p.Ta=y.Rb(g);p.pd=p.Ta?!0:!1;z.GL_EXT_COLORBUFFERHALFFLOAT=p.Ta;R.s();V.s();if(!y.Vc())return!1;U.s();V.ld();return!0},reset:function(){p=Object.assign({},t);e=Object.assign({},u)},A:function(){q||b();return l.A()},H:function(){q||b();return l.H()},T:function(){q||b();return l.T()},Pb:function(g){y.Qb(g);y.Rb(g);y.Sb(g);y.Tb(g);y.wa(g);y.Ub(g)},Qb:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float",
"OES_color_buffer_float"]),Rb:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Sb:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Tb:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),wa:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Ub:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear",
"WEBKIT_OES_texture_half_float_linear"]),Za:function(g){var k=y.wa(g);return k&&k.HALF_FLOAT_OES?k.HALF_FLOAT_OES:g.HALF_FLOAT||g.FLOAT},dd:function(){return m||a.RGBA32F||a.RGBA},ed:function(){return A||a.RGBA16F||a.RGBA},bd:function(){return e},Kb:function(){return e.R},pe:function(){return e.S},oe:function(){return e.Xa},Nc:function(){return e.qc&&w},Bc:function(g){w=g;!g&&h.na&&(a.deleteSync(h.Aa),a.bindBuffer(h.da,null),h.na=!1)},Ma:function(g,k,B){function L(){g.bindTexture(g.TEXTURE_2D,null);
g.bindFramebuffer(J,null);g.deleteTexture(I);g.deleteFramebuffer(G)}var J=g.FRAMEBUFFER,N=g.NEAREST,G=g.createFramebuffer();g.bindFramebuffer(J,G);var I=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,I);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,N);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,N);
g.texImage2D(g.TEXTURE_2D,0,k,3,3,0,g.RGBA,B,null);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,I,0);if(g.checkFramebufferStatus(g.READ_FRAMEBUFFER||g.FRAMEBUFFER)!==g.FRAMEBUFFER_COMPLETE)return L(),!1;za.tb(g);g.clearColor(0,0,0,0);g.viewport(0,0,3,3);g.disable(g.DEPTH_TEST);g.clear(g.COLOR_BUFFER_BIT);U.xa(g);g.bindFramebuffer(J,null);za.pa(g);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,I);U.xa(g);k=new Uint8Array(36);g.readPixels(0,0,3,3,g.RGBA,g.UNSIGNED_BYTE,
k);L();for(B=0;36>B;++B)if(3!==B%4&&3<Math.abs(k[B]-127))return!1;return!0},Wa:function(g){var k={R:!1,S:!1};g.disable(g.BLEND);g.clearColor(0,0,0,0);g.clear(g.COLOR_BUFFER_BIT);g.RGBA32F&&y.Ma(g,g.RGBA32F,g.FLOAT)&&(k.R=!0,m=g.RGBA32F);!k.R&&y.Ma(g,g.RGBA,g.FLOAT)&&(k.R=!0,m=g.RGBA);var B=y.Za(g);A=null;g.RGBA16F&&y.Ma(g,g.RGBA16F,B)&&(k.S=!0,A=g.RGBA16F);!k.S&&y.Ma(g,g.RGBA,B)&&(k.S=!0,A=g.RGBA);return k},Wc:function(){var g=R.instance({width:2});g.yc();var k=V.instance({width:2,isFloat:!0,Ea:3});
g.o();k.o();a.flush();a.checkFramebufferStatus(R.gd())!==a.FRAMEBUFFER_COMPLETE?(V.Ud(),e.Xa=!1):e.Xa=!0;g.remove();k.remove()},Xc:function(){var g=!1;y.T()&&(g="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(k){return"undefined"!==typeof a[k]}));e.qc=g},Vc:function(){var g=y.Wa(a);Object.assign(e,g);if(!e.R&&!e.S)return!1;y.Wc();y.Xc();return!0},Ia:function(g,k,B,L,J){if(!y.Nc())return a.readPixels(g,k,B,L,a.RGBA,
a.UNSIGNED_BYTE,J),Promise.resolve(J);null===h.ca&&(h.da=a.PIXEL_PACK_BUFFER,h.ca=a.createBuffer(),h.bb=-1);a.bindBuffer(h.da,h.ca);J.byteLength!==h.bb&&(a.bufferData(h.da,J.byteLength,a.STREAM_READ),h.bb=J.byteLength);a.readPixels(g,k,B,L,a.RGBA,a.UNSIGNED_BYTE,0);h.Aa=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);a.flush();return new Promise(function(N,G){function I(){if(!h.na)return d(),G(),!1;switch(a.clientWaitSync(h.Aa,0,0)){case a.TIMEOUT_EXPIRED:return!1;case a.WAIT_FAILED:return d(),G(),!1;
default:return d(),a.deleteSync(h.Aa),a.getBufferSubData(h.da,0,J),a.bindBuffer(h.da,null),N(J),!0}}d();h.na=!0;I()||(h.Oa=setInterval(I,0))})},m:function(){d();V.m();za.m();R.m();U.m();null!==h.ca&&(a.deleteBuffer(h.ca),h.ca=null);q=!1}};return y}(),Da=function(){function b(G,I,r,n){k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,n?k.NEAREST_MIPMAP_NEAREST:k.LINEAR);var v=null;if(null!==r)try{v=k.getError();if("FUCKING_BIG_ERROR"===v)return!1;k.texImage2D(k.TEXTURE_2D,0,G,4,4,0,k.RGBA,I,r);v=k.getError();
if(v!==k.NO_ERROR)return!1}catch(E){return!1}n&&k.generateMipmap(k.TEXTURE_2D);k.clear(k.COLOR_BUFFER_BIT);U.xa(k);v=k.getError();if("FUCKING_BIG_ERROR"===v)return!1;k.readPixels(0,0,2,2,k.RGBA,k.UNSIGNED_BYTE,A);v=k.getError();v===k.INVALID_OPERATION&&"undefined"!==typeof k.PIXEL_PACK_BUFFER&&(k.bindBuffer(k.PIXEL_PACK_BUFFER,null),k.readPixels(0,0,2,2,k.RGBA,k.UNSIGNED_BYTE,A),v=k.getError());if(v!==k.NO_ERROR)return!1;r=!0;for(n=0;16>n;++n)r=r&&4>Math.abs(A[n]-127);r&&(e.oc=I,e.dc=G);return r}
function c(G,I){return B.R&&b(G,k.FLOAT,new Float32Array(m),I)?(u=p.Db,!0):!1}function d(G,I,r){if(!B.S)return!1;var n=V.Pc(m),v=M.wa(k);if(v&&v.HALF_FLOAT_OES&&b(G,v.HALF_FLOAT_OES,n,I)||k.HALF_FLOAT&&b(G,k.HALF_FLOAT,n,I))return u=p.ia,!0;n=new Float32Array(m);if(b(G,k.FLOAT,n,I))return u=p.ia,!0;k.bindTexture(k.TEXTURE_2D,r);k.texImage2D(k.TEXTURE_2D,0,k.RGBA,2,2,0,k.RGBA,k.UNSIGNED_BYTE,null);k.bindFramebuffer(e.va,N);V.Wb(k,r,2,2,n,!1,!1);k.bindFramebuffer(e.va,null);k.bindTexture(k.TEXTURE_2D,
r);return b(G,null,null,I)?(u=p.ia,!0):!1}function l(G,I,r){w=!0;if(d(G,!0,r)||c(I,!0))return!0;w=!1;return d(G,!1,r)||c(I,!1)?!0:!1}function q(G){if(u===p.J){k=G||a;u=p.RGBA8;w=!0;M.Pb(k);B||(B=M.Wa(k));R.reset();N=k.createFramebuffer();e.va=k.DRAW_FRAMEBUFFER||k.FRAMEBUFFER;k.bindFramebuffer(e.va,null);k.clearColor(0,0,0,0);k.viewport(0,0,2,2);D.J();L=D.pa(k);G=k.createTexture();k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,G);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.REPEAT);k.texParameteri(k.TEXTURE_2D,
k.TEXTURE_WRAP_T,k.REPEAT);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST);J=G;var I=G=k.RGBA,r=k.RGBA16F,n=k.RGBA32F;n&&(G=n);r&&(I=r);if((r||n)&&l(I,G,J))return t(),!0;G=I=k.RGBA;if(l(I,G,J))return t(),!0;u=p.RGBA8;t();return!1}}function t(){k.deleteProgram(L.Z);k.deleteTexture(J);J=L=null}for(var p={J:-1,Db:3,ia:2,RGBA8:0},u=p.J,e={oc:null,dc:null,va:null},w=!0,A=new Uint8Array(16),m=Array(64),h=0;4>h;++h)for(var z=0;4>z;++z){var y=0===(z+h)%2?1:0,g=4*h+z;m[4*g]=y;m[4*g+1]=y;m[4*g+
2]=y;m[4*g+3]=y}var k=null,B=null,L=null,J=null,N=null;return{Mc:function(G){q(G);return w},Jb:function(G,I){u===p.J&&(typeof("undefined"!==I)&&(B=I),q(G));return u!==p.RGBA8},Se:function(G){q(G);return u===p.Db},vd:function(G){q(G);return u===p.ia},Fe:function(G){q(G);return e.oc},fd:function(G){q(G);return e.dc},m:function(){k=null;w=!0;u=p.J;B=null}}}(),Ma={instance:function(b){var c=V.instance(b.alpha),d=V.instance(b.beta);return{Yc:function(){c.g(1);d.g(2)}}}},Pa={instance:function(b){var c=
null,d=!1,l=!1,q=null,t=!1,p=!1,u=null,e="undefined"===typeof b.preprocessing?!1:b.preprocessing,w="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(d=!0,W&&void 0!==W.Gc&&(b.mask=W.Gc+b.mask),c=V.instance({isFloat:!1,url:b.mask}));var A=!1;b.customInputShader&&(A="s44",D.Eb({name:"_",id:A,h:b.customInputShader,hf:["uSource"],precision:"lowp"}),D.N(A,[{type:"1i",name:"_",value:0}]));switch(e){case "sobel":u="s31";t=!0;break;case "meanNormalization":u="s32";t=!0;break;case "grayScale":u=
"s28";t=!1;break;case "grayScaleTilt":u="s29";p=!0;t=!1;break;case "rgbGrayTilt":u="s30";p=!0;t=!1;break;case "copy":u=A?A:"s0";break;case "inputLightRegulation":u=A?A:"s28";q=Na.instance({cc:w,nc:b.size,lc:b.nBlurPass,Ba:!1});l=!0;break;case "inputMix0":u="none";q=Oa.instance({aa:w,Dc:b.varianceMin,Hb:b.blurKernelSizePx,Ba:!1});l=!0;break;case "direct":case "none":u="abort";break;default:u="s3"}p&&D.N(u,[{name:"u26",type:"1f",value:b.tilt}]);d&&(u+="Mask");var m=V.instance({isFloat:!1,isPot:!1,width:b.size}),
h={A:function(){return w},$a:function(){return h.A()},jd:function(){return l?q.ab():m},I:function(z){R.W();"abort"!==u&&("none"!==u&&(D.set(u),t&&D.M("u27",1/b.size),m.K(),d&&c.g(1),U.l(!1,!1),m.g(0),z=m),l&&q.process(z))},m:function(){m.remove();d&&c.remove()}};return h}},Va={instance:function(b){function c(f){q.forEach(function(H,F){t[F][0]=f[0][H];t[F][1]=f[1][H];t[F][2]=f[2][H];t[F][3]=f[3][H]});return t}"undefined"===typeof b.normalize&&(b.normalize=!1);var d={input:null,ua:null,gb:null,L:null,
Fa:null,qb:null,rb:null},l=null,q=[],t=[],p=!1,u=null,e=!0,w=-1,A=b.isReorganize?b.isReorganize:!1,m=b.kernelsCount?!0:!1,h=b.dynPelu?Ma.instance(b.dynPelu):!1,z=h?!0:!1,y={isEnabled:!1};b.td?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.Ha.$a(),e=!1):"full"===b.connectivityUp&&(b.sparsity=b.Ha.$a());var g={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[b.activation],k=b.sparsity*b.sparsity,B=!1,L=b.size,J="";if(b.maxPooling){switch(b.maxPooling.size){case 2:J=
"s33";break;case 4:J="s34"}B=!0;L/=b.maxPooling.size;d.qb=V.instance({isFloat:!0,isPot:!1,width:L})}var N=void 0!==b.Ad&&b.Ad?!0:!1,G=null,I=null,r=null;if(N){G="s45"+b.index.toString();D.bc("s45",G,[((b.normalization.n-1)/2).toFixed(1)]);D.N(G,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u30",value:b.normalization.k}]);var n={isFloat:!0,isPot:!0,width:b.size};
I=V.instance(n);r=V.instance(n)}var v=-1,E=null;e&&(d.L=V.instance({isFloat:!0,isPot:!1,width:b.size}));d.ua=V.instance(b.bias);var K={A:function(){return b.size},$a:function(){return L},Zb:function(){return b.classesCount},Ic:function(f){l.g(f)},Ed:function(){b.remap&&b.remap.isEnabled&&(y={isEnabled:!0,yd:V.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),Da:b.remap.layers.map(function(f){return b.parent.hd(f)}),depth:b.remap.depth})},
Vd:function(){switch(b.connectivityUp){case "direct":E=Qa.instance(b.connectivity);break;case "square":E=Ra.instance(b.connectivity);break;case "squareFast":E=Sa.instance(b.connectivity,b.activation);break;case "full":E=Ta.instance(b.connectivity);break;case "conv":w=b.kernelsCount,E=Ua.instance(b.connectivity),A&&(d.Fa=V.instance({width:L,isFloat:!0,isFlipY:!1,isPot:!1}))}if(E.ga){var f=b.size*b.sparsity;v=Math.log(f/b.size)/Math.log(2);d.input=V.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:f,
mb:v});d.gb=V.instance({isFloat:!0,isPot:!0,width:b.size})}},I:function(f,H){l=f;E.ga?(d.input.K(),m&&d.ua.g(2),E.I(y),d.input.g(0),d.input.ad(v),d.gb.K(),m?D.set("s0"):(D.set("s27"),D.M("u25",k),d.ua.g(1)),d.input.Jc(v,0),U.l(!1,!1),D.set(g),N?I.o():d.L.o(),d.gb.g(0),z&&h.Yc(),U.l(!1,!1)):(d.L.K(),d.ua.g(1),E.I());N&&(D.set(G),r.o(),I.g(0),U.l(!1,!1),D.set("s46"),D.M("u6",1),d.L.o(),r.g(1),U.l(!1,!1));if(e)return B?(d.qb.K(),d.L.g(0),D.set(J),D.$("u7",1/b.size,1/b.size),U.l(!1,!1),H=d.qb):H=d.L,
H.g(0),A&&(d.Fa.o(),D.set("s21"),D.$("u12",w,L/w),U.l(!1,!1),H=d.Fa,d.Fa.g(0)),H;var F=d.L;b.normalize&&(D.set("gpuRawAvg"===p?"s8":"s7"),D.M("u4",1/b.size),d.rb.K(),d.L.g(0),U.l(!1,!1),F=d.rb);f=null;switch(p){case "cpuRGBA2Float":F.Nb(!1);H?f=K.Gd(F).then(u):(F=K.Hd(F),u(F));break;case "cpuMeanFloat":F.Nb(!0);H?f=F.Jd().then(u):(F=F.Kd(),u(F));break;case "gpuRawAvg":case "gpuRaw":F.g(0);case "none":null!==u&&u(F)}H&&null===f&&(f=Promise.resolve());return f},Qc:function(f){f&&(p=f.sb||"none",u=f.pb||
null);d.L=V.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});f="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var H=0,F=0,S=0;H<f;++H)q.push(F+(b.size-1-S)*b.size),t.push([-1,-1,-1,-1]),++F,F===b.size&&(F=0,++S);b.normalize&&(d.rb=V.instance({isFloat:!0,isPot:!0,width:b.size}))},Gd:function(f){return f.Id().then(c)},Hd:function(f){f=f.rc();c(f);return t},m:function(){for(var f in d){var H=d[f];H&&H.remove()}E&&(E.m(),E=null)}};b.Ha&&K.Vd(b.Ha);return K}};
function Wa(b){var c=null,d=null,l=0;this.s=function(q){this.Td(q.Da);d.Qc({sb:q.sb,pb:q.pb})};this.hd=function(q){return c[q]};this.Td=function(q){var t=null;l=q.length;c=q.map(function(p,u){p=Object.assign({},p,{index:u,parent:this,Ha:t,td:u===l-1});return t=u=0===u?Pa.instance(p):Va.instance(p)});d=c[l-1];c.forEach(function(p,u){0!==u&&p.Ed()})};this.I=function(q){var t=q;c.forEach(function(p){t=p.I(t,!1)});return t};this.ab=function(){return d.jd()};this.Zb=function(){return d.Zb()};this.m=function(){c&&
(c.forEach(function(q){q.m()}),d=c=null,l=0)};"undefined"!==typeof b&&this.s(b)}
var Qa={instance:function(b){var c=V.instance(b.weights);return{ga:!0,ya:function(){return 1},m:function(){c.remove()},kd:function(){return c},I:function(){D.set("s26");c.g(1);U.l(!1,!1)}}}},Ta={instance:function(b){var c=b.fromLayerSize,d=V.instance(b.weights);return{ga:!0,ya:function(){return c},m:function(){d.remove()},I:function(l){if(l.isEnabled){D.set("s24");l.yd.g(3);var q,t=Math.min(l.Da.length,l.depth);for(q=0;q<t;++q)l.Da[q].Ic(4+q)}else D.set("s23");D.M("u16",b.toLayerSize);d.g(1);U.l(!1,
!1)}}}},Ra={instance:function(b){for(var c=b.fromLayerSize,d=b.toLayerSize,l=b.toSparsity,q=l*d,t=q/c,p=c/d,u=0,e=0,w=0,A=Array(l*d*l*d*4),m=Array(l*d*l*d*4),h=Array(c*c),z=0;z<h.length;++z)h[z]=0;z=Math.floor(l/2);for(var y=.5/d,g=.5/c,k=.5/q,B=0;B<d;++B)for(var L=Math.round(B*p),J=0;J<d;++J){var N=Math.round(J*p),G=B/d,I=J/d;G+=y;I+=y;for(var r=0;r<l;++r){var n=L+r-z;0>n&&(n+=c);n>=c&&(n-=c);for(var v=0;v<l;++v){var E=u/q,K=e/q,f=N+v-z;0>f&&(f+=c);f>=c&&(f-=c);var H=n/c,F=f/c;K=1-K-1/q;H+=g;F+=
g;E+=k;K+=k;var S=B*l+r,Z=J*l+v;Z=d*l-Z-1;S=Z*d*l+S;A[4*S]=E;A[4*S+1]=K;A[4*S+2]=H;A[4*S+3]=F;F=h[f*c+n]++;S=F%t;H=n*t+S;f=f*t+(F-S)/t;f=c*t-1-f;f=f*c*t+H;m[4*f]=E;m[4*f+1]=K;m[4*f+2]=G;m[4*f+3]=I;++u>=q&&(u=0,++e);++w}}}h=null;var ia=V.instance(b.weights);delete b.weights.data;var x=V.instance({width:q,isFloat:!0,array:new Float32Array(m),isPot:!0});m=null;var da=V.instance({width:q,isFloat:!0,array:new Float32Array(A),isPot:!0});A=null;return{ga:!0,ya:function(){return t},m:function(){x.remove();
da.remove();ia.remove()},I:function(){D.set("s22");ia.g(1);da.g(2);U.l(!1,!1)}}}},Ua={instance:function(b){var c=b.kernelsCount,d=b.toSparsity,l=d*b.toLayerSize/b.fromLayerSize,q=V.instance(b.weights);return{ga:!0,ya:function(){return l},Me:function(){return d},kd:function(){return q},m:function(){q.remove()},I:function(){D.set("s25");D.M("u22",c);D.M("u23",d);D.M("u16",b.toLayerSize);D.M("u24",b.fromLayerSize);q.g(1);U.l(!1,!1)}}}},Sa={instance:function(b,c){var d=b.fromLayerSize,l=b.toLayerSize,
q=b.toSparsity,t=b.stride?b.stride:1,p=q*l/d,u=l<d,e=d/l,w=V.instance(b.weights),A="s47"+[d.toString(),l.toString(),q.toString(),t.toString(),c].join("_");D.$c(A)||(b=ma(c),l=[{type:"1f",name:"u16",value:l},{type:"1f",name:"u29",value:t}],u&&l.push({type:"1f",name:"u24",value:d}),d=[(u?p:q).toFixed(1),b],u&&d.push(e.toFixed(1)),D.bc(u?"s39":"s38",A,d),D.N(A,l.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{ga:!1,ya:function(){return p},
m:function(){w.remove()},I:function(){D.set(A);w.g(3);U.l(!1,!1)}}}},Na={instance:function(b){var c=b.lc?b.lc:3,d=b.cc?b.cc:64,l=b.nc?b.nc:64,q=b.Ba?!0:!1;b={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var t=V.instance(b),p=V.instance(b),u=V.instance(b),e=V.instance(b),w=V.instance({isFloat:!0,width:l,isPot:!1,isFlipY:!1}),A=1/d;return{process:function(m){D.set("s35");e.o();U.l(q,!1);D.set("s36");for(var h=0;h<c;++h)t.o(),D.$("u7",A,0),U.l(q,!1),u.o(),e.g(0),U.l(q,!1),p.o(),t.g(0),D.$("u7",0,A),U.l(q,
!1),e.o(),u.g(0),U.l(q,!1),h!==c-1&&p.g(0);D.set("s37");w.o();m.g(0);p.g(1);e.g(2);U.l(q,!1);w.g(0)},ab:function(){return w}}}},Oa={instance:function(b){function c(w){return V.instance({isFloat:w,width:d.aa,isPot:!1,isFlipY:!1})}var d=Object.assign({Dc:.1,Hb:9,aa:128,Ba:!1},b),l=c(!1),q=[c(!1),c(!1),c(!1)],t=[c(!1),c(!1),c(!1)],p=c(!0),u=[l,t[0],t[1]];b="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.Hb-1)/2).toFixed(2)).replace("2.2222",(1/d.aa).toFixed(6));var e={u1:0};D.Fb([{id:"s49",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:e,i:["u1"],precision:"lowp"},{id:"s50",name:"_",h:b,j:e,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",h:"uniform sampler2D u32,u33,u34,u35;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);varying vec2 vv0;void main(){vec3 a=texture2D(u32,vv0).rgb;float c=texture2D(u33,vv0).r,d=texture2D(u34,vv0).r,h=texture2D(u35,vv0).r,i=a.r*a.r;vec3 b=vec3(c,d,h),j=max(g*f,abs(i-b*b)),k=sqrt(j);gl_FragColor=vec4(a.r,(a-b)/k);}".replace("1.1111",
d.Dc.toFixed(4)),j:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){D.set("s49");l.K();U.l(d.Ba,!1);D.set("s50");for(var w=0;3>w;++w)D.$("u31",1,0),q[w].o(),u[w].g(0),U.l(!1,!1),D.$("u31",0,1),t[w].o(),q[w].g(0),U.l(!1,!1);D.set("s51");p.o();l.g(0);t[0].g(1);t[1].g(2);t[2].g(3);U.l(!1,!1);p.g(0)},ab:function(){return p}}}};function Xa(b,c){b[c]=!0;b.setAttribute(c,"true")}
function $a(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function ab(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return b&&b.length&&2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}function bb(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function cb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function db(b){if(!b)return b;var c=null;if(b.video){var d=function(l){return l&&"object"===typeof l?Object.assign({},l):l};c={};"undefined"!==typeof b.video.width&&(c.width=d(b.video.width));"undefined"!==typeof b.video.height&&(c.height=d(b.video.height));"undefined"!==typeof b.video.facingMode&&(c.facingMode=d(b.video.facingMode))}c={audio:b.audio,video:c};"undefined"!==typeof b.deviceId&&(c.deviceId=b.deviceId);return c}
function eb(b){var c=b.video.width;b.video.width=b.video.height;b.video.height=c;return b}
function fb(b){function c(h){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(z,y){return Math.abs(z-h)-Math.abs(y-h)})}function d(h){var z=db(b);h=h(z);q.push(h);l(h)}function l(h){if(h.video&&h.video.facingMode&&h.video.facingMode.exact){var z=h.video.facingMode.exact;h=db(h);delete h.video.facingMode.exact;h.video.facingMode.ideal=z;q.push(h)}}var q=[];if(!b||!b.video)return q;l(b);if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var t=
c(b.video.width.ideal).slice(0,3),p=c(b.video.height.ideal).slice(0,3),u={},e=0;for(u.V=void 0;e<t.length;u={V:u.V},++e){u.V=t[e];var w={},A=0;for(w.U=void 0;A<p.length;w={U:w.U},++A)if(w.U=p[A],u.V!==b.video.width.ideal||w.U!==b.video.height.ideal){var m=Math.max(u.V,w.U)/Math.min(u.V,w.U);m<4/3-.1||m>16/9+.1||d(function(h,z){return function(y){y.video.width.ideal=h.V;y.video.height.ideal=z.U;return y}}(u,w))}}}d(function(h){return eb(h)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&
d(function(h){delete h.video.width.ideal;delete h.video.height.ideal;return h}),d(function(h){delete h.video.width;delete h.video.height;return h}));b.video.facingMode&&(d(function(h){delete h.video.facingMode;return h}),b.video.width&&b.video.height&&d(function(h){eb(h);delete h.video.facingMode;return h}));q.push({audio:b.audio,video:!0});return q}
function gb(b){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(l){c=window.innerHeight>window.innerWidth}if(c&&b&&b.video){c=b.video.width;var d=b.video.height;c&&d&&c.ideal&&d.ideal&&c.ideal>d.ideal&&(b.video.height=c,b.video.width=d)}}
function hb(b){b.volume=0;Xa(b,"muted");if(bb()){if(1===b.volume){var c=function(){b.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){b.volume=0;Xa(b,"muted")},5)}}
function ib(b,c,d){return new Promise(function(l,q){if(b.srcObject&&b.srcObject.getVideoTracks){var t=b.srcObject.getVideoTracks();1!==t.length?q("INVALID_TRACKNUMBER"):(t=t[0],c?jb(b,l,q,d):(t.stop(),l()))}else q("BAD_IMPLEMENTATION")})}
function kb(b,c,d,l){function q(p){t||(t=!0,d(p))}var t=!1;navigator.mediaDevices.getUserMedia(l).then(function(p){function u(){setTimeout(function(){if(b.currentTime){var e=b.videoWidth,w=b.videoHeight;if(0===e||0===w)q("VIDEO_NULLSIZE");else{e&&(b.style.width=e.toString()+"px");w&&(b.style.height=w.toString()+"px");e={Oc:null,ae:null,zd:null};try{var A=p.getVideoTracks()[0];A&&(e.zd=A,e.Oc=A.getCapabilities(),e.ae=A.getSettings())}catch(m){}bb()||$a()?b.parentNode&&null!==b.parentNode?(t||c(b,p,
e),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),hb(b),t||c(b,p,e),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";hb(b);setTimeout(function(){b.play()},100)},80)):t||c(b,p,e)}}else q("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=p:(b.src=window.URL.createObjectURL(p),b.videoStream=p);hb(b);b.addEventListener("loadeddata",function(){var e=b.play();hb(b);"undefined"===typeof e?
u():e.then(function(){u()}).catch(function(){q("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(p){q(p)})}
function jb(b,c,d,l){if(b)if(cb()){if(l&&l.video){if($a()){var q=ab();0!==q[0]&&(12>q[0]||12===q[0]&&2>q[1])&&gb(l)}l.video.width&&l.video.width.ideal&&(b.style.width=l.video.width.ideal+"px");l.video.height&&l.video.height.ideal&&(b.style.height=l.video.height.ideal+"px")}Xa(b,"autoplay");Xa(b,"playsinline");l&&l.audio?b.volume=0:Xa(b,"muted");kb(b,c,function(){function t(u){if(0===u.length)d("INVALID_FALLBACKCONSTRAINTS");else{var e=u.shift();kb(b,c,function(){t(u)},e)}}var p=fb(l);t(p)},l)}else d&&
d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}
var lb=function(){function b(){d(A+e.ob)}function c(){z.sa=0===e.ja?window.requestAnimationFrame(d):window.requestAnimationFrame(l)}function d(B){h.ea&&null!==w&&(B-=A,B=Math.min(Math.max(B,e.Ob[0]),e.Ob[1]),A+=B,t(),w(A))}function l(B){h.ea&&(z.timeout=window.setTimeout(d.bind(null,B),e.ja))}function q(){w=null;h.ea=!1;t()}function t(){z.sa&&(window.cancelAnimationFrame(z.sa),z.sa=null);z.timeout&&(window.clearTimeout(z.timeout),z.timeout=null)}function p(B){B?(h.oa=!0,m.port.postMessage("STOP"),
M.Bc(!0),c()):(h.oa=!1,M.Bc(!1),m.port.postMessage("START"))}var u={ic:!0,Ob:[1,200],ob:50,ja:0},e=null,w=null,A=0,m=null,h={Y:!1,oa:!0,lb:!1,kb:!1,ib:!1,ea:!1},z={sa:null,timeout:null},y=p.bind(null,!0),g=p.bind(null,!1),k={s:function(B){e=Object.assign(u,B);Object.assign(h,{oa:!0,Y:!0,ea:!1});if(e.ic){B=!1;try{if("undefined"===typeof SharedWorker){var L=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        switch (e.data) {\n          case 'START':\n            if (handler === null){\n              handler = setInterval(function(){\n                self.postMessage('tick');\n              }, "+
e.ob.toString()+");\n            }\n            break;\n          case 'STOP':\n            if (handler !== null){\n              clearInterval(handler);\n              handler = null;\n            }\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),J=new Worker(L);J.addEventListener("message",b);m={pc:J,port:J};h.lb=!0}else{var N=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          switch (e.data) {\n            case 'START':\n              if (handler === null){\n                handler = setInterval(function(){\n                  port.postMessage('tick');\n                }, "+
e.ob.toString()+");\n              }\n              break;\n            case 'STOP':\n              if (handler !== null){\n                clearInterval(handler);\n                handler = null;\n              }\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),G=new SharedWorker(N);G.port.start();G.port.addEventListener("message",b);m={pc:G,port:G.port};h.kb=!0}B=!0}catch(I){}B&&(window.addEventListener("blur",
g),window.addEventListener("focus",y),h.ib=!0)}},m:function(){q();h.ib&&(window.removeEventListener("blur",g),window.removeEventListener("focus",y),h.ib=!1);h.kb?(m.port.close(),h.kb=!1):h.lb&&(m.pc.terminate(),h.lb=!1);Object.assign(h,{oa:!0,Y:!1,ea:!1});w=null},update:function(B){Object.assign(e,B)},Ld:function(B){h.Y||k.s({});t();h.ea=!0;w=B;h.oa&&c()},stop:q};return k}(),mb=function(){var b={mc:4,Ga:[1.5,1.5,2],O:[.1,.1,.1],tc:1,aa:-1,cb:-1,ce:2,Dd:1,uc:!0,Zc:.8},c=null,d=[],l=0,q=[.5,.5,1];return{s:function(t){c=
Object.assign({},b,t);d.splice(0);t=c.Ga[0]*c.O[0];var p=c.Ga[1]*c.O[1],u=1/(1+c.Ga[2]*c.O[2]),e=c.tc*Math.min(c.aa,c.cb),w=e/c.aa;e/=c.cb;var A=.5*c.Zc;A*=A;for(var m=0;m<c.mc;++m){var h=Math.pow(u,m),z=w*h,y=e*h;h=z*t;var g=y*p,k=z/2;y/=2;for(var B=1+(1-k-k)/h,L=1+(1-y-y)/g,J=0;J<L;++J)for(var N=y+J*g,G=N-.5,I=0;I<B;++I){var r=k+I*h,n=r-.5;n*n+G*G>A||d.push([r,N,z*c.Dd])}}c.uc&&d.sort(function(v,E){var K=v[0]-.5;v=v[1]-.5;var f=E[0]-.5;E=E[1]-.5;return K*K+v*v-(f*f+E*E)})},get:function(){var t=
d.length;if(0===t)return q;l>=t&&(l=0);var p=d[Math.floor(l)];l=(l+1/c.ce)%t;return p}}}(),W={neuralNetworkPath:"NNC.json",ja:10,nd:64,width:400,height:400,Od:[1,1,2],Nd:2,Pd:.7,O:[.2,.2,.3],ee:55,Md:[.1,1.1],Ec:1,be:.9,Fd:100,fa:[.2,.8],xc:.1,Qd:.55,Uc:1,ie:20,Sc:!0};
function nb(b){function c(){++N;1===N&&(ob.ready=!0,b.Lc(!1,{video:y.element,GL:a,videoTexture:y.ha.get(),videoTextureCut:z.ma.get()}),B!==k.pause&&(lb.stop(),B=k.play,d(0)),N=0)}function d(){B!==k.pause&&(W.Sc?q().then(function(){l();p()}):(l(),q().then(p)))}function l(){R.reset();R.W();var v=y.element.currentTime-r;0>v&&(r=y.element.currentTime);1E3*v<W.ie||(y.ha.refresh(),r+=v,D.set("s53"),y.Na.K(),y.ha.g(0),U.l(!1,!0));for(v=0;v<W.Ec;++v)D.set("s54"),z.ma.K(),y.Na.g(0),z.qa.g(1),U.l(!1,!1),z.ma.g(0),
m.I(z.ma)}function q(){var v=Date.now();if(v-A<W.Fd)return Promise.resolve();A=v;D.set("s1");R.G();a.viewport(0,0,1,1);z.nb.g(0);U.l(!1,!1);return M.Ia(0,0,1,1,g).then(t)}function t(){var v=W.fa[0]+I*(W.fa[1]-W.fa[0]),E=Math.abs(g[1]/255*2-1),K=128<g[0],f=K&&E<v+W.xc;v=K&&E<v-W.xc;B===k.play&&v?(b.Ib(!0),B=k.Va):B!==k.Va||f||(b.Ib(!1),B=k.play)}function p(){J===L.visible&&(R.ge(),D.set("s52"),y.Na.g(1),z.qa.g(0),U.l(!1,!1));a.flush();lb.Ld(d)}function u(){z.qa.Sd(1);D.set("s55");D.Yd("u36",mb.get());
U.l(!1,!1);D.set("s56");z.nb.Rd(1);z.qa.g(0);U.l(!1,!1)}var e=Math.round(W.width),w=Math.round(W.height),A=Date.now(),m=null;mb.s({Ga:W.Od,mc:W.Nd,aa:e,cb:w,tc:W.Pd,O:W.O,uc:!0});var h=[1,e/w],z={ma:null,qa:null,nb:null,te:null},y={element:null,ha:null,Na:null,Ua:null},g=new Uint8Array([0,0,0,0]),k={Bd:-1,xd:0,play:1,Va:2,pause:3},B=k.xd,L={hidden:0,visible:1},J=b.qd?L.visible:L.hidden,N=0,G="undefined"!==typeof b.Cb?b.Cb:"../../",I=(("undefined"!==typeof b.wc?b.wc:W.Qd)-W.fa[0])/(W.fa[1]-W.fa[0]),
r=0,n={Wd:function(v){I=v},de:function(v){J=v?L.visible:L.hidden},Ac:function(v,E){if(v&&B===k.pause||!v&&B!==k.pause)return Promise.resolve();E=E?ib(y.element,!v,y.Ua):Promise.resolve();v?(B=k.pause,lb.stop()):(B=k.Va,lb.stop(),B=k.play,d(0));return E},Tc:function(){m&&(m.m(),m=null);Ea.m();B=k.Bd},s:function(){y.Ua={video:{facingMode:{ideal:"user"},width:{min:480,max:1280,ideal:800},height:{min:480,max:1280,ideal:600}},audio:!1};jb(cb()?document.createElement("video"):!1,function(v){n.start(v)},
function(){errorCallback("NO_WEBCAM")},y.Ua)},start:function(v){y.element=v;n.md();n.Rc();n.Zd();fa(G+W.neuralNetworkPath,n.wd.bind(null,c))},md:function(){D.Fb([{id:"s53",name:"_",ra:"attribute vec2 a0;uniform vec2 u37,u38;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u38+u37*a0;}",ta:["a0"],ka:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u37","u38"],precision:"lowp"},{id:"s54",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
ra:"attribute vec2 a0;uniform sampler2D u39;uniform vec2 u40;const vec2 f=vec2(.25,.5),g=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u39,f);vec2 d=a.gb,b=a.a*u40;vec4 c=texture2D(u39,g);float l=c.a,i=c.y;vec2 j=vec2(1./cos(i),1.);b*=j;vec2 k=a0*.5+e;vv0=d+(k-e)*b,gl_Position=vec4(a0,0.,1.);}",ta:["a0"],ka:[2],i:["u1","u39","u40"],precision:"lowp"},{id:"s55",name:"_",ra:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u41,u39;uniform vec3 u36,u42;uniform vec2 u43;uniform float u44,u45;const vec4 e=vec4(.25,.25,.25,.25);const float f=1e-3;void main(){vec4 b=texture2D(u39,vec2(.25,.5));float a=floor(b.r+f),c=0.;vec4 d=texture2D(u41,vec2(.125,.625)),g=texture2D(u41,vec2(.375,.625));bool h=dot(d-g,e)>u45;h?a=2.:a>u44?a=0.:a>1.9&&(b.a>u43.y||b.a<u43.x)?a=0.:a>1.9?a+=1.:0.;if(a<.9)b.gba=u36,a=1.;else{float i=dot(e,texture2D(u41,vec2(.375,.875))),j=dot(e,texture2D(u41,vec2(.625,.875))),k=dot(e,texture2D(u41,vec2(.875,.875))),l=dot(e,texture2D(u41,vec2(.125,.875)));c=clamp(l,-1.+f,1.-f);float m=step(1.5,a);a*=m;float n=b.a;b.gba+=vec3(i,j,k)*u42*n;}b.r=a+c*.5+.5,gl_FragColor=b;}",
i:"u41 u39 u36 u43 u44 u45 u42".split(" ")},{id:"s56",name:"_",h:"uniform sampler2D u39,u46;uniform float u47;varying vec2 vv0;const vec2 e=vec2(.5,.5);void main(){vec4 a=texture2D(u39,e),b=texture2D(u46,e);float c=step(2.,a.r),d=fract(a.r);vec4 f=vec4(c,d,0.,1.);gl_FragColor=mix(f,b,u47);}",i:["u39","u46","u47"]},{id:"s52",name:"_",h:"uniform sampler2D u39,u48;uniform vec2 u40;varying vec2 vv0;const vec2 j=vec2(1.,1.);const vec3 k=vec3(0.,.7,1.);void main(){vec4 f=texture2D(u39,vec2(.5,.5));vec3 l=texture2D(u48,vv0).rgb;vec2 g=f.gb;float m=f.a;vec2 a=m*u40,c=g+a,d=g;d-=a/2.,c-=a/2.;vec2 n=.5*(d+c),h=step(d,vv0)*step(vv0,c);float o=h.x*h.y;vec2 b=2.*abs(n-vv0)/a;b=pow(b,3.*j);float i=max(b.x,b.y);i*=o,gl_FragColor=vec4(mix(l,k,i),1.);}",
i:["u39","u48","u40"]}]);D.N("s54",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u39",value:1},{type:"2f",name:"u40",value:h}]);D.N("s56",[{type:"1i",name:"u39",value:0},{type:"1i",name:"u46",value:1},{type:"1f",name:"u47",value:W.be}]);D.N("s52",[{type:"1i",name:"u39",value:0},{type:"1i",name:"u48",value:1},{type:"2f",name:"u40",value:h}]);D.N("s55",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u39",value:1},{type:"2f",name:"u43",value:W.Md},{type:"1f",name:"u44",value:W.ee},{type:"1f",name:"u45",
value:W.Uc},{type:"3f",name:"u42",value:[W.O[0]*h[0],W.O[1]*h[1],W.O[2]]}])},Rc:function(){y.ha=V.instance({D:y.element,isPot:!1,isFloat:!1,isFlipY:!0});y.Na=V.instance({isPot:!1,We:!0,isFloat:!1,width:e,height:w});z.ma=V.instance({isPot:!0,isFloat:!1,width:W.nd});var v={width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,.5,0])};z.qa=Fa.instance(v);v={width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,0,1])};z.nb=Fa.instance(v)},Zd:function(){var v=[.5,.5],E=y.element.videoHeight/
y.element.videoWidth,K=Ea.H()/Ea.A();E>K?1>=E?v[0]*=E:v[1]/=E:(v[0]*=E,E=1/K,v[0]*=E,v[1]*=E);v[1]*=K;D.N("s53",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u37",value:v},{type:"2f",name:"u38",value:[.5,.5]}])},wd:function(v,E){E="object"===typeof E?E:JSON.parse(E);m=new Wa({Da:E.layers,sb:"gpuRawAvg",pb:u});v&&v()}};return n}
var ob={ready:!1,set_sensibility:function(b){ob.ready&&ob.ba.Wd(b)},toggle_pause:function(b,c){return ob.ready?ob.ba.Ac(b,c):Promise.reject()},destroy:function(){lb.m();return new Promise(function(b){ob.ba.Ac(!0,!0).catch(function(){}).finally(function(){ob.ba.Tc();b()})})},toggle_display:function(b){ob.ready&&ob.ba.de(b)},init:function(b){function c(d){b.callbackReady&&b.callbackReady(d?d:"UNKNOW_ERROR")}ob.ba=nb({qd:"undefined"===typeof b.isDisplayVideo?!0:b.isDisplayVideo,Lc:function(d,l){b.callbackReady&&
b.callbackReady(d,l)},Ib:b.callbackTrack,wc:b.sensibility,Cb:b.NNCPath});lb.s({ic:!1,ja:W.ja});if(!Ea.s({Mb:b.canvasId,width:W.width,height:W.height,debug:!1,hb:!1,premultipliedAlpha:!0}))return c&&c("COMPAT_FAIL"),!1;D.s();ob.ba.s();return!0}};window.GLANCETRACKERAPI=ob;
;return GLANCETRACKERAPI||window.GLANCETRACKERAPI;})();
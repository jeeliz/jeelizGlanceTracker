 /**
 * Jeeliz Glance Tracker - https://github.com/jeeliz/jeelizGlanceTracker
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var GLANCETRACKERAPI=(function(){function ba(a,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.withCredentials=!1;d.onreadystatechange=function(){4===d.readyState&&200===d.status&&c(d.responseText)};d.send()}
function ea(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function ha(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}
function ka(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,e=c.n,g="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data),f=g.length,k;c=new Uint8Array(f);for(k=0;k<f;++k)c[k]=g.charCodeAt(k);g=new Float32Array(e);f=new Float32Array(d);k=a+d+1;var l,n;for(l=0;l<e;++l){var h=k*l;var q=0===ha(c,h)?1:-1;var r=h+1;var p=1,v=0;for(n=r+a-1;n>=r;--n)v+=p*ha(c,n),p*=2;n=v;r=c;p=h+1+a;v=f;var y=0,t=v.length;for(h=p;h<p+t;++h)v[y]=ha(r,h),++y;for(h=r=0;h<d;++h)r+=f[h]*Math.pow(2,-h-
1);q=0===r&&0===n?0:q*(1+r)*Math.pow(2,1+n-Math.pow(2,a-1));g[l]=q}return g}
var m=function(){function a(a,c){a=b.createShader(a);b.shaderSource(a,c);b.compileShader(a);return b.getShaderParameter(a,b.COMPILE_STATUS)?a:!1}function c(c,d){c=a(b.VERTEX_SHADER,c);d=a(b.FRAGMENT_SHADER,d);var e=b.createProgram();b.attachShader(e,c);b.attachShader(e,d);b.linkProgram(e);return e}function d(a){void 0===a.V&&(a.V="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===a.X&&(a.X=["a0"]);void 0===a.P&&(a.P=[2]);
if(void 0===a.precision||"highp"===a.precision)a.precision=n;a.id=k++;void 0!==a.Hb&&a.Hb.forEach(function(c,d){a.c=a.c.replace(c,a.ca[d])});a.ra=0;a.P.forEach(function(c){a.ra+=4*c});a.ba=c(a.V,"precision "+a.precision+" float;\n"+a.c);a.l={};a.f.forEach(function(c){a.l[c]=b.getUniformLocation(a.ba,c)});a.attributes={};a.R=[];a.X.forEach(function(c){var d=b.getAttribLocation(a.ba,c);a.attributes[c]=d;a.R.push(d)});if(a.h){b.useProgram(a.ba);f=a;g=a.id;for(var d in a.h)b.uniform1i(a.l[d],a.h[d])}a.zc=
!0}function e(a){na.Pb(B);g!==a.id&&(B.L(),g=a.id,f=a,b.useProgram(a.ba),a.R.forEach(function(a){0!==a&&b.enableVertexAttribArray(a)}))}var g=-1,f=!1,k=0,l=!1,n="highp",h=["u1"],q=["u0"],r={u1:0},p={u0:0},v={u1:0,u2:1},y={u3:0},t={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:h,h:r},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:h,h:r,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],h:v},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:h,h:r},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],h:v},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:h,h:r},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:h,h:r},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],h:p},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],h:p},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:h,h:r},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],h:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],h:r},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],h:r},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:q,h:p},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:q,h:p},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:q,h:p},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:q,h:p},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],h:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:q,h:p},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:q,h:p},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],h:p},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],h:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],h:r},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],h:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],h:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),h:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),h:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],h:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],h:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:h,h:r,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u28"],h:v},s31:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u28,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u28"],h:v},s32:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],h:y},s33:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],h:y},s34:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],h:r,precision:"lowp"},s35:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],h:r,precision:"lowp"},s36:{c:"uniform sampler2D u1,u29,u30;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u29,vv0),b=texture2D(u30,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u29","u30"],h:{u1:0,u29:1,u30:2}}},A={s37:{c:"uniform float u18,u31;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 o=vec2(0.,0.),h=vec2(1.,1.),i=vec2(.5,.5),m=vec2(.01,.01);void main(){vec4 j=texture2D(u23,vv0);float f=1.1111;vec2 a,l,b=o,c=m/u18,k=floor(vv0*u18+c);float p=f*u18;vec2 n=h*(f-1.)/2.;for(float d=0.;d<1.1111;d+=1.){b.x=d;for(float e=0.;e<1.1111;e+=1.)b.y=e,a=(k+i+u31*(b-n))/u18,a+=step(a,-c),a-=step(h-c,a),l=(k*f+b+i)/p,j+=texture2D(u15,l)*texture2D(u16,a);}gl_FragColor=j,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u31"],ca:["1.1111","gl_FragColor\\*=2.2222;"]},s38:{c:"uniform float u18,u31,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 m=vec2(0.,0.),j=vec2(1.,1.),n=vec2(.5,.5),u=vec2(.01,.01);void main(){vec4 p=texture2D(u23,vv0);float q=1.1111,i=3.3333;vec2 a,s,t,r,b=m,c=m,d=u/u26,o=floor(vv0*u18+d);float k=q*u26;vec2 v=j*(q-1.)/2.;float w=k/u18;vec2 x=o*i;for(float g=0.;g<1.1111;g+=1.){b.x=g;for(float f=0.;f<1.1111;f+=1.){b.y=f;for(float h=0.;h<3.3333;h+=1.){c.x=h;for(float e=0.;e<3.3333;e+=1.)c.y=e,t=x+c+i*u31*(b-v),a=(t+n)/u26,a+=step(a,-d),a-=step(j-d,a),r=b*i+c,s=(o*w+r+n)/k,p+=texture2D(u15,s)*texture2D(u16,a);}}}gl_FragColor=p,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u31".split(" "),ca:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},B={oa:function(){return l},i:function(){if(!l){n="highp";for(var a in t)d(t[a],a);m.set("s0");b.enableVertexAttribArray(0);a=oa.i();l=!0;return a}},Wa:function(a){a.forEach(function(a){B.Va(a)})},Va:function(a){t[a.id]=a;d(a,a.id)},Ea:function(a,c,e){c||(c=a);t[c]=Object.create(A[a]);A[a].ca&&A[a].ca.forEach(function(a,d){t[c].c=t[c].c.replace(new RegExp(a,"g"),e[d])});d(t[c],c)},set:function(a){e(t[a])},nb:function(a){return"undefined"!==
typeof t[a]},lc:function(){return f.ic},L:function(){-1!==g&&(g=-1,f.R.forEach(function(a){0!==a&&b.disableVertexAttribArray(a)}))},pa:function(){var a=0;f.R.forEach(function(c,d){d=f.P[d];b.vertexAttribPointer(c,d,b.FLOAT,!1,f.ra,a);a+=4*d})},hc:function(){b.enableVertexAttribArray(0)},qa:function(){b.vertexAttribPointer(f.R[0],2,b.FLOAT,!1,8,0)},Oc:function(a,c){b.uniform1i(f.l[a],c)},C:function(a,c){b.uniform1f(f.l[a],c)},F:function(a,c,d){b.uniform2f(f.l[a],c,d)},Pc:function(a,c){b.uniform2fv(f.l[a],
c)},Qc:function(a,c){b.uniform3fv(f.l[a],c)},Qb:function(a,c,d,e){b.uniform3f(f.l[a],c,d,e)},Qa:function(a,c){b.uniform4fv(f.l[a],c)},Rc:function(a,c){b.uniformMatrix2fv(f.l[a],!1,c)},Sc:function(a,c){b.uniformMatrix3fv(f.l[a],!1,c)},Tc:function(a,c){b.uniformMatrix4fv(f.l[a],!1,c)},G:function(a,c){B.set(a);c.forEach(function(a){switch(a.type){case "4f":b.uniform4fv(f.l[a.name],a.value);break;case "3f":b.uniform3fv(f.l[a.name],a.value);break;case "2f":b.uniform2fv(f.l[a.name],a.value);break;case "1f":b.uniform1f(f.l[a.name],
a.value);break;case "1i":b.uniform1i(f.l[a.name],a.value);break;case "mat2":b.uniformMatrix2fv(f.l[a.name],!1,a.value);break;case "mat3":b.uniformMatrix3fv(f.l[a.name],!1,a.value);break;case "mat4":b.uniformMatrix4fv(f.l[a.name],!1,a.value)}})}};return B}(),b,sa=function(){function a(a){console.log("ERROR in ContextFeedForward : ",a);return!1}var c=!1,d=!1,e=!1,g=!1,f=!0,k=!1,l={s:function(){return c.width},D:function(){return c.height},mc:function(){return c},kc:function(){return b},m:function(){return f},
flush:function(){b.flush()},rb:function(){k||(k=new Uint8Array(c.width*c.height*4));b.readPixels(0,0,c.width,c.height,b.RGBA,b.UNSIGNED_BYTE,k);return k},oc:function(){return c.toDataURL("image/jpeg")},pc:function(){u.B();d||(d=document.createElement("canvas"),e=d.getContext("2d"));d.width=c.width;d.height=c.height;var a=l.rb(),f=e.createImageData(d.width,d.height),g,k,p=d.width,v=d.height,y=f.data;for(k=0;k<v;++k){var t=v-k-1;for(g=0;g<p;++g){var A=4*(k*p+g);var B=4*(t*p+g);y[A]=a[B];y[A+1]=a[B+
1];y[A+2]=a[B+2];y[A+3]=a[B+3]}}e.putImageData(f,0,0);return d.toDataURL("image/png")},nc:function(a){!d&&a&&(d=document.createElement("canvas"),e=d.getContext("2d"));var f=a?d:document.createElement("canvas");f.width=c.width;f.height=c.height;(a?e:f.getContext("2d")).drawImage(c,0,0);return f},i:function(d){d.ya&&!d.Y?c=document.getElementById(d.ya):d.Y&&(c=d.Y);c||(c=document.createElement("canvas"));c.width=d&&void 0!==d.width?d.width:512;c.height=d&&void 0!==d.height?d.height:512;"undefined"===
typeof d&&(d={});void 0===d.premultipliedAlpha&&(d.premultipliedAlpha=!1);void 0===d.na&&(d.na=!0);void 0===d.antialias&&(d.antialias=!1);var e={antialias:d.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:d.premultipliedAlpha,stencil:!1,depth:d.na};(b=c.getContext("webgl2",e))?f=!0:((b=c.getContext("webgl",e))||(b=c.getContext("experimental-webgl",e)),f=!1);if(!b)return a("WebGL is not enabled");(g=b.getExtension("WEBGL_lose_context"))&&c.addEventListener("webglcontextlost",d.Hc,!1);
if(!w.i())return a("Not enough capabilities");if(!w.bb()&&f)return a("Your configuration cannot process color buffer float");b.clearColor(0,0,0,0);b.disable(b.DEPTH_TEST);b.disable(b.BLEND);b.disable(b.DITHER);b.disable(b.STENCIL_TEST);b.GENERATE_MIPMAP_HINT&&b.hint(b.GENERATE_MIPMAP_HINT,b.FASTEST);b.disable(b.SAMPLE_ALPHA_TO_COVERAGE);b.disable(b.SAMPLE_COVERAGE);return!0},yc:function(){if(!m.i())return!1;b.depthFunc(b.LEQUAL);b.clearDepth(1);return!0}};return l}(),na=function(){var a="undefined"===
typeof m?JEShaders:m;return{Pb:function(c){a!==c&&(a.L(),a=c)},oa:function(){return a.oa()},qa:function(){a.qa()},pa:function(){a.pa()},L:function(){a.L()},set:function(c){a.set(c)}}}(),E=function(){var a,c,d=0,e=-2,g=-2,f=!1,k={reset:function(){g=e=-2},i:function(){f||(a=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,a),b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),b.STATIC_DRAW),c=b.createBuffer(),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c),b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,
1,2]),b.STATIC_DRAW),k.fa(),f=!0)},a:function(a){var c=d++,f=a.O.length,k=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,k);b.bufferData(b.ARRAY_BUFFER,a.Ta instanceof Float32Array?a.Ta:new Float32Array(a.Ta),b.STATIC_DRAW);e=c;if(a.O){var l=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,l);if(65536>a.O.length){var p=Uint16Array;var v=b.UNSIGNED_SHORT;var y=2}else p=Uint32Array,v=b.UNSIGNED_INT,y=4;b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.O instanceof p?a.O:new p(a.O),b.STATIC_DRAW);g=c}var t={$a:function(a){e!==
c&&(b.bindBuffer(b.ARRAY_BUFFER,k),e=c);a&&na.pa()},Ya:function(){g!==c&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,l),g=c)},bind:function(a){t.$a(a);t.Ya()},fc:function(){b.drawElements(b.TRIANGLES,f,v,0)},gc:function(a,c){b.drawElements(b.TRIANGLES,a,v,c*y)},remove:function(){b.deleteBuffer(k);a.O&&b.deleteBuffer(l);t=null}};return t},fa:function(){-1!==e&&(b.bindBuffer(b.ARRAY_BUFFER,a),e=-1);-1!==g&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c),g=-1)},g:function(a,c){a&&E.fa();c&&na.qa();b.drawElements(b.TRIANGLES,
3,b.UNSIGNED_SHORT,0)},qb:function(){b.deleteBuffer(a);b.deleteBuffer(c)}};return k}(),u=function(){var a,c,d,e=!1,g={o:-2,ob:1};return{i:function(){if(!e){a=b.createFramebuffer();var f=w.m();c=f&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=f&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},rc:function(){return c},ka:function(){return d},M:function(){return b.FRAMEBUFFER},tc:function(){return g},jc:function(){return a},a:function(d){void 0===d.Fa&&(d.Fa=!1);var e=d.Ub?d.Ub:!1,
f=d.width,n=void 0!==d.height?d.height:d.width,h=a,q=!1,r=!1,p=0;e&&(f=f?f:e.s(),n=n?n:e.D());var v={Pa:function(){r||(h=b.createFramebuffer(),r=!0,p=g.ob++)},Ua:function(){v.Pa();v.j();q=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,q);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,f,n);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,q);b.clearDepth(1)},bind:function(a,d){p!==g.o&&(b.bindFramebuffer(c,h),g.o=p);e&&e.j();d&&b.viewport(0,0,f,n);a&&b.clear(b.COLOR_BUFFER_BIT|
b.DEPTH_BUFFER_BIT)},$b:function(){p!==g.o&&(b.bindFramebuffer(c,h),g.o=p)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},cc:function(){b.clear(b.COLOR_BUFFER_BIT)},dc:function(){b.clear(b.DEPTH_BUFFER_BIT)},Rb:function(){b.viewport(0,0,f,n)},j:function(){p!==g.o&&(b.bindFramebuffer(c,h),g.o=p)},rtt:function(a){e=a;g.o!==p&&(b.bindFramebuffer(b.FRAMEBUFFER,h),g.o=p);a.j()},B:function(){b.bindFramebuffer(c,null);g.o=-1},resize:function(a,c){f=a;n=c;q&&(b.bindRenderbuffer(b.RENDERBUFFER,
q),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,f,n))},remove:function(){b.bindFramebuffer(c,h);b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0);q&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null);b.bindFramebuffer(c,null);b.deleteFramebuffer(h);q&&b.deleteRenderbuffer(q);v=null}};d.Fa&&v.Ua();return v},B:function(){b.bindFramebuffer(c,null);g.o=-1},Xb:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.viewport(0,0,
w.s(),w.D());g.o=-1},reset:function(){g.o=-2},H:function(){0!==g.o&&(b.bindFramebuffer(c,a),g.o=0)},clear:function(){b.viewport(0,0,w.s(),w.D());b.clear(b.COLOR_BUFFER_BIT)}}}(),L=function(){function a(a){b.bindTexture(b.TEXTURE_2D,a)}function c(a){R[0]=a;a=I[0];var c=a>>16&32768,d=a>>12&2047,D=a>>23&255;return 103>D?c:142<D?c|31744|((255==D?0:1)&&a&8388607):113>D?(d|=2048,c|(d>>114-D)+(d>>113-D&1)):c=(c|D-112<<10|d>>1)+(d&1)}function d(a){var d=new Uint16Array(a.length);a.forEach(function(a,D){d[D]=
c(a)});return d}function e(){if(null!==J.la)return J.la;var a=f(d([1,1,1,1]));return null===a?!0:J.la=a}function g(){if(null!==J.ma)return J.ma;var a=f(new Uint8Array([255,255,255,255]));return null===a?!0:J.ma=a}function f(a){if(!na.oa()||!y)return null;a=F.a({isFloat:!1,A:!0,array:a,width:1});u.B();b.viewport(0,0,1,1);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);na.set("s0");a.ta(0);E.g(!1,!0);var c=new Uint8Array(4);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,c);c=.9<c[0];a.remove();u.H();
return c}var k=0,l,n=0,h,q=!1,r,p,v,y=!1,t=!1,A,B,C,N=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],Q=!1,Y=!1,R=new Float32Array(1),I=new Int32Array(R.buffer),J={la:null,ma:null},F={i:function(){if(!y){p=[b.RGB,!1,b.RGB,b.RGBA];v=[b.RGB,!1,b.RGB,b.RGBA];l=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7];Q="undefined"!==typeof JEContext;Y="undefined"!==typeof w;Q&&JEContext.Fc()&&l.push(b.TEXTURE8,b.TEXTURE9);h=[-1,-1,-1,-1,-1,-1,-1,-1];r=[b.UNSIGNED_BYTE,b.FLOAT,
b.FLOAT];if(!q){for(var a=new Float32Array(16384),c=0;16384>c;++c)a[c]=2*Math.random()-1;q={random:F.a({isFloat:!0,isPot:!0,array:a,width:64}),Sa:F.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}y=!0}},xb:function(){F.Yb()},wc:function(){return q.Sa},Yb:function(){r[1]=w.Z()},Jb:function(){v=p=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},Jc:function(a,c){m.set("s1");u.B();var d=a.s(),D=a.D();b.viewport(0,0,d,D);a.b(0);E.g(!1,!1);b.readPixels(0,0,d,D,b.RGBA,b.UNSIGNED_BYTE,c)},pb:function(c,d,
e){b.activeTexture(b.TEXTURE0);k=0;var D=b.createTexture();a(D);var f=w.m()&&b.RGBA32F?b.RGBA32F:b.FLOAT;d=d instanceof Float32Array?d:new Float32Array(d);var g=Math.log(d.length)/Math.log(2);g!==Math.floor(g)&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,e);b.texImage2D(b.TEXTURE_2D,
0,b.RGBA,c.s(),c.D(),0,b.RGBA,f,d);a(null);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);u.H();m.set("s0");c.u();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);a(D);E.g(!0,!1);b.deleteTexture(D)},a:function(c){function f(){a(O);Z&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Z);c.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,c.Ha?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,c.I?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));c.$&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.qc().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Zb);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,c.isLinear?b.LINEAR:b.NEAREST);c.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,c.isMipmap&&!fa?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,c.isMipmap&&!fa?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);P=p[c.U-1];S=v[c.U-1];T=r[q];if(w.m()){var d=b.RGBA32F;
P===b.RGBA&&T===b.FLOAT&&d&&(S=d);P===b.RGB&&T===b.FLOAT&&d&&(S=d,P=b.RGBA)}if(c.A&&!c.isFloat||c.isFloat&&c.isMipmap&&oa.Ab())(d=b.RGBA16F)&&(S=d),T=w.Z();c.Ja&&"undefined"!==typeof b.texStorage2D&&(pa=c.Ja);c.Ia&&4===c.U&&(P=JEContext.uc());if(c.v)b.texImage2D(b.TEXTURE_2D,0,S,P,T,c.v);else if(c.url)b.texImage2D(b.TEXTURE_2D,0,S,P,T,W);else if(K){try{var e=b.getError();e!==b.NO_ERROR&&console.log("GLERR in SharedTexture :",e);b.texImage2D(b.TEXTURE_2D,0,S,x,z,0,P,T,K);b.getError()!==b.NO_ERROR&&
(b.texImage2D(b.TEXTURE_2D,0,S,x,z,0,P,T,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,x,z,0,b.RGBA,b.UNSIGNED_BYTE,null))}catch(Za){b.texImage2D(b.TEXTURE_2D,0,S,x,z,0,P,T,null)}c.isKeepArray||(K=null)}else b.texImage2D(b.TEXTURE_2D,0,S,x,z,0,P,T,null);if(c.isMipmap)if(!fa&&G)G.ja(),qa=!0;else if(fa){e=Math.log(Math.min(x,z))/Math.log(2);ia=Array(1+e);ia[0]=O;for(d=1;d<=e;++d){var f=Math.pow(2,d);var g=x/f;f=z/f;var l=b.createTexture();a(l);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,
b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,S,g,f,0,P,T,null);a(null);ia[d]=l}qa=!0}a(null);h[k]=-1;Z&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);ra=!0;M&&G&&(M(G),M=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.A&&(c.A=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.ga_&&(c.ga_=!1);void 0===c.$&&(c.$=
!1);void 0===c.I&&(c.I=!1);void 0===c.Ha&&(c.Ha=!1);void 0===c.Ia&&(c.Ia=!1);void 0===c.U&&(c.U=4);void 0===c.Ga&&(c.Ga=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?ka(c.data):c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=!1);var q=0,D=c.v?!0:!1,y=null,V=null,X=!1,J=null;c.isFloat&&(c.A=!0);c.A&&(q=1);c.Ga||w.m()||!c.isFloat||!Y||w.wa()||(c.isFloat=!1);c.isFloat&&
(q=2);c.$&&Q&&!JEContext.Ac()&&(c.$=!1);var O=b.createTexture(),M=c.ga_,W=null,K=!1,x=0,z=0,ra=!1,la=n++,R=!1,I,da,ua,ma,S,P,T,Z=c.isFlipY,fa=c.A&&c.isMipmap&&"undefined"!==typeof oa&&!oa.eb()?!0:!1,ia,pa=-1,qa=!1;"undefined"!==typeof c.width&&c.width&&(x=c.width,z="undefined"!==typeof c.height&&c.height?c.height:x);var G={get:function(){return O},s:function(){return x},D:function(){return z},xc:function(){return c.url},Bc:function(){return c.isFloat},Dc:function(){return c.A},Ec:function(){return c.isLinear},
ja:function(){b.generateMipmap(b.TEXTURE_2D)},ua:function(c,d){fa?(c||(c=G.Ca()),G.ea(d),a(ia[c]),h[d]=-1):G.b(d)},Ca:function(){-1===pa&&(pa=Math.log(x)/Math.log(2));return pa},Ba:function(c){if(fa){c||(c=G.Ca());m.set("s11");G.ea(0);var d,e=x,f=z;for(d=1;d<=c;++d)e/=2,f/=2,m.F("u7",.25/e,.25/f),b.viewport(0,0,e,f),a(ia[d-1]),b.framebufferTexture2D(u.M(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ia[d],0),E.g(!1,1===d);h[0]=-1}else G.ja()},ea:function(a){a!==k&&(b.activeTexture(l[a]),k=a)},b:function(c){if(!ra)return!1;
G.ea(c);if(h[c]===la)return!1;a(O);h[c]=la;return!0},ta:function(c){b.activeTexture(l[c]);k=c;a(O);h[c]=la},j:function(){b.framebufferTexture2D(u.M(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,O,0)},u:function(){b.viewport(0,0,x,z);b.framebufferTexture2D(u.M(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,O,0)},Wc:function(){b.framebufferTexture2D(u.M(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},resize:function(a,c){x=a;z=c;f()},clone:function(a){a=F.a({width:x,height:z,A:c.A,isFloat:c.isFloat,isLinear:c.isLinear,I:c.I,
isFlipY:a?!Z:Z,isPot:c.isPot});na.set("s0");u.H();a.j();b.viewport(0,0,x,z);G.b(0);E.g(!0,!0);return a},Rb:function(){b.viewport(0,0,x,z)},remove:function(){b.deleteTexture(O);G=null},refresh:function(){G.ta(0);Z&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);D?b.texImage2D(b.TEXTURE_2D,0,S,P,b.UNSIGNED_BYTE,c.v):b.texImage2D(b.TEXTURE_2D,0,S,x,z,0,P,T,K);Z&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},xa:function(){var a=x*z*4;da=[new Uint8Array(a),new Uint8Array(a),new Uint8Array(a),new Uint8Array(a)];I=
[new Float32Array(da[0].buffer),new Float32Array(da[1].buffer),new Float32Array(da[2].buffer),new Float32Array(da[3].buffer)];ua=new Uint8Array(4*a);ma=new Float32Array(ua.buffer);R=!0},Na:function(){R||G.xa();b.readPixels(0,0,x,4*z,b.RGBA,b.UNSIGNED_BYTE,ua);var a,c=x*z,d=2*c,e=3*c;for(a=0;a<c;++a)I[0][a]=ma[a],I[1][a]=ma[a+c],I[2][a]=ma[a+d],I[3][a]=ma[a+e];return I},za:function(){u.B();m.set("s12");G.b(0);b.viewport(0,0,x,4*z);for(var a=0;4>a;++a)b.viewport(0,z*a,x,z),m.Qa("u8",N[a]),E.g(!1,0===
a)},Xc:function(c){var d=T===r[0]&&!g();a(O);Z&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Z);d?(X||(y=document.createElement("canvas"),y.width=x,y.height=z,V=y.getContext("2d"),J=V.createImageData(x,z),X=!0),J.data.set(c),V.putImageData(J,0,0),b.texImage2D(b.TEXTURE_2D,0,S,P,T,y)):b.texImage2D(b.TEXTURE_2D,0,S,x,z,0,P,T,c);h[k]=la;Z&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Yc:function(c,d){a(O);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,d);b.texImage2D(b.TEXTURE_2D,0,S,P,T,c);h[k]=la;d&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!1)},Lc:function(a,d){var e=x*z,f=4*e;a=c.A?a?"RGBE":"JSON":"RGBA";d&&(a=d);d=w.m()&&!1;switch(a){case "RGBE":var g="s39";break;case "JSON":g=d?"s0":"s12";break;case "RGBA":case "RGBAARRAY":g="s6"}R||("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a?(da=new Uint8Array(f),R=!0):"JSON"!==a||d||G.xa());u.B();m.set(g);G.b(0);if("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a){b.viewport(0,0,x,z);E.g(!0,!0);b.readPixels(0,0,x,z,b.RGBA,b.UNSIGNED_BYTE,da);if("RGBAARRAY"===a)return{data:da};t||(A=document.createElement("canvas"),
B=A.getContext("2d"),t=!0);A.width=x;A.height=z;C=B.createImageData(x,z);C.data.set(da);B.putImageData(C,0,0);var k=A.toDataURL("image/png")}else if("JSON"===a)if(d)k=new Float32Array(e),b.viewport(0,0,x,z),E.g(!0,!0),b.readPixels(0,0,x,z,b.RGBA,b.FLOAT,k);else{for(k=0;4>k;++k)b.viewport(0,z*k,x,z),m.Qa("u8",N[k]),E.g(!k,!k);G.Na();k=Array(e);for(g=0;g<e;++g)k[4*g]=I[0][g],k[4*g+1]=I[1][g],k[4*g+2]=I[2][g],k[4*g+3]=I[3][g]}return{format:a,data:k,width:x,height:z,isMirrorY:c.I,isFlipY:"RGBA"===a?c.isFlipY:
!c.isFlipY}}};c.isMipmap&&!fa&&ra&&!qa&&(G.ja(),qa=!0);if(c.url)a(O),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),W=new Image,W.ec="Anonymous",W.crossOrigin="Anonymous",W.src=c.url,W.onload=function(){x=W.width;z=W.height;f()};else if(c.v){var ya=function(){x=void 0!==c.v.videoWidth?c.v.videoWidth:c.v.width;z=void 0!==c.v.videoHeight?c.v.videoHeight:c.v.height;x?f():setTimeout(ya,1)};ya()}else c.array?(c.A&&!c.isFloat?c.array instanceof Uint16Array?(K=c.array,f()):e()?(K=
d(c.array),f()):(f(),F.pb(G,c.array,Z)):(K=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),f()),c.isKeepArray||(K&&K!==c.array&&(K=null),delete c.array)):f();G.ub=G.s;M&&ra&&(M(G),M=!1);return G},B:function(c){c!==k&&(b.activeTexture(l[c]),k=c);h[c]=-1;a(null)},ac:function(a){q.random.b(a)},reset:function(){for(var a=0;a<l.length;++a)h[a]=-1;k=-1},Kc:function(){k=-1},Uc:function(){for(var a=0;a<l.length;++a)F.B(a)},
qb:function(){q&&(q.random.remove(),q.Sa.remove())},Vc:function(a,c){if("RGBA"===a.format||"RGBE"===a.format){var d=new Image;d.src=a.data;d.onload=function(){F.a({I:a.isMirrorY,isFlipY:a.isFlipY,isFloat:!1,v:d,ga_:function(d){if("RGBA"===a.format)c(d);else{var e=a.width,f=a.height,g=F.a({I:a.isMirrorY,isFloat:!0,width:e,height:f,isFlipY:a.isFlipY});u.H();b.viewport(0,0,e,f);m.set("s40");g.j();d.b(0);E.g(!0,!0);F.B(0);c(g);b.flush();setTimeout(d.remove,50)}}})}}else"JSON"===a.format?c(F.a({isFloat:!0,
isFlipY:a.isFlipY,width:a.width,height:a.height,array:new Float32Array(a.data)})):c(!1)}};return F}(),ta={a:function(a){var c=[L.a(a),L.a(a)],d=[c[1],c[0]],e=d,g={Mb:function(a){e[1].j();e[0].b(a);g.Ra()},Nb:function(a){e[1].u();e[0].b(a);g.Ra()},Ra:function(){e=e===c?d:c},refresh:function(){e[0].refresh();e[1].refresh()},b:function(a){e[0].b(a)}};return g}},w=function(){function a(){c="undefined"===typeof sa?JEContext:sa;d=!0}var c,d=!1,e=!1,g=!1,f=!1,k=!1,l=!1,n=!1,h=!1,q=!1,r=!1,p=!1,v=!0,y=!0,
t=!0,A,B="undefined"===typeof window?{}:window,C={i:function(){if(d)return!0;a();C.Aa();C.ia();C.lb();C.mb();u.i();L.i();if(!C.hb())return!1;E.i();L.xb();return!0},s:function(){d||a();return c.s()},D:function(){d||a();return c.D()},m:function(){d||a();return c.m()},lb:function(){p=(r=b.getExtension("EXT_color_buffer_float")||b.getExtension("WEBGL_color_buffer_float")||b.getExtension("OES_color_buffer_float"))?!0:!1;B.GL_EXT_COLORBUFFERFLOAT=r},mb:function(){b.getExtension("EXT_color_buffer_half_float")||
b.getExtension("WEBGL_color_buffer_half_float")||b.getExtension("OES_color_buffer_half_float")},Aa:function(){if(!e){this.m()||(g=b.getExtension("OES_texture_float")||b.getExtension("MOZ_OES_texture_float")||b.getExtension("WEBKIT_OES_texture_float"),k=(B.GL_EXT_FLOAT=g)?!0:!1);if(k||this.m())f=b.getExtension("OES_texture_float_linear")||b.getExtension("MOZ_OES_texture_float_linear")||b.getExtension("WEBKIT_OES_texture_float_linear"),B.GL_EXT_FLOATLINEAR=f;e=!0}},ia:function(){if(!q){if(!this.m()){if(l=
b.getExtension("OES_texture_half_float")||b.getExtension("MOZ_OES_texture_half_float")||b.getExtension("WEBKIT_OES_texture_half_float"))A=l.HALF_FLOAT_OES,n=!0;B.GL_EXT_HALFFLOAT=l}if(n||this.m())h=b.getExtension("OES_texture_half_float_linear")||b.getExtension("MOZ_OES_texture_half_float_linear")||b.getExtension("WEBKIT_OES_texture_half_float_linear"),B.GL_EXT_HALFFLOATLINEAR=h;q=!0}},Z:function(){if(C.m())return b.HALF_FLOAT;C.ia();return n?A:b.FLOAT},wa:function(){return v},cb:function(){return y},
bc:function(){return t},bb:function(){return p},jb:function(){y=v=!0;var a=b.createFramebuffer();b.bindFramebuffer(b.FRAMEBUFFER,a);var c=b.createTexture();b.bindTexture(b.TEXTURE_2D,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,C.m()&&b.RGBA32F?b.RGBA32F:b.RGBA,1,1,0,b.RGBA,b.FLOAT,null);b.framebufferTexture2D(u.M(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,c,0);var d=b.checkFramebufferStatus(u.ka());
d!==b.FRAMEBUFFER_COMPLETE&&(v=!1);b.texImage2D(b.TEXTURE_2D,0,C.m()&&b.RGBA16F?b.RGBA16F:b.RGBA,1,1,0,b.RGBA,C.Z(),null);b.framebufferTexture2D(u.M(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,c,0);d=b.checkFramebufferStatus(u.ka());d!==b.FRAMEBUFFER_COMPLETE&&(y=!1);b.bindTexture(b.TEXTURE_2D,null);b.bindFramebuffer(b.FRAMEBUFFER,null);b.deleteTexture(c);b.deleteFramebuffer(a)},ib:function(){var a=u.a({width:1});a.Pa();var c=L.a({width:1,isFloat:!0,U:3});a.j();c.j();b.flush();b.checkFramebufferStatus(u.ka())!==
b.FRAMEBUFFER_COMPLETE?(L.Jb(),t=!1):t=!0;a.remove();c.remove()},hb:function(){C.jb();if(!v&&!y)return!1;C.ib();return!0}};return C}(),oa=function(){var a=!1,c=[.8,1,.8,1],d=0,e,g=new Uint8Array(4),f=c.concat(c,c,c),k=!0,l={i:function(){function c(a,c,d,e){b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,e?b.NEAREST_MIPMAP_NEAREST:b.LINEAR);try{var f=b.getError();f!==b.NO_ERROR&&console.log("GLERR in test_mipmapping() :",f);b.texImage2D(b.TEXTURE_2D,0,a,2,2,0,b.RGBA,c,d);f=b.getError();if(f!==b.NO_ERROR)return!1}catch(N){return!1}e&&
b.generateMipmap(b.TEXTURE_2D);E.fa();E.g(!1,!0);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,g);f=b.getError();f===b.INVALID_OPERATION&&"undefined"!==typeof b.PIXEL_PACK_BUFFER&&(b.bindBuffer(b.PIXEL_PACK_BUFFER,null),b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,g),f=b.getError());return f!==b.NO_ERROR?!1:0!==g[0]}function h(a){return w.wa()&&c(r,b.FLOAT,new Float32Array(f),a)?(d=3,!0):!1}function l(a){return w.cb()?c(p,w.Z(),new Uint16Array(f),a)||c(p,b.FLOAT,new Float32Array(f),a)?(d=2,!0):!1:!1}
w.Aa();w.ia();var r=b.RGBA,p=b.RGBA;if(sa.m()){var v=b.RGBA32F;v&&(r=v);(v=b.RGBA16F)&&(p=v)}E.i();u.reset();u.B();b.viewport(0,0,1,1);m.set("s0");a=!0;e=b.createTexture();b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,e);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);if(l(!0)||h(!0))return!0;k=!1;if(l(!1)||h(!1))return!0;if(sa.m()){p=r=b.RGBA;if(l(!0)||h(!0))return!0;
k=!1;if(l(!1)||h(!1))return!0}return!1},eb:function(){return k},sc:function(){return d},Cc:function(){a||l.i();return 3===d},Ab:function(){a||l.i();return 2===d}};return l}(),va={a:function(a){var c=L.a(a.alpha),d=L.a(a.beta);return{kb:function(){c.b(1);d.b(2)}}}},za={a:function(a){var c=a.Tb;c.index=a.index;c.J=a.J;c.parent=a.parent;switch(c.type){case "input":a=wa.a(c);break;default:a=xa.a(c)}return a}},wa={a:function(a){"undefined"===typeof a.sift&&(a.sift=!1);"undefined"===typeof a.DWT&&(a.DWT=
!1);"undefined"===typeof a.blur&&(a.blur=!1);"undefined"===typeof a.siftOutWidth&&(a.siftOutWidth=!1);"undefined"===typeof a.filterBank&&(a.filterBank=!1);"undefined"===typeof a.poolType&&(a.poolType="max");"undefined"===typeof a.postpreprocessing&&(a.postpreprocessing="copy");"undefined"===typeof a.density&&(a.density=1);a.filterBank&&(FilterBank.Nc(a.poolType,a.postpreprocessing),FilterBank.Mc(a.density));var c=!1;if(a.mask){c=!0;Aa&&void 0!==Aa.Xa&&(a.mask=Aa.Xa+a.mask);var d=L.a({isFloat:!1,url:a.mask})}var e=
!1,g="undefined"!==typeof a.preprocessing?a.preprocessing:!1,f=!1;a.sift?Sift.i({wb:b,Y:!1,width:a.size,Ic:a.siftOutWidth}):a.DWT&&DWT.i({wb:b,Y:!1,width:a.size});switch(g){case "sobel":var k="s30";f=!0;break;case "meanNormalization":k="s31";f=!0;break;case "grayScale":k="s29";f=!1;break;case "copy":k="s0";break;case "inputLightRegulation":k="s29";Ba.i({width:a.size,Ka:a.nBlurPass,zb:!1});e=!0;break;case "direct":case "none":k=!1;break;default:k="s3"}c&&(k+="Mask");if(a.blur)var l=L.a({isFloat:!1,
isPot:!1,width:a.size});var n=L.a({isFloat:!1,isPot:!1,width:a.size}),h={s:function(){return a.sift?Sift.N():a.filterBank?FilterBank.N():a.size},N:function(){return h.s()},tb:function(){return a.sift?Sift.T():a.DWT?DWT.T():a.filterBank?FilterBank.T():e?Ba.T():n},w:function(){u.H();a.blur&&(l.u(),m.set("s41"),m.F("u7",1/a.size,1/a.size),E.g(!1,!0),l.b(0));k&&(m.set(k),f&&m.C("u28",1/a.size),n.u(),c&&d.b(1),E.g(!1,!1),n.b(0),e?Ba.aa(n):a.sift?(m.L(),Sift.aa()):a.DWT?(m.L(),DWT.aa(4)):a.filterBank&&
(m.L(),FilterBank.aa(n)))}};return h}},xa={a:function(a){"undefined"===typeof a.disableNormalize&&(a.disableNormalize=!1);var c=[],d=[],e,g,f=!1,k,l=!0,n,h,q=a.isReorganize?a.isReorganize:!1,r=a.kernelsNumber?!0:!1,p=a.dynPelu?va.a(a.dynPelu):!1,v=p?!0:!1,y={isEnabled:!1},t;if("softmax"===a.type){a.activation="softmax";a.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(a.num_classes))/Math.log(2)));a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.J.N();a.gain="undefined"!==typeof a.gain?a.gain:
1;m.G("s20",[{type:"1f",name:"u10",value:a.gain}]);var A=L.a({isFloat:!0,isPot:!1,width:a.size}),B=L.a({isFloat:!0,isPot:!1,width:a.size,isMipmap:!0});l=!1;var C=new Uint8Array(Math.pow(4*a.size,2)),N;for(N=0;N<a.size*a.size;++N){var Q=N<a.num_classes?255:0;C[4*N]=Q;C[4*N+1]=Q;C[4*N+2]=Q;C[4*N+3]=Q}var Y=L.a({isFloat:!1,isPot:!1,width:a.size,array:C})}else a.cost?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.J.N(),l=!1):"full"===a.connectivityUp&&(a.sparsity=a.J.N());var R={elu:"s15",elu01:"s16",
relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[a.activation],I=a.sparsity*a.sparsity,J=!1,F=a.size;if(a.maxPooling){switch(a.maxPooling.size){case 2:var D="s32";break;case 4:D="s33"}J=!0;F/=a.maxPooling.size;var U=L.a({isFloat:!0,isPot:!1,width:F})}var H=void 0!==a.Eb&&a.Eb?!0:!1,aa=null,ca=null,V=null;H&&(aa="s42"+a.index.toString(),m.Ea("s42",aa,[((a.normalization.n-1)/2).toFixed(1)]),m.G(aa,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/
a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u32",value:a.normalization.k}]),ca=L.a({isFloat:!0,isPot:!0,width:a.size}),V=L.a({isFloat:!0,isPot:!0,width:a.size}));var X,ja,O,M;l&&(M=L.a({isFloat:!0,isPot:!1,width:a.size}));var W=L.a(a.bias),K,x={s:function(){return a.size},N:function(){return F},Da:function(){return a.num_classes},Za:function(a){t.b(a)},Gb:function(){a.remap&&a.remap.isEnabled&&(y={isEnabled:!0,
Cb:L.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),layers:a.remap.layers.map(function(c){return a.parent.sb(c)}),depth:a.remap.depth})},Lb:function(){switch(a.connectivityUp){case "gaussian":K=Ca.a(a.connectivity);break;case "direct":K=Da.a(a.connectivity);break;case "square":K=Ea.a(a.connectivity);break;case "squareFast":K=Fa.a(a.connectivity,a.activation);break;case "full":K=Ga.a(a.connectivity);break;case "conv":h=a.kernelsNumber,
K=Ha.a(a.connectivity),q&&(n=L.a({width:F,isFloat:!0,isFlipY:!1,isPot:!1}))}if(K.K){var c=a.size*a.sparsity;ja=Math.log(c/a.size)/Math.log(2);X=L.a({isMipmap:!0,isFloat:!0,isPot:!0,width:c,Ja:ja});O=L.a({isFloat:!0,isPot:!0,width:a.size})}},w:function(c,d){t=c;K.K?(X.u(),r&&W.b(2),K.w(y),X.b(0),X.Ba(ja),O.u(),r?m.set("s0"):(m.set("s28"),m.C("u27",I),W.b(1)),X.ua(ja,0),E.g(!1,!1),m.set(R),H?ca.j():M.j(),O.b(0),v&&p.kb(),E.g(!1,!1)):(M.u(),W.b(1),K.w());H&&(m.set(aa),V.j(),ca.b(0),E.g(!1,!1),m.set("s43"),
m.C("u6",1),M.j(),V.b(1),E.g(!1,!1));if(l)return J?(U.u(),M.b(0),m.set(D),m.F("u7",1/a.size,1/a.size),E.g(!1,!1),d=U):d=M,d.b(0),q&&(n.j(),m.set("s22"),m.F("u14",h,F/h),E.g(!1,!1),d=n,n.b(0)),d;if("softmax"===a.type){m.set("s20");M.b(0);A.j();E.g(!1,!1);a.disableNormalize?c=A:(m.set("s2"),A.b(0),Y.b(1),B.j(),E.g(!1,!1),m.set("s0"),g.u(),B.b(0),B.Ba(!1),E.g(!1,!1),m.set("s21"),e.u(),B.ua(!1,0),m.C("u12",M.ub()),g.b(1),E.g(!1,!1),c=e);if(d){switch(f){case "cpuRGBAAvg":break;default:var z=x.Ma(c)}return z}return!1}if(a.cost){m.set("gpuRawAvg"===
f?"s8":"s7");d=M;a.disableNormalize||(m.C("u4",1/a.size),e.u(),M.b(0),E.g(!1,!1),d=e);switch(f){case "cpuRGBA2Float":d.za();z=x.Ma(d);k(z);break;case "gpuRawAvg":case "gpuRaw":d.b(0),k(d)}return!1}},gb:function(h){h&&"undefined"!==typeof h.La&&(f=h.La,k=h.Fb);M=L.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===a.type,width:a.size});"softmax"===a.type&&(g=L.a({isFloat:!0,isPot:!0,width:1}));var l=0,r=0,n="undefined"!==typeof a.num_classes&&a.num_classes?a.num_classes:a.size*a.size;for(h=0;h<n;++h)c.push(l+
(a.size-1-r)*a.size),d.push([-1,-1,-1,-1]),++l,l===a.size&&(l=0,++r);a.disableNormalize||(e=L.a({isFloat:!0,isPot:!0,width:a.size}))},Ma:function(a){a.za();var e=a.Na();c.forEach(function(a,c){d[c][0]=e[0][a];d[c][1]=e[1][a];d[c][2]=e[2][a];d[c][3]=e[3][a]});return d}};a.J&&x.Lb(a.J);return x}};
function Ia(){var a,c,d;a||(a={});this.sb=function(a){return c[a]};this.Ib=function(a){var e=!1;c=a.map(function(a,c){return e=a=za.a({index:c,parent:this,Tb:a,J:e})});d=c[c.length-1];c.forEach(function(a,c){0!==c&&a.Gb()})};this.w=function(a,d){var e=d;c.forEach(function(c){e=c.w(e,a)});return e};this.T=function(){return d.tb()};this.Kb=function(a){d.gb(a)};this.Da=function(){return d.Da()}}
var Da={a:function(a){var c=L.a(a.weights);delete a.weights.data;return{K:!0,S:function(){return 1},vb:function(){return c},w:function(){m.set("s27");c.b(1);E.g(!1,!1)}}}},Ga={a:function(a){var c=a.fromLayerSize,d=L.a(a.weights);return{K:!0,S:function(){return c},w:function(c){if(c.isEnabled){m.set("s25");c.Cb.b(3);var e,f=Math.min(c.layers.length,c.depth);for(e=0;e<f;++e)c.layers[e].Za(4+e)}else m.set("s24");m.C("u18",a.toLayerSize);d.b(1);E.g(!1,!1)}}}},Ca={a:function(a){var c=a.toSparsity*a.toLayerSize,
d=c/a.fromLayerSize,e=L.a(a.weights);L.a({width:c,isFloat:!0,array:new Float32Array(a.fromBindings),isPot:!0});var g=L.a({width:c,isFloat:!0,array:new Float32Array(a.toBindings),isPot:!0});return{K:!0,S:function(){return d},w:function(){m.set("s23");e.b(1);g.b(2);E.g(!1,!0)}}}},Ea={a:function(a){var c=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,g=e*d,f=g/c,k=c/d,l,n,h,q,r=0,p=0,v=0,y=Array(e*d*e*d*4),t=Array(e*d*e*d*4),A=Array(c*c);for(l=0;l<A.length;++l)A[l]=0;var B=Math.floor(e/2),C=.5/d,N=.5/
c,Q=.5/g;for(l=0;l<d;++l)for(n=0;n<d;++n){var Y=Math.round(l*k);var R=Math.round(n*k);var I=l/d;var J=n/d;I+=C;J+=C;for(h=0;h<e;++h)for(q=0;q<e;++q){var F=r/g;var D=p/g;var U=Y+h-B;var H=R+q-B;0>U&&(U+=c);0>H&&(H+=c);U>=c&&(U-=c);H>=c&&(H-=c);var aa=U/c;var ca=H/c;D=1-D-1/g;aa+=N;ca+=N;F+=Q;D+=Q;var V=l*e+h,X=n*e+q;X=d*e-X-1;V=X*d*e+V;y[4*V]=F;y[4*V+1]=D;y[4*V+2]=aa;y[4*V+3]=ca;aa=A[H*c+U]++;ca=aa%f;U=U*f+ca;H=H*f+(aa-ca)/f;H=c*f-1-H;H=H*c*f+U;t[4*H]=F;t[4*H+1]=D;t[4*H+2]=I;t[4*H+3]=J;++r>=g&&(r=
0,++p);++v}}var ja=L.a(a.weights);L.a({width:g,isFloat:!0,array:new Float32Array(t),isPot:!0});t=null;var O=L.a({width:g,isFloat:!0,array:new Float32Array(y),isPot:!0});y=null;return{K:!0,S:function(){return f},w:function(){m.set("s23");ja.b(1);O.b(2);E.g(!1,!1)}}}},Ha={a:function(a){var c=a.kernelsNumber,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,g=L.a(a.weights);return{K:!0,S:function(){return e},vc:function(){return d},vb:function(){return g},w:function(){m.set("s26");m.C("u24",c);m.C("u25",
d);m.C("u18",a.toLayerSize);m.C("u26",a.fromLayerSize);g.b(1);E.g(!1,!1)}}}},Fa={a:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,g=a.toSparsity,f=a.stride?a.stride:1,k=g*e/d,l=e<d,n=d/e,h=L.a(a.weights),q="s44"+[d.toString(),e.toString(),g.toString(),f.toString(),c].join("_");m.nb(q)||(a=ea(c),e=[{type:"1f",name:"u18",value:e},{type:"1f",name:"u31",value:f}],l&&e.push({type:"1f",name:"u26",value:d}),d=[(l?k:g).toFixed(1),a],l&&d.push(n.toFixed(1)),m.Ea(l?"s38":"s37",q,d),m.G(q,e.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{K:!1,S:function(){return k},w:function(){m.set(q);h.b(3);E.g(!1,!1)}}}},Ba=function(){var a,c,d,e,g,f,k,l,n;return{i:function(h){a=h.Ka?h.Ka:3;c=h.width?h.width:64;e=h.zb?!0:!1;h={isFloat:!1,width:c,isPot:!1,isFlipY:!1};g=L.a(h);f=L.a(h);k=L.a(h);l=L.a(h);n=L.a({isFloat:!0,width:c,isPot:!1,isFlipY:!1});d=1/c},aa:function(c){m.set("s35");for(var h=0;h<a;++h)g.j(),m.F("u7",d,0),E.g(e,!1),f.j(),g.b(0),m.F("u7",
0,d),E.g(e,!1),f.b(0);m.set("s34");l.j();c.b(0);E.g(e);m.set("s35");for(h=0;h<a;++h)k.j(),l.b(0),m.F("u7",d,0),E.g(e,!1),l.j(),k.b(0),m.F("u7",0,d),E.g(e,!1);m.set("s36");n.j();c.b(0);f.b(1);l.b(2);E.g(e,!1);n.b(0)},T:function(){return n}}}();function Ja(a,c){a[c]=!0;a.setAttribute(c,"true")}
function Ka(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a}function La(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Ma(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function Na(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function Oa(a){if(!a)return a;var c=!1;if(a.video){var d=function(a){var c={};"undefined"!==typeof a.min&&(c.min=a.min);"undefined"!==typeof a.max&&(c.max=a.max);"undefined"!==typeof a.ideal&&(c.ideal=a.ideal);return c};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=a.video.facingMode)}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&(c.deviceId=a.deviceId);
return c}function Pa(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a}
function Qa(a){function c(a){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(c,d){return Math.abs(c-a)-Math.abs(d-a)})}function d(c){e.push(c(Oa(a)))}var e=[];if(!a||!a.video)return e;if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal)for(var g=c(a.video.width.ideal).slice(0,3),f=c(a.video.height.ideal).slice(0,3),k=0,l;k<g.length;++k){l=g[k];for(var n=0,h;n<f.length;++n)if(h=f[n],l!==a.video.width.ideal||h!==a.video.height.ideal){var q=Math.max(l,
h)/Math.min(l,h);q<4/3-.1||q>16/9+.1||d(function(a){a.video.width.ideal=l;a.video.height.ideal=h;return a})}}d(function(a){return Pa(a)})}a.video.facingMode&&(d(function(a){delete a.video.facingMode;return a}),a.video.width&&a.video.height&&d(function(a){Pa(a);delete a.video.facingMode;return a}));a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(a){delete a.video.width.ideal;delete a.video.height.ideal;return a}),d(function(a){delete a.video.width;delete a.video.height;
return a}));e.push({audio:a.audio,video:!0});return e}function Ra(a){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(e){c=window.innerHeight>window.innerWidth}if(c&&a&&a.video){c=a.video.width;var d=a.video.height;c&&d&&c.ideal&&d.ideal&&c.ideal>d.ideal&&(a.video.height=c,a.video.width=d)}}
function Sa(a){a.volume=0;Ja(a,"muted");if(Ma()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;Ja(a,"muted")},5)}}
function Ta(a,c,d,e){function g(a){f||(f=!0,d(a))}var f=!1;navigator.mediaDevices.getUserMedia(e).then(function(d){function e(){setTimeout(function(){if(a.currentTime){var e=a.videoWidth,h=a.videoHeight;if(0===e||0===h)g("VIDEO_NULLSIZE");else{e&&(a.style.width=e.toString()+"px");h&&(a.style.height=h.toString()+"px");e={fb:null,Sb:null,Db:null};try{var k=d.getVideoTracks()[0];k&&(e.Db=k,e.fb=k.getCapabilities(),e.Sb=k.getSettings())}catch(r){}Ma()||La()?a.parentNode&&null!==a.parentNode?(f||c(a,d,
e),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),Sa(a),f||c(a,d,e),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";Sa(a);setTimeout(function(){a.play()},100)},80)):f||c(a,d,e)}}else g("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof a.srcObject?a.srcObject=d:(a.src=window.URL.createObjectURL(d),a.videoStream=d);Sa(a);a.addEventListener("loadeddata",function(){var c=a.play();Sa(a);"undefined"===typeof c?
e():c.then(function(){e()}).catch(function(){g("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(a){g(a)})}
function Ua(a,c){var d=Na()?document.createElement("video"):!1,e={video:{facingMode:{ideal:"user"},width:{min:480,max:1280,ideal:800},height:{min:480,max:1280,ideal:600}},audio:!1};d?Na()?(e&&e.video&&(La()?Ra(e):Ka()&&Ra(e),e.video.width&&e.video.width.ideal&&(d.style.width=e.video.width.ideal+"px"),e.video.height&&e.video.height.ideal&&(d.style.height=e.video.height.ideal+"px")),Ja(d,"autoplay"),Ja(d,"playsinline"),e&&e.audio?d.volume=0:Ja(d,"muted"),Ta(d,a,function(){function g(e){if(0===e.length)c("INVALID_FALLBACKCONSTRAINS");
else{var f=e.shift();Ta(d,a,function(){g(e)},f)}}var f=Qa(e);g(f)},e)):c&&c("MEDIASTREAMAPI_NOTFOUND"):c&&c("VIDEO_NOTPROVIDED")}var Va=[1,1,2],Wa=[.2,.8],Aa={};
function Xa(a){function c(a){J=setTimeout(e.bind(null,a),10)}function d(){I&&(window.cancelAnimationFrame(I),I=!1);J&&(window.clearTimeout(J),J=!1)}function e(){if(A!==t.pause){u.reset();u.H();var a=n.currentTime-H;0>a&&(H=n.currentTime);20>1E3*a||(h.refresh(),H+=a,m.set("s47"),q.u(),h.b(0),E.g(!1,!0));for(a=0;1>a;++a)m.set("s48"),r.u(),q.b(0),p.b(1),E.g(!1,!1),r.b(0),f.w(!1,r);C===B.visible&&(u.Xb(),m.set("s46"),q.b(1),p.b(0),E.g(!1,!1));b.flush();I=window.requestAnimationFrame(c)}}var g=Date.now(),
f,k=1.25/3,l=[.16,.16],n,h,q,r,p,v,y=new Uint8Array([0,0,0,0]),t={Bb:0,da:1,ha:2,pause:3},A=t.Bb,B={hidden:0,visible:1},C=a.yb?B.visible:B.hidden,N=0,Q=.25,Y=.25,R=1.25,I=!1,J=!1,F=0,D="undefined"!==typeof a.sa?a.sa:"./",U=(("undefined"!==typeof a.Oa?a.Oa:.55)-Wa[0])/(Wa[1]-Wa[0]),H=0;return{Ob:function(a){U=a},Vb:function(a){C=a?B.visible:B.hidden},Wb:function(a){a&&A!==t.pause?(A=t.pause,d()):a||A!==t.pause||(A=t.ha,d(),A=t.da,e(0))},i:function(c){n=c;m.Wa([{id:"s47",name:"_",V:"attribute vec2 a0;uniform vec2 u33,u34;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u34+u33*a0;}",
X:["a0"],P:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u33","u34"],precision:"lowp"},{id:"s48",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",V:"attribute vec2 a0;uniform sampler2D u35;uniform vec2 u36;const vec2 k=vec2(.25,.5),j=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u35,k);vec2 d=a.gb,b=a.a*u36;vec4 c=texture2D(u35,j);float l=c.a,g=c.y;vec2 f=vec2(1./cos(g),1.);b*=f;vec2 i=a0*.5+e;vv0=d+(i-e)*b,gl_Position=vec4(a0,0.,1.);}",
X:["a0"],P:[2],f:["u1","u35","u36"],precision:"lowp"},{id:"s49",name:"_",V:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u37,u35;uniform vec3 u38,u39;uniform float u40,u41,u42,u43,u44,u45;const vec4 e=vec4(.25,.25,.25,.25);const float f=1e-3;void main(){vec4 b=texture2D(u35,vec2(.25,.5));float a=floor(b.r+f),c=0.;vec4 h=texture2D(u37,vec2(.125,.625)),i=texture2D(u37,vec2(.375,.625));float d=dot(h,e),j=dot(i,e);bool k=d>u43&&d>j+u44;k?a=2.:a>u42?a=0.:a>1.9&&(b.a>u41||b.a<u40)?a=0.:a>1.9?a+=1.:0.;if(a<.9)b.gba=u38,a=1.;else{float l=dot(e,texture2D(u37,vec2(.375,.875))),m=dot(e,texture2D(u37,vec2(.625,.875))),n=dot(e,texture2D(u37,vec2(.875,.875))),o=dot(e,texture2D(u37,vec2(.125,.875)));c=clamp(o,-1.+f,1.-f);float p=step(1.5,a);a*=p;float g=b.a*u45;b.gba+=vec3(l,m,n)*u39*g;}b.r=a+c*.5+.5,gl_FragColor=b;}",
f:"u37 u35 u38 u40 u41 u42 u44 u43 u39 u45".split(" ")},{id:"s50",name:"_",c:"uniform sampler2D u35,u46;uniform float u47;varying vec2 vv0;const vec2 e=vec2(.5,.5);void main(){vec4 a=texture2D(u35,e),b=texture2D(u46,e);float c=step(2.,a.r),d=fract(a.r);vec4 f=vec4(c,d,0.,1.);gl_FragColor=mix(f,b,u47);}",f:["u35","u46","u47"]},{id:"s46",name:"_",c:"uniform sampler2D u35,u48;uniform vec2 u36;varying vec2 vv0;const vec2 j=vec2(1.,1.);const vec3 k=vec3(0.,.7,1.);void main(){vec4 g=texture2D(u35,vec2(.5,.5));vec3 l=texture2D(u48,vv0).rgb;vec2 h=g.gb;float m=g.a;vec2 b=m*u36,d=h+b,c=h;c-=b/2.,d-=b/2.;vec2 n=.5*(c+d),i=step(c,vv0)*step(vv0,d);float o=i.x*i.y;vec2 a=2.*abs(n-vv0)/b;a=pow(a,3.*j);float f=max(a.x,a.y);f*=o,gl_FragColor=vec4(mix(l,k,f),1.);}",
f:["u35","u48","u36"]}]);m.G("s48",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u35",value:1},{type:"2f",name:"u36",value:l}]);m.G("s50",[{type:"1i",name:"u35",value:0},{type:"1i",name:"u46",value:1},{type:"1f",name:"u47",value:.9}]);m.G("s46",[{type:"1i",name:"u35",value:0},{type:"1i",name:"u48",value:1},{type:"2f",name:"u36",value:l}]);m.G("s49",[{type:"1i",name:"u37",value:0},{type:"1i",name:"u35",value:1},{type:"1f",name:"u40",value:1.1},{type:"1f",name:"u41",value:5.8},{type:"1f",name:"u42",
value:55},{type:"1f",name:"u43",value:.95},{type:"1f",name:"u44",value:1.1},{type:"1f",name:"u45",value:l[0]},{type:"3f",name:"u39",value:[Va[0]*l[0],Va[1]*l[1],Va[2]]}]);h=L.a({v:n,isPot:!1,isFloat:!1,isFlipY:!0});q=L.a({isPot:!1,Gc:!0,isFloat:!1,width:400,height:400});r=L.a({isPot:!0,isFloat:!1,width:64});p=ta.a({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.25,.25,0])});v=ta.a({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,0,1])});ba(D+'NNC.json',
function(c){c=JSON.parse(c);f=new Ia;f.Ib(c.layers);f.Kb({La:"gpuRawAvg",Fb:function(){p.Nb(1);m.set("s49");m.Qb("u38",Q,Y,R);E.g(!1,!1);0!==++N%2&&(R+=k,2.5<R&&(Q+=.1,R=1.25,.75<Q&&(Q=.25,Y+=.1,.75<Y&&(Y=.25))));m.set("s50");v.Mb(1);p.b(0);E.g(!1,!1);var c=Date.now();if(100<c-g){g=c;m.set("s1");u.B();v.b(0);E.g(!1,!1);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,y);c=Wa[0]+U*(Wa[1]-Wa[0]);var d=Math.abs(y[1]/255*2-1),e=128<y[0],f=e&&d<c+.1;A===t.da&&e&&d<c-.1?(a.va(!0),A=t.ha):A!==t.ha||f||(a.va(!1),
A=t.da);u.H()}}});++F;1===F&&(Ya.ready=!0,a.ab(!1,{video:n,GL:b,videoTexture:h.get(),videoTextureCut:r.get()}),A!==t.pause&&(d(),A=t.da,e(0)),F=0)})}}}
var Ya={ready:!1,set_sensibility:function(a){Ya.ready&&Ya.W.Ob(a)},toggle_pause:function(a){Ya.ready&&Ya.W.Wb(a)},toggle_display:function(a){Ya.ready&&Ya.W.Vb(a)},init:function(a){function c(c){a.callbackReady&&a.callbackReady(c?c:"UNKNOW_ERROR")}Ya.W=Xa({yb:"undefined"===typeof a.isDisplayVideo?!0:a.isDisplayVideo,ab:function(c,e){a.callbackReady&&a.callbackReady(c,e)},va:a.callbackTrack,Oa:a.sensibility,sa:a.NNCpath});if(!sa.i({ya:a.canvasId,width:400,height:400,debug:!1,na:!1,premultipliedAlpha:!0}))return c&&
c("COMPAT_FAIL"),!1;m.i();Ua(function(a){var c=[.5,.5],d=a.videoHeight/a.videoWidth,f=sa.D()/sa.s();d>f?1>=d?c[0]*=d:c[1]/=d:(c[0]*=d,d=1/f,c[0]*=d,c[1]*=d);c[1]*=f;Ya.W.i(a);m.G("s47",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u33",value:c},{type:"2f",name:"u34",value:[.5,.5]}])},function(){c("NO_WEBCAM")});return!0}};window.GLANCETRACKERAPI=Ya;
;return GLANCETRACKERAPI;})();
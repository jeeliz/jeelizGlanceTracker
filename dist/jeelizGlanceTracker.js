 /**
 * Jeeliz Glance Tracker - https://github.com/jeeliz/jeelizGlanceTracker
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var GLANCETRACKERAPI=(function(){function ba(b,c){var d=new XMLHttpRequest;d.open("GET",b,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||c(d.responseText)};d.send()}
function ka(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function ma(b,c){var d=c%8;return b[(c-d)/8]>>7-d&1}
function sa(b){var c=JSON.parse(b);b=c.ne;var d=c.nf,f=c.n;var n="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var m=n.length;c=new Uint8Array(m);for(var k=0;k<m;++k)c[k]=n.charCodeAt(k);n=new Float32Array(f);m=new Float32Array(d);k=b+d+1;for(var r=0;r<f;++r){for(var p=k*r,w=0===ma(c,p)?1:-1,g=p+1,l=1,x=0,t=g+b-1;t>=g;--t)x+=l*ma(c,t),l*=2;g=x;p=p+1+b;l=m.length;x=0;for(t=p;t<p+l;++t)m[x]=ma(c,t),++x;for(l=p=0;l<d;++l)p+=m[l]*Math.pow(2,-l-1);n[r]=0===p&&0===
g?0:w*(1+p)*Math.pow(2,1+g-Math.pow(2,b-1))}return n}
var z=function(){function b(e,u){e=a.createShader(e);a.shaderSource(e,u);a.compileShader(e);return a.getShaderParameter(e,a.COMPILE_STATUS)?e:!1}function c(e,u){e=b(a.VERTEX_SHADER,e);u=b(a.FRAGMENT_SHADER,u);n.push(e,u);var C=a.createProgram();a.attachShader(C,e);a.attachShader(C,u);a.linkProgram(C);return C}function d(e){void 0===e.Y&&(e.Y="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===e.Z&&(e.Z=["a0"]);void 0===
e.R&&(e.R=[2]);if(void 0===e.precision||"highp"===e.precision)e.precision=w;e.id=r++;void 0!==e.kc&&e.kc.forEach(function(C,S){e.b=e.b.replace(C,e.fa[S])});e.Ea=0;e.R.forEach(function(C){e.Ea+=4*C});e.U=c(e.Y,"precision "+e.precision+" float;\n"+e.b);e.i={};e.c.forEach(function(C){e.i[C]=a.getUniformLocation(e.U,C)});e.attributes={};e.S=[];e.Z.forEach(function(C){var S=a.getAttribLocation(e.U,C);e.attributes[C]=S;e.S.push(S)});if(e.f){a.useProgram(e.U);k=e;m=e.id;for(var u in e.f)a.uniform1i(e.i[u],
e.f[u])}e.sa=!0}function f(e){ta.sc(F);m!==e.id&&(F.X(),m=e.id,k=e,a.useProgram(e.U),e.S.forEach(function(u){0!==u&&a.enableVertexAttribArray(u)}))}var n=[],m=-1,k=null,r=0,p=!1,w="highp",g=["u1"],l=["u0"],x={u1:0},t={u0:0},G={u1:0,u2:1},H={u3:0},E={s0:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:g,f:x},s1:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:g,f:x,precision:"lowp"},s2:{b:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
c:["u1","u2"],f:G},s3:{b:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",c:g,f:x},s4:{b:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",c:["u1","u2"],f:G},s5:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",c:g,f:x},s6:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
c:g,f:x},s7:{b:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",c:["u0","u4"],f:t},s8:{b:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",c:["u0","u4"],f:t},s9:{b:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
c:g,f:x},s10:{b:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",c:["u1","u5","u6"],f:{u1:0,u5:1}},s11:{b:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",c:["u1","u7"],f:x},s12:{b:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
c:["u1","u8"],f:x},s13:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",c:l,f:t},s14:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",c:l,f:t},s15:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",c:l,f:t},s16:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
c:l,f:t},s17:{b:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",c:["u0","u6","u9"],f:{u0:0,u6:1,u9:2}},s18:{b:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",c:l,f:t},s19:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
c:l,f:t},s20:{b:"uniform sampler2D u0,u10;uniform float u11;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,f);float b=u11*u11;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",c:["u0","u10","u11"],f:{u0:0,u10:1}},s21:{b:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),g=floor(u12.x*fract(b*u12.y)),f=(g*u12.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
c:["u1","u12"],f:x},s22:{b:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),e=texture2D(u14,c);gl_FragColor=d*e;}",c:["u13","u14","u15"],f:{u14:0,u13:1,u15:2}},s23:{b:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",c:["u14","u13","u16"],f:{u14:0,u13:1}},s24:{b:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u16,m=floor(i),c=i-m;vec4 n=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 o=texture2D(u17,c),p=texture2D(u18,c),q=texture2D(u19,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
c:"u13 u14 u16 u20 u17 u18 u19".split(" "),f:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6}},s25:{b:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),g=u22*vv0-a;float b=u16/u22;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u22;float l=u22*u24/u16;vec2 m=l*c,i=(m+d*u23)/u24,e=step(i,j);vec4 n=texture2D(u13,h),o=texture2D(u14,i),p=n*o*e.x*e.y,k=texture2D(u21,h);gl_FragColor=p*u23*u23+k;}",c:"u13 u14 u16 u22 u23 u24 u21".split(" "),f:{u14:0,
u13:1,u21:2}},s26:{b:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",c:["u13","u14"],f:{u14:0,u13:1}},s27:{b:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",c:["u1","u21","u25"],f:{u1:0,u21:1}},s28:{b:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
c:g,f:x,precision:"lowp"},s29:{b:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",c:["u1","u26"],f:x,precision:"lowp"},s30:{b:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
c:["u1","u26"],f:x,precision:"lowp"},s31:{b:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
c:["u1","u2","u27"],f:G},s32:{b:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u27,a,b;float c,d,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)a=vec2(f,e),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,i+=d*texture2D(u1,b).r,g+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-i/g)*j;}",c:["u1","u2","u27"],f:G},s33:{b:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
c:["u3","u7"],f:H},s34:{b:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",c:["u3","u7"],f:H},s35:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
c:["u1"],f:x,precision:"lowp"},s36:{b:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",c:["u7","u1"],f:x,precision:"lowp"},s37:{b:"uniform sampler2D u1,u28,u29;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u28,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
c:["u1","u28","u29"],f:{u1:0,u28:1,u29:2}}},y={s38:{b:"uniform float u16,u30;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:["u16","u13","u14","u21","u30"],fa:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{b:"uniform float u16,u30,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:"u16 u24 u13 u14 u21 u30".split(" "),fa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},F={va:function(){return p},l:function(){if(!p){w="highp";for(var e in E)d(E[e],e);z.set("s0");a.enableVertexAttribArray(0);e=va.l();p=!0;return e}},mb:function(e){e.forEach(function(u){F.Ha(u)})},Ha:function(e){E[e.id]=e;d(e,e.id)},Xa:function(e,u,C){u||(u=e);E[u]=Object.create(y[e]);E[u].Rb=!0;y[e].fa&&y[e].fa.forEach(function(S,V){E[u].b=E[u].b.replace(new RegExp(S,"g"),C[V])});d(E[u],u)},set:function(e){f(E[e])},
Gb:function(e){return"undefined"===typeof E[e]?!1:E[e].sa},X:function(){-1!==m&&(m=-1,k.S.forEach(function(e){0!==e&&a.disableVertexAttribArray(e)}))},Ba:function(){var e=0;k.S.forEach(function(u,C){C=k.R[C];a.vertexAttribPointer(u,C,a.FLOAT,!1,k.Ea,e);e+=4*C})},Pc:function(){a.enableVertexAttribArray(0)},Ca:function(){a.vertexAttribPointer(k.S[0],2,a.FLOAT,!1,8,0)},sd:function(e,u){a.uniform1i(k.i[e],u)},F:function(e,u){a.uniform1f(k.i[e],u)},V:function(e,u,C){a.uniform2f(k.i[e],u,C)},td:function(e,
u){a.uniform2fv(k.i[e],u)},ud:function(e,u){a.uniform3fv(k.i[e],u)},tc:function(e,u,C,S){a.uniform3f(k.i[e],u,C,S)},vd:function(e,u,C,S,V){a.uniform4f(k.i[e],u,C,S,V)},Aa:function(e,u){a.uniform4fv(k.i[e],u)},wd:function(e,u){a.uniformMatrix2fv(k.i[e],!1,u)},xd:function(e,u){a.uniformMatrix3fv(k.i[e],!1,u)},yd:function(e,u){a.uniformMatrix4fv(k.i[e],!1,u)},G:function(e,u){F.set(e);u.forEach(function(C){switch(C.type){case "4f":a.uniform4fv(k.i[C.name],C.value);break;case "3f":a.uniform3fv(k.i[C.name],
C.value);break;case "2f":a.uniform2fv(k.i[C.name],C.value);break;case "1f":a.uniform1f(k.i[C.name],C.value);break;case "1i":a.uniform1i(k.i[C.name],C.value);break;case "mat2":a.uniformMatrix2fv(k.i[C.name],!1,C.value);break;case "mat3":a.uniformMatrix3fv(k.i[C.name],!1,C.value);break;case "mat4":a.uniformMatrix4fv(k.i[C.name],!1,C.value)}})},$c:function(){return"lowp"},h:function(){a.disableVertexAttribArray(0);F.X();for(var e in E){var u=E[e];u.sa&&(u.sa=!1,a.deleteProgram(u.U));u.Rb&&delete E[e]}n.forEach(function(C){a.deleteShader(C)});
n.splice(0);r=0;p=!1}};return F}(),a=null,Aa=function(){function b(g){console.log("ERROR in ContextFeedForward: ",g);return!1}function c(){if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)return!0;if(/(Mac)/i.test(navigator.platform)){var g;(g=navigator.userAgent)?(g=g.match(/Mac OS X (\d+)_(\d+)/)||g.match(/Mac OS X (\d+).(\d+)/),g=!g||3>g.length?!1:[parseInt(g[1],10),parseInt(g[2],10)]):g=!1;if(g&&10===g[0]&&
15===g[1])return!0}return!1}var d=null,f=null,n=null,m=null,k=!0,r=null,p=null,w={u:function(){return d.width},C:function(){return d.height},Sc:function(){return d},Rc:function(){return a},m:function(){return k},flush:function(){a.flush()},Jb:function(){r||(r=new Uint8Array(d.width*d.height*4));a.readPixels(0,0,d.width,d.height,a.RGBA,a.UNSIGNED_BYTE,r);return r},Uc:function(){return d.toDataURL("image/jpeg")},Vc:function(){I.v();f||(f=document.createElement("canvas"),n=f.getContext("2d"));f.width=
d.width;f.height=d.height;for(var g=w.Jb(),l=n.createImageData(f.width,f.height),x=f.width,t=f.height,G=l.data,H=0;H<t;++H)for(var E=t-H-1,y=0;y<x;++y){var F=4*(H*x+y),e=4*(E*x+y);G[F]=g[e];G[F+1]=g[e+1];G[F+2]=g[e+2];G[F+3]=g[e+3]}n.putImageData(l,0,0);return f.toDataURL("image/png")},Tc:function(g){!f&&g&&(f=document.createElement("canvas"),n=f.getContext("2d"));var l=g?f:document.createElement("canvas");l.width=d.width;l.height=d.height;(g?n:l.getContext("2d")).drawImage(d,0,0);return l},l:function(g){g.Oa&&
!g.Na?d=document.getElementById(g.Oa):g.Na&&(d=g.Na);d||(d=document.createElement("canvas"));d.width=g&&void 0!==g.width?g.width:512;d.height=g&&void 0!==g.height?g.height:512;"undefined"===typeof g&&(g={});void 0===g.premultipliedAlpha&&(g.premultipliedAlpha=!1);void 0===g.ua&&(g.ua=!0);void 0===g.antialias&&(g.antialias=!1);if(!a){var l={antialias:g.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:g.premultipliedAlpha,stencil:!1,depth:g.ua};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
!1===l.antialias;c()||(a=d.getContext("webgl2",l));a?k=!0:((a=d.getContext("webgl",l))||(a=d.getContext("experimental-webgl",l)),k=!1)}if(!a)return b("WebGL is not enabled");(m=a.getExtension("WEBGL_lose_context"))&&g.ec&&(p=g.ec,d.addEventListener("webglcontextlost",p,!1));if(!O.l())return b("Not enough capabilities");if(!O.tb()&&k)return b("Your configuration cannot process color buffer float");a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.DITHER);a.disable(a.STENCIL_TEST);
a.disable(a.SCISSOR_TEST);a.GENERATE_MIPMAP_HINT&&a.hint(a.GENERATE_MIPMAP_HINT,a.FASTEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.disable(a.SAMPLE_COVERAGE);return!0},gd:function(){if(!z.l())return!1;a.depthFunc(a.LEQUAL);a.clearDepth(1);return!0},h:function(){a&&O.h();m&&p&&(d.removeEventListener("webglcontextlost",p,!1),p=null);r=n=f=d=null}};return w}(),ta=function(){var b="undefined"===typeof z?null:z;return{sc:function(c){b!==c&&(b&&b.X(),b=c)},va:function(){return b.va()},Ca:function(){b.Ca()},
Ba:function(){b.Ba()},X:function(){b.X()},set:function(c){b.set(c)},h:function(){b.h&&b.h()}}}(),Q=function(){var b=null,c=null,d=0,f=-2,n=-2,m=!1,k=[],r={reset:function(){n=f=-2},l:function(){m||(b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),a.STATIC_DRAW),c=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),a.STATIC_DRAW),r.ja(),m=!0)},instance:function(p){var w=
d++,g=p.L?p.L.length:0,l="undefined"===typeof p.mode?a.STATIC_DRAW:p.mode,x=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,x);a.bufferData(a.ARRAY_BUFFER,p.kb instanceof Float32Array?p.kb:new Float32Array(p.kb),l);f=w;var t=null,G=null,H=null;if(p.L){t=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t);var E=null;65536>p.L.length?(E=Uint16Array,G=a.UNSIGNED_SHORT,H=2):(E=Uint32Array,G=a.UNSIGNED_INT,H=4);a.bufferData(a.ELEMENT_ARRAY_BUFFER,p.L instanceof E?p.L:new E(p.L),l);n=w}var y={rb:function(F){f!==
w&&(a.bindBuffer(a.ARRAY_BUFFER,x),f=w);F&&ta.Ba()},ob:function(){n!==w&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t),n=w)},bind:function(F){y.rb(F);y.ob()},Nc:function(){a.drawElements(a.TRIANGLES,g,G,0)},Oc:function(F,e){a.drawElements(a.TRIANGLES,F,G,e*H)},remove:function(){a.deleteBuffer(x);p.L&&a.deleteBuffer(t);y=null}};k.push(y);return y},ja:function(){-1!==f&&(a.bindBuffer(a.ARRAY_BUFFER,b),f=-1);-1!==n&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c),n=-1)},g:function(p,w){p&&Q.ja();w&&ta.Ca();a.drawElements(a.TRIANGLES,
3,a.UNSIGNED_SHORT,0)},Ta:function(){a.deleteBuffer(b);a.deleteBuffer(c)},h:function(){r.Ta();k.forEach(function(p){p.remove()});a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);r.reset();m=!1;k.splice(0);d=0}};return r}(),I=function(){var b=null,c=null,d=null,f=!1,n=[],m={o:-2,Ra:1},k={l:function(){if(!f){b=a.createFramebuffer();var r=O.m();c=r&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;d=r&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;f=!0}},Xc:function(){return c},
oa:function(){return d},N:function(){return a.FRAMEBUFFER},ad:function(){return m},Qc:function(){return b},instance:function(r){void 0===r.Za&&(r.Za=!1);var p=r.P?r.P:null,w=r.width,g=void 0!==r.height?r.height:r.width,l=b,x=null,t=!1,G=!1,H=0;p&&(w=w?w:p.u(),g=g?g:p.C());var E={gb:function(){t||(l=a.createFramebuffer(),t=!0,H=m.Ra++)},lb:function(){E.gb();E.j();x=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,x);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,w,g);a.framebufferRenderbuffer(c,
a.DEPTH_ATTACHMENT,a.RENDERBUFFER,x);a.clearDepth(1)},bind:function(y,F){H!==m.o&&(a.bindFramebuffer(c,l),m.o=H);p&&p.j();F&&a.viewport(0,0,w,g);y&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},Fc:function(){H!==m.o&&(a.bindFramebuffer(c,l),m.o=H)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},Jc:function(){a.clear(a.COLOR_BUFFER_BIT)},Kc:function(){a.clear(a.DEPTH_BUFFER_BIT)},vc:function(){a.viewport(0,0,w,g)},j:function(){H!==m.o&&(a.bindFramebuffer(c,l),m.o=H)},rtt:function(y){p=
y;m.o!==H&&(a.bindFramebuffer(a.FRAMEBUFFER,l),m.o=H);y.j()},v:function(){a.bindFramebuffer(c,null);m.o=-1},resize:function(y,F){w=y;g=F;x&&(a.bindRenderbuffer(a.RENDERBUFFER,x),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,w,g))},remove:function(){l===b||G||(a.bindFramebuffer(c,l),a.framebufferTexture2D(c,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0),x&&a.framebufferRenderbuffer(c,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null),a.bindFramebuffer(c,null),a.deleteFramebuffer(l),x&&a.deleteRenderbuffer(x));
G=!0}};r.Za&&E.lb();n.push(E);return E},v:function(){a.bindFramebuffer(c,null);m.o=-1},Cc:function(){a.bindFramebuffer(c,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,O.u(),O.C());m.o=-1},reset:function(){m.o=-2},H:function(){0!==m.o&&(a.bindFramebuffer(c,b),m.o=0)},clear:function(){a.viewport(0,0,O.u(),O.C());a.clear(a.COLOR_BUFFER_BIT)},h:function(){k.v();n.forEach(function(r){r.remove()});a.deleteFramebuffer(b);k.reset();f=!1;n.splice(0);m.o=-2;m.Ra=1}};return k}(),U=function(){function b(q){a.bindTexture(a.TEXTURE_2D,
q)}function c(q){T[0]=q;q=B[0];var D=q>>16&32768,h=q>>12&2047,M=q>>23&255;return 103>M?D:142<M?D|31744|((255==M?0:1)&&q&8388607):113>M?(h|=2048,D|(h>>114-M)+(h>>113-M&1)):D=(D|M-112<<10|h>>1)+(h&1)}function d(q){var D=new Uint16Array(q.length);q.forEach(function(h,M){D[M]=c(h)});return D}function f(){if(null!==P.qa)return P.qa;var q=m(d([1,1,1,1]));return null===q?!0:P.qa=q}function n(){if(null!==P.ra)return P.ra;var q=m(new Uint8Array([255,255,255,255]));return null===q?!0:P.ra=q}function m(q){if(!ta.va()||
!H)return null;var D=null;try{var h=a.getError();D=A.instance({isFloat:!1,w:!0,array:q,width:1});h=a.getError();if(h!==a.NO_ERROR)return!1}catch(M){return!1}I.v();a.viewport(0,0,1,1);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);ta.set("s0");D.Ia(0);Q.g(!1,!0);q=new Uint8Array(4);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,q);q=.9<q[0];D.remove();I.H();return q}var k=0,r=null,p=0,w=null,g=null,l=null,x=null,t=null,G=null,H=!1,E=[],y={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,
isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,s:null,Qb:!1,w:!1,K:null,ca:4,wa:0},F=!1,e=null,u=null,C=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],S=!1,V=!1,T=new Float32Array(1),B=new Int32Array(T.buffer),P={qa:null,ra:null},A={l:function(){if(!H){t=[a.RGB,!1,a.RGB,a.RGBA];G=[a.RGB,!1,a.RGB,a.RGBA];r=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7];S="undefined"!==typeof JEContext;V="undefined"!==
typeof O;S&&JEContext.nd()&&r.push(a.TEXTURE8,a.TEXTURE9);w=[-1,-1,-1,-1,-1,-1,-1,-1];x=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT];if(!g){for(var q=new Float32Array(16384),D=0;16384>D;++D)q[D]=2*Math.random()-1;g={random:A.instance({isFloat:!0,isPot:!0,array:q,width:64}),jb:A.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}H=!0}},Nb:function(){A.Dc()},ed:function(){return g.jb},Dc:function(){x[1]=O.ba()},mc:function(){G=t=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},pd:function(q,D){z.set("s1");
I.v();var h=q.u(),M=q.C();a.viewport(0,0,h,M);q.a(0);Q.g(!1,!1);a.readPixels(0,0,h,M,a.RGBA,a.UNSIGNED_BYTE,D)},Hb:function(q,D,h){a.activeTexture(a.TEXTURE0);k=0;var M=a.createTexture();b(M);var aa=O.m()&&a.RGBA32F?a.RGBA32F:a.FLOAT;D=D instanceof Float32Array?D:new Float32Array(D);var da=Math.log2(D.length);da!==Math.floor(da)&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,
a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,h);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,q.u(),q.C(),0,a.RGBA,aa,D);b(null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);I.H();z.set("s0");q.B();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);b(M);Q.g(!0,!1);a.deleteTexture(M)},instance:function(q){function D(){b(ca);ea&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,ea);h.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,h.isMirrorX?a.MIRRORED_REPEAT:a.REPEAT),
a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,h.isMirrorY?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));h.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.Wc().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Ec);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,h.isLinear?a.LINEAR:a.NEAREST);h.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,
h.isMipmap&&!na?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,h.isMipmap&&!na?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);X=t[h.ca-1];Y=G[h.ca-1];Z=x[aa];if(O.m()){var v=a.RGBA32F;X===a.RGBA&&Z===a.FLOAT&&v&&(Y=v);X===a.RGB&&Z===a.FLOAT&&v&&(Y=v,X=a.RGBA)}if(h.w&&!h.isFloat||h.isFloat&&h.isMipmap&&va.Ub())(v=a.RGBA16F)&&(Y=v),Z=O.ba();h.wa&&(wa=h.wa);h.isSrgb&&4===h.ca&&(X=JEContext.cd());if(h.s)a.texImage2D(a.TEXTURE_2D,0,Y,X,Z,h.s);else if(h.url)a.texImage2D(a.TEXTURE_2D,
0,Y,X,Z,la);else if(fa){try{a.getError(),a.texImage2D(a.TEXTURE_2D,0,Y,J,K,0,X,Z,fa),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,Y,J,K,0,X,Z,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,J,K,0,a.RGBA,a.UNSIGNED_BYTE,null))}catch(hb){a.texImage2D(a.TEXTURE_2D,0,Y,J,K,0,X,Z,null)}h.isKeepArray||(fa=null)}else a.texImage2D(a.TEXTURE_2D,0,Y,J,K,0,X,Z,null);if(h.isMipmap)if(!na&&R)R.na(),xa=!0;else if(na){v=Math.log(Math.min(J,K))/Math.log(2);qa=Array(1+v);qa[0]=ca;for(var L=
1;L<=v;++L){var W=Math.pow(2,L),N=J/W;W=K/W;var oa=a.createTexture();b(oa);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,Y,N,W,0,X,Z,null);b(null);qa[L]=oa}xa=!0}b(null);w[k]=-1;ea&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);ya=!0;h.K&&R&&(h.K(R),h.K=null)}var h=Object.assign({},y,q),M=p++;null===h.isFlipY&&(h.isFlipY=h.url||h.array?!0:!1);h.data&&(h.array="string"===typeof h.data?sa(h.data):h.isFloat?
new Float32Array(h.data):new Uint8Array(h.data),h.isFlipY=!1);var aa=0,da=h.s?!0:!1,ha=null,ra=null,Ga=!1,Ca=null;h.w=h.w||h.isFloat;h.w&&(aa=1);h.Qb||O.m()||!h.isFloat||!V||O.La()||(h.isFloat=!1);h.isFloat&&(aa=2);h.isAnisotropicFiltering&&S&&!JEContext.hd()&&(h.isAnisotropicFiltering=!1);var ca=a.createTexture(),la=null,fa=!1,J=0,K=0,ya=!1,za=!1,ia=null,ja=null,Da=null,ua=null,Y=null,X=null,Z=null,ea=h.isFlipY,na=h.w&&h.isMipmap&&"undefined"!==typeof va&&!va.vb()?!0:!1,qa=null,wa=-1,xa=!1,pa={$a:!1,
Ja:null,Sa:null};h.width&&(J=h.width,K=h.height?h.height:J);var R={get:function(){return ca},u:function(){return J},C:function(){return K},fd:function(){return h.url},jd:function(){return h.isFloat},ld:function(){return h.w},md:function(){return h.isLinear},na:function(){a.generateMipmap(a.TEXTURE_2D)},qb:function(v,L){na?(v||(v=R.Va()),R.ia(L),b(qa[v]),w[L]=-1):R.a(L)},Va:function(){-1===wa&&(wa=Math.log(J)/Math.log(2));return wa},Ib:function(v){if(na){v||(v=R.Va());z.set("s11");R.ia(0);for(var L=
J,W=K,N=1;N<=v;++N)L/=2,W/=2,z.V("u7",.25/L,.25/W),a.viewport(0,0,L,W),b(qa[N-1]),a.framebufferTexture2D(I.N(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,qa[N],0),Q.g(!1,1===N);w[0]=-1}else R.na()},ia:function(v){v!==k&&(a.activeTexture(r[v]),k=v)},a:function(v){if(!ya)return!1;R.ia(v);if(w[v]===M)return!1;b(ca);w[v]=M;return!0},Ia:function(v){a.activeTexture(r[v]);k=v;b(ca);w[v]=M},j:function(){l=R;a.framebufferTexture2D(I.N(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ca,0)},B:function(){l=R;a.viewport(0,0,J,K);a.framebufferTexture2D(I.N(),
a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ca,0)},Da:A.Da,resize:function(v,L){J=v;K=L;D()},clone:function(v){v=A.instance({width:J,height:K,w:h.w,isFloat:h.isFloat,isLinear:h.isLinear,isMirrorY:h.isMirrorY,isFlipY:v?!ea:ea,isPot:h.isPot});ta.set("s0");I.H();v.j();a.viewport(0,0,J,K);R.a(0);Q.g(!0,!0);return v},vc:function(){a.viewport(0,0,J,K)},remove:function(){a.deleteTexture(ca);E.splice(E.indexOf(R),1);R=null},refresh:function(){R.Ia(0);ea&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);da?a.texImage2D(a.TEXTURE_2D,
0,Y,X,a.UNSIGNED_BYTE,h.s):a.texImage2D(a.TEXTURE_2D,0,Y,J,K,0,X,Z,fa);ea&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Ma:function(){var v=J*K*4;ja=[new Uint8Array(v),new Uint8Array(v),new Uint8Array(v),new Uint8Array(v)];ia=[new Float32Array(ja[0].buffer),new Float32Array(ja[1].buffer),new Float32Array(ja[2].buffer),new Float32Array(ja[3].buffer)];Da=new Uint8Array(4*v);ua=new Float32Array(Da.buffer);za=!0},eb:function(){za||R.Ma();a.readPixels(0,0,J,4*K,a.RGBA,a.UNSIGNED_BYTE,Da);for(var v=J*K,L=2*
v,W=3*v,N=0;N<v;++N)ia[0][N]=ua[N],ia[1][N]=ua[N+v],ia[2][N]=ua[N+L],ia[3][N]=ua[N+W];return ia},jc:function(){pa.$a||(pa.Ja=new Uint8Array(J*K*4),pa.Sa=new Float32Array(pa.buffer),pa.$a=!0);a.readPixels(0,0,J,K,a.RGBA,a.UNSIGNED_BYTE,pa.Ja);return pa.Sa},Pa:function(v){I.v();z.set("s12");R.a(0);if(v)a.viewport(0,0,J,K),z.Aa("u8",.25,.25,.25,.25),Q.g(!1,!0);else for(v=0;4>v;++v)a.viewport(0,K*v,J,K),z.Aa("u8",C[v]),Q.g(!1,0===v)},Ad:function(v){var L=Z===x[0]&&!n();b(ca);ea&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
!0);L?(Ga||(ha=document.createElement("canvas"),ha.width=J,ha.height=K,ra=ha.getContext("2d"),Ca=ra.createImageData(J,K),Ga=!0),Ca.data.set(v),ra.putImageData(Ca,0,0),a.texImage2D(a.TEXTURE_2D,0,Y,X,Z,ha)):a.texImage2D(a.TEXTURE_2D,0,Y,J,K,0,X,Z,v);w[k]=M;ea&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Bd:function(v,L){b(ca);L&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);a.texImage2D(a.TEXTURE_2D,0,Y,X,Z,v);w[k]=M;L&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},rd:function(v,L){var W=J*K,N=4*W;v=h.w?v?"RGBE":
"JSON":"RGBA";L&&(v=L);L=O.m()&&!1;var oa=null;switch(v){case "RGBE":oa="s40";break;case "JSON":oa=L?"s0":"s12";break;case "RGBA":case "RGBAARRAY":oa="s6"}za||("RGBA"===v||"RGBE"===v||"RGBAARRAY"===v?(ja=new Uint8Array(N),za=!0):"JSON"!==v||L||R.Ma());I.v();z.set(oa);R.a(0);N=null;if("RGBA"===v||"RGBE"===v||"RGBAARRAY"===v){a.viewport(0,0,J,K);Q.g(!0,!0);a.readPixels(0,0,J,K,a.RGBA,a.UNSIGNED_BYTE,ja);if("RGBAARRAY"===v)return{data:ja};F||(e=document.createElement("canvas"),u=e.getContext("2d"),F=
!0);e.width=J;e.height=K;W=u.createImageData(J,K);W.data.set(ja);u.putImageData(W,0,0);N=e.toDataURL("image/png")}else if("JSON"===v)if(L)N=new Float32Array(W),a.viewport(0,0,J,K),Q.g(!0,!0),a.readPixels(0,0,J,K,a.RGBA,a.FLOAT,N);else{for(N=0;4>N;++N)a.viewport(0,K*N,J,K),z.Aa("u8",C[N]),Q.g(!N,!N);R.eb();N=Array(W);for(L=0;L<W;++L)N[4*L]=ia[0][L],N[4*L+1]=ia[1][L],N[4*L+2]=ia[2][L],N[4*L+3]=ia[3][L]}return{format:v,data:N,width:J,height:K,isMirrorY:h.isMirrorY,isFlipY:"RGBA"===v?h.isFlipY:!h.isFlipY}}};
h.isMipmap&&!na&&ya&&!xa&&(R.na(),xa=!0);if(h.url)b(ca),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),la=new Image,la.Lc="Anonymous",la.crossOrigin="Anonymous",la.src=h.url,la.onload=function(){J=la.width;K=la.height;D()};else if(h.s){var Ha=function(){J=void 0!==h.s.videoWidth?h.s.videoWidth:h.s.width;K=void 0!==h.s.videoHeight?h.s.videoHeight:h.s.height;J?D():setTimeout(Ha,1)};Ha()}else h.array?(h.w&&!h.isFloat?h.array instanceof Uint16Array?(fa=h.array,D()):f()?(fa=d(h.array),
D()):(D(),A.Hb(R,h.array,ea)):(fa=h.isFloat?h.array instanceof Float32Array?h.array:new Float32Array(h.array):h.array instanceof Uint8Array?h.array:new Uint8Array(h.array),D()),h.isKeepArray||(fa&&fa!==h.array&&(fa=null),delete h.array)):D();R.bd=R.u;h.K&&ya&&(h.K(R),h.K=null);E.push(R);return R},v:function(q){q!==k&&(a.activeTexture(r[q]),k=q);w[q]=-1;b(null)},Hc:function(q){g.random.a(q)},Da:function(){l=null;a.framebufferTexture2D(I.N(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)},reset:function(){for(var q=
0;q<r.length;++q)w[q]=-1;k=-1},qd:function(){k=-1},Bc:function(){for(var q=0;q<r.length;++q)A.v(q)},Ta:function(){g&&(g.random.remove(),g.jb.remove())},zd:function(q,D){if("RGBA"===q.format||"RGBE"===q.format){var h=new Image;h.src=q.data;h.onload=function(){A.instance({isMirrorY:q.isMirrorY,isFlipY:q.isFlipY,isFloat:!1,s:h,K:function(M){if("RGBA"===q.format)D(M);else{var aa=q.width,da=q.height,ha=A.instance({isMirrorY:q.isMirrorY,isFloat:!0,width:aa,height:da,isFlipY:q.isFlipY});I.H();a.viewport(0,
0,aa,da);z.set("s41");ha.j();M.a(0);Q.g(!0,!0);A.v(0);D(ha);a.flush();setTimeout(M.remove,50)}}})}}else"JSON"===q.format?D(A.instance({isFloat:!0,isFlipY:q.isFlipY,width:q.width,height:q.height,array:new Float32Array(q.data)})):D(!1)},h:function(){l&&(I.H(),A.Da(),I.v());A.Bc();E.slice(0).forEach(function(q){q.remove()});E.splice(0);H=!1;p=0;va.h()}};return A}(),Ba={instance:function(b){var c=[U.instance(b),U.instance(b)],d=[c[1],c[0]],f=d,n={pc:function(m){f[1].j();f[0].a(m);n.hb()},qc:function(m){f[1].B();
f[0].a(m);n.hb()},hb:function(){f=f===c?d:c},refresh:function(){f[0].refresh();f[1].refresh()},a:function(m){f[0].a(m)},Gc:function(m){f[1].a(m)},Yc:function(){return f[0]},remove:function(){f[0].remove();f[1].remove();f=null}};return n}},O=function(){function b(){c="undefined"===typeof Aa?JEContext:Aa;d=!0}var c=null,d=!1,f=!1,n=null,m=null,k=!1,r=null,p=!1,w=null,g=!1,l=null,x=!1,t=!0,G=!0,H=!0,E=null,y="undefined"===typeof window?{}:window,F={l:function(){if(d)return!0;b();F.Qa();F.ma();F.Eb();
F.Fb();I.l();U.l();if(!F.Ab())return!1;Q.l();U.Nb();return!0},u:function(){d||b();return c.u()},C:function(){d||b();return c.C()},m:function(){d||b();return c.m()},Eb:function(){x=(l=a.getExtension("EXT_color_buffer_float")||a.getExtension("WEBGL_color_buffer_float")||a.getExtension("OES_color_buffer_float"))?!0:!1;y.GL_EXT_COLORBUFFERFLOAT=l},Fb:function(){a.getExtension("EXT_color_buffer_half_float")||a.getExtension("WEBGL_color_buffer_half_float")||a.getExtension("OES_color_buffer_half_float")},
Qa:function(){if(!f){this.m()||(n=a.getExtension("OES_texture_float")||a.getExtension("MOZ_OES_texture_float")||a.getExtension("WEBKIT_OES_texture_float"),k=(y.GL_EXT_FLOAT=n)?!0:!1);if(k||this.m())m=a.getExtension("OES_texture_float_linear")||a.getExtension("MOZ_OES_texture_float_linear")||a.getExtension("WEBKIT_OES_texture_float_linear"),y.GL_EXT_FLOATLINEAR=m;f=!0}},ma:function(){if(!g){if(!this.m()){if(r=a.getExtension("OES_texture_half_float")||a.getExtension("MOZ_OES_texture_half_float")||a.getExtension("WEBKIT_OES_texture_half_float"))E=
r.HALF_FLOAT_OES,p=!0;!E&&a.HALF_FLOAT&&(E=a.HALF_FLOAT);!E&&a.FLOAT&&(E=a.FLOAT);y.GL_EXT_HALFFLOAT=r}if(p||this.m())w=a.getExtension("OES_texture_half_float_linear")||a.getExtension("MOZ_OES_texture_half_float_linear")||a.getExtension("WEBKIT_OES_texture_half_float_linear"),y.GL_EXT_HALFFLOATLINEAR=w;g=!0}},ba:function(){if(F.m())return a.HALF_FLOAT;F.ma();return p?E:a.FLOAT},La:function(){return t},ub:function(){return G},Ic:function(){return H},tb:function(){return x},Cb:function(){G=t=!0;var e=
a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,e);var u=a.createTexture();a.bindTexture(a.TEXTURE_2D,u);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,F.m()&&a.RGBA32F?a.RGBA32F:a.RGBA,1,1,0,a.RGBA,a.FLOAT,null);a.framebufferTexture2D(I.N(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,u,0);var C=a.checkFramebufferStatus(I.oa());C!==a.FRAMEBUFFER_COMPLETE&&(t=!1);a.texImage2D(a.TEXTURE_2D,0,F.m()&&a.RGBA16F?
a.RGBA16F:a.RGBA,1,1,0,a.RGBA,F.ba(),null);a.framebufferTexture2D(I.N(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,u,0);C=a.checkFramebufferStatus(I.oa());C!==a.FRAMEBUFFER_COMPLETE&&(G=!1);a.bindTexture(a.TEXTURE_2D,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.deleteTexture(u);a.deleteFramebuffer(e)},Bb:function(){var e=I.instance({width:1});e.gb();var u=U.instance({width:1,isFloat:!0,ca:3});e.j();u.j();a.flush();a.checkFramebufferStatus(I.oa())!==a.FRAMEBUFFER_COMPLETE?(U.mc(),H=!1):H=!0;e.remove();u.remove()},
Ab:function(){F.Cb();if(!t&&!G)return!1;F.Bb();return!0},h:function(){U.h();ta.h();I.h();Q.h();d=!1}};return F}(),va=function(){function b(t,G,H,E){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,E?a.NEAREST_MIPMAP_NEAREST:a.LINEAR);var y=null;try{if(y=a.getError(),y!==a.NO_ERROR&&console.log("GLERR in test_mipmapping():",y),a.texImage2D(a.TEXTURE_2D,0,t,2,2,0,a.RGBA,G,H),y=a.getError(),y!==a.NO_ERROR)return!1}catch(F){return!1}E&&a.generateMipmap(a.TEXTURE_2D);Q.ja();Q.g(!1,!0);a.readPixels(0,
0,1,1,a.RGBA,a.UNSIGNED_BYTE,k);y=a.getError();y===a.INVALID_OPERATION&&"undefined"!==typeof a.PIXEL_PACK_BUFFER&&(a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,k),y=a.getError());return y!==a.NO_ERROR?!1:0!==k[0]}function c(t){return O.La()&&b(g,a.FLOAT,new Float32Array(p),t)?(m=n.Ga,!0):!1}function d(t){return O.ub()?b(l,O.ba(),new Uint16Array(p),t)||b(l,a.FLOAT,new Float32Array(p),t)?(m=n.ha,!0):!1:!1}var f=!1,n={Ga:3,ha:2,RGBA8:0},m=n.RGBA8,k=new Uint8Array(4),
r=[.8,1,.8,1],p=r.concat(r,r,r),w=!0,g=null,l=null,x={l:function(){O.Qa();O.ma();l=g=a.RGBA;if(Aa.m()){var t=a.RGBA32F;t&&(g=t);(t=a.RGBA16F)&&(l=t)}Q.l();I.reset();I.v();a.viewport(0,0,1,1);z.set("s0");f=!0;t=a.createTexture();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,t);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);if(d(!0)||c(!0))return!0;w=!1;if(d(!1)||c(!1))return!0;
if(Aa.m()){l=g=a.RGBA;if(d(!0)||c(!0))return!0;w=!1;if(d(!1)||c(!1))return!0}return!1},vb:function(){return w},Zc:function(){return m},kd:function(){f||x.l();return m===n.Ga},Ub:function(){f||x.l();return m===n.ha},h:function(){f=!1;m=n.RGBA8;w=!0}};return x}(),Ea={instance:function(b){var c=U.instance(b.alpha),d=U.instance(b.beta);return{Db:function(){c.a(1);d.a(2)}}}},Ja={instance:function(b){var c=null,d=!1,f=!1,n=null,m=!1,k=!1,r=null,p="undefined"===typeof b.preprocessing?!1:b.preprocessing,
w="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(d=!0,Fa&&void 0!==Fa.nb&&(b.mask=Fa.nb+b.mask),c=U.instance({isFloat:!1,url:b.mask}));var g=!1;b.customInputShader&&(g="s42",z.Ha({name:"_",id:g,b:b.customInputShader,c:["uSource"],precision:"lowp"}),z.G(g,[{type:"1i",name:"_",value:0}]));switch(p){case "sobel":r="s31";m=!0;break;case "meanNormalization":r="s32";m=!0;break;case "grayScale":r="s28";m=!1;break;case "grayScaleTilt":r="s29";k=!0;m=!1;break;case "rgbGrayTilt":r=
"s30";k=!0;m=!1;break;case "copy":r=g?g:"s0";break;case "inputLightRegulation":r=g?g:"s28";n=Ia.instance({Ya:w,cb:b.size,ab:b.nBlurPass,Tb:!1});f=!0;break;case "direct":case "none":r=!1;break;default:r="s3"}k&&z.G(r,[{name:"u26",type:"1f",value:b.tilt}]);d&&(r+="Mask");var l=U.instance({isFloat:!1,isPot:!1,width:b.size}),x={u:function(){return w},pa:function(){return x.u()},Lb:function(){return f?n.Wa():l},A:function(){I.H();r&&(z.set(r),m&&z.F("u27",1/b.size),l.B(),d&&c.a(1),Q.g(!1,!1),l.a(0),f&&
n.process(l))},h:function(){l.remove();d&&c.remove()}};return x}},Pa={instance:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var c={input:null,$:null,ta:null,D:null,da:null,ya:null,za:null},d=null,f=[],n=[],m=!1,k=null,r=!0,p=-1,w=b.isReorganize?b.isReorganize:!1,g=b.kernelsNumber?!0:!1,l=b.dynPelu?Ea.instance(b.dynPelu):!1,x=l?!0:!1,t={isEnabled:!1};b.Sb?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.ea.pa(),r=!1):"full"===b.connectivityUp&&(b.sparsity=b.ea.pa());
var G={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[b.activation],H=b.sparsity*b.sparsity,E=!1,y=b.size,F="";if(b.maxPooling){switch(b.maxPooling.size){case 2:F="s33";break;case 4:F="s34"}E=!0;y/=b.maxPooling.size;c.ya=U.instance({isFloat:!0,isPot:!1,width:y})}var e=void 0!==b.cc&&b.cc?!0:!1,u=null,C=null,S=null;if(e){u="s43"+b.index.toString();z.Xa("s43",u,[((b.normalization.n-1)/2).toFixed(1)]);z.G(u,[{type:"1i",name:"u1",value:0},{type:"2f",
name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u31",value:b.normalization.k}]);var V={isFloat:!0,isPot:!0,width:b.size};C=U.instance(V);S=U.instance(V)}var T=-1,B=null;r&&(c.D=U.instance({isFloat:!0,isPot:!1,width:b.size}));c.$=U.instance(b.bias);var P={u:function(){return b.size},pa:function(){return y},Ua:function(){return b.classesCount},pb:function(A){d.a(A)},hc:function(){b.remap&&b.remap.isEnabled&&
(t={isEnabled:!0,Xb:U.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(A){return b.parent.Kb(A)}),depth:b.remap.depth})},oc:function(){switch(b.connectivityUp){case "direct":B=Ka.instance(b.connectivity);break;case "square":B=La.instance(b.connectivity);break;case "squareFast":B=Ma.instance(b.connectivity,b.activation);break;case "full":B=Na.instance(b.connectivity);break;case "conv":p=b.kernelsNumber,
B=Oa.instance(b.connectivity),w&&(c.da=U.instance({width:y,isFloat:!0,isFlipY:!1,isPot:!1}))}if(B.O){var A=b.size*b.sparsity;T=Math.log(A/b.size)/Math.log(2);c.input=U.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:A,wa:T});c.ta=U.instance({isFloat:!0,isPot:!0,width:b.size})}},A:function(A){d=A;B.O?(c.input.B(),g&&c.$.a(2),B.A(t),c.input.a(0),c.input.Ib(T),c.ta.B(),g?z.set("s0"):(z.set("s27"),z.F("u25",H),c.$.a(1)),c.input.qb(T,0),Q.g(!1,!1),z.set(G),e?C.j():c.D.j(),c.ta.a(0),x&&l.Db(),Q.g(!1,!1)):
(c.D.B(),c.$.a(1),B.A());e&&(z.set(u),S.j(),C.a(0),Q.g(!1,!1),z.set("s44"),z.F("u6",1),c.D.j(),S.a(1),Q.g(!1,!1));if(r)return E?(c.ya.B(),c.D.a(0),z.set(F),z.V("u7",1/b.size,1/b.size),Q.g(!1,!1),A=c.ya):A=c.D,A.a(0),w&&(c.da.j(),z.set("s21"),z.V("u12",p,y/p),Q.g(!1,!1),A=c.da,c.da.a(0)),A;A=c.D;b.disableNormalize||(z.set("gpuRawAvg"===m?"s8":"s7"),z.F("u4",1/b.size),c.za.B(),c.D.a(0),Q.g(!1,!1),A=c.za);switch(m){case "cpuRGBA2Float":A.Pa(!1);A=P.ic(A);k(A);break;case "cpuMeanFloat":A.Pa(!0);A=A.jc();
k(A);break;case "gpuRawAvg":case "gpuRaw":A.a(0);case "none":k(A)}return!1},xb:function(A){A&&"undefined"!==typeof A.bb&&(m=A.bb,k=A.fc);c.D=U.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});A="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var q=0,D=0,h=0;q<A;++q)f.push(D+(b.size-1-h)*b.size),n.push([-1,-1,-1,-1]),++D,D===b.size&&(D=0,++h);b.disableNormalize||(c.za=U.instance({isFloat:!0,isPot:!0,width:b.size}))},ic:function(A){var q=A.eb();f.forEach(function(D,
h){n[h][0]=q[0][D];n[h][1]=q[1][D];n[h][2]=q[2][D];n[h][3]=q[3][D]});return n},h:function(){for(var A in c){var q=c[A];q&&q.remove()}B&&(B.h(),B=null)}};b.ea&&P.oc(b.ea);return P}};
function Qa(){var b=null,c=null,d=0;this.Kb=function(f){return b[f]};this.lc=function(f){var n=null;d=f.length;b=f.map(function(m,k){m=Object.assign({},m,{index:k,parent:this,ea:n,Sb:k===d-1});return n=k=0===k?Ja.instance(m):Pa.instance(m)});c=b[d-1];b.forEach(function(m,k){0!==k&&m.hc()})};this.A=function(f,n){var m=n;b.forEach(function(k){m=k.A(m,f)});return m};this.Wa=function(){return c.Lb()};this.nc=function(f){c.xb(f)};this.Ua=function(){return c.Ua()};this.h=function(){b&&(b.forEach(function(f){f.h()}),
c=b=null,d=0)}}
var Ka={instance:function(b){var c=U.instance(b.weights);delete b.weights.data;return{O:!0,aa:function(){return 1},h:function(){c.remove()},Mb:function(){return c},A:function(){z.set("s26");c.a(1);Q.g(!1,!1)}}}},Na={instance:function(b){var c=b.fromLayerSize,d=U.instance(b.weights);delete b.weights.data;return{O:!0,aa:function(){return c},h:function(){d.remove()},A:function(f){if(f.isEnabled){z.set("s24");f.Xb.a(3);var n,m=Math.min(f.layers.length,f.depth);for(n=0;n<m;++n)f.layers[n].pb(4+n)}else z.set("s23");
z.F("u16",b.toLayerSize);d.a(1);Q.g(!1,!1)}}}},La={instance:function(b){for(var c=b.fromLayerSize,d=b.toLayerSize,f=b.toSparsity,n=f*d,m=n/c,k=c/d,r=0,p=0,w=0,g=Array(f*d*f*d*4),l=Array(f*d*f*d*4),x=Array(c*c),t=0;t<x.length;++t)x[t]=0;t=Math.floor(f/2);for(var G=.5/d,H=.5/c,E=.5/n,y=0;y<d;++y)for(var F=Math.round(y*k),e=0;e<d;++e){var u=Math.round(e*k),C=y/d,S=e/d;C+=G;S+=G;for(var V=0;V<f;++V){var T=F+V-t;0>T&&(T+=c);T>=c&&(T-=c);for(var B=0;B<f;++B){var P=r/n,A=p/n,q=u+B-t;0>q&&(q+=c);q>=c&&(q-=
c);var D=T/c,h=q/c;A=1-A-1/n;D+=H;h+=H;P+=E;A+=E;var M=y*f+V,aa=e*f+B;aa=d*f-aa-1;M=aa*d*f+M;g[4*M]=P;g[4*M+1]=A;g[4*M+2]=D;g[4*M+3]=h;h=x[q*c+T]++;M=h%m;D=T*m+M;q=q*m+(h-M)/m;q=c*m-1-q;q=q*c*m+D;l[4*q]=P;l[4*q+1]=A;l[4*q+2]=C;l[4*q+3]=S;++r>=n&&(r=0,++p);++w}}}x=null;var da=U.instance(b.weights);delete b.weights.data;var ha=U.instance({width:n,isFloat:!0,array:new Float32Array(l),isPot:!0});l=null;var ra=U.instance({width:n,isFloat:!0,array:new Float32Array(g),isPot:!0});g=null;return{O:!0,aa:function(){return m},
h:function(){ha.remove();ra.remove();da.remove()},A:function(){z.set("s22");da.a(1);ra.a(2);Q.g(!1,!1)}}}},Oa={instance:function(b){var c=b.kernelsNumber,d=b.toSparsity,f=d*b.toLayerSize/b.fromLayerSize,n=U.instance(b.weights);delete b.weights.data;return{O:!0,aa:function(){return f},dd:function(){return d},Mb:function(){return n},h:function(){n.remove()},A:function(){z.set("s25");z.F("u22",c);z.F("u23",d);z.F("u16",b.toLayerSize);z.F("u24",b.fromLayerSize);n.a(1);Q.g(!1,!1)}}}},Ma={instance:function(b,
c){var d=b.fromLayerSize,f=b.toLayerSize,n=b.toSparsity,m=b.stride?b.stride:1,k=n*f/d,r=f<d,p=d/f,w=U.instance(b.weights);delete b.weights.data;var g="s45"+[d.toString(),f.toString(),n.toString(),m.toString(),c].join("_");z.Gb(g)||(b=ka(c),f=[{type:"1f",name:"u16",value:f},{type:"1f",name:"u30",value:m}],r&&f.push({type:"1f",name:"u24",value:d}),d=[(r?k:n).toFixed(1),b],r&&d.push(p.toFixed(1)),z.Xa(r?"s39":"s38",g,d),z.G(g,f.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",
name:"u13",value:3}])));return{O:!1,aa:function(){return k},h:function(){w.remove()},A:function(){z.set(g);w.a(3);Q.g(!1,!1)}}}},Ia={instance:function(b){var c=b.ab?b.ab:3,d=b.Ya?b.Ya:64,f=b.cb?b.cb:64,n=b.Tb?!0:!1;b={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var m=U.instance(b),k=U.instance(b),r=U.instance(b),p=U.instance(b),w=U.instance({isFloat:!0,width:f,isPot:!1,isFlipY:!1}),g=1/d;return{process:function(l){z.set("s35");p.j();Q.g(n,!1);z.set("s36");for(var x=0;x<c;++x)m.j(),z.V("u7",g,0),Q.g(n,
!1),r.j(),p.a(0),Q.g(n,!1),k.j(),m.a(0),z.V("u7",0,g),Q.g(n,!1),p.j(),r.a(0),Q.g(n,!1),x!==c-1&&k.a(0);z.set("s37");w.j();l.a(0);k.a(1);p.a(2);Q.g(n,!1);w.a(0)},Wa:function(){return w}}}};function Ra(b,c){b[c]=!0;b.setAttribute(c,"true")}function Sa(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Ta(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}
function Ua(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function Va(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function Wa(b){if(!b)return b;var c=!1;if(b.video){var d=function(f){var n={};"undefined"!==typeof f.min&&(n.min=f.min);"undefined"!==typeof f.max&&(n.max=f.max);"undefined"!==typeof f.ideal&&(n.ideal=f.ideal);return n};c={};"undefined"!==typeof b.video.width&&(c.width=d(b.video.width));"undefined"!==typeof b.video.height&&(c.height=d(b.video.height));"undefined"!==typeof b.video.facingMode&&(c.facingMode=b.video.facingMode)}c={audio:b.audio,video:c};"undefined"!==typeof b.deviceId&&(c.deviceId=b.deviceId);
return c}function Xa(b){var c=b.video.width;b.video.width=b.video.height;b.video.height=c;return b}
function Ya(b){function c(l){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(x,t){return Math.abs(x-l)-Math.abs(t-l)})}function d(l){var x=Wa(b);f.push(l(x))}var f=[];if(!b||!b.video)return f;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var n=c(b.video.width.ideal).slice(0,3),m=c(b.video.height.ideal).slice(0,3),k={},r=0;for(k.J=void 0;r<n.length;k={J:k.J},++r){k.J=n[r];var p={},w=0;for(p.I=void 0;w<m.length;p={I:p.I},++w)if(p.I=m[w],
k.J!==b.video.width.ideal||p.I!==b.video.height.ideal){var g=Math.max(k.J,p.I)/Math.min(k.J,p.I);g<4/3-.1||g>16/9+.1||d(function(l,x){return function(t){t.video.width.ideal=l.J;t.video.height.ideal=x.I;return t}}(k,p))}}}d(function(l){return Xa(l)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&d(function(l){delete l.video.width.ideal;delete l.video.height.ideal;return l}),d(function(l){delete l.video.width;delete l.video.height;return l}));b.video.facingMode&&(d(function(l){delete l.video.facingMode;
return l}),b.video.width&&b.video.height&&d(function(l){Xa(l);delete l.video.facingMode;return l}));f.push({audio:b.audio,video:!0});return f}function Za(b){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(f){c=window.innerHeight>window.innerWidth}if(c&&b&&b.video){c=b.video.width;var d=b.video.height;c&&d&&c.ideal&&d.ideal&&c.ideal>d.ideal&&(b.video.height=c,b.video.width=d)}}
function $a(b){b.volume=0;Ra(b,"muted");if(Ua()){if(1===b.volume){var c=function(){b.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){b.volume=0;Ra(b,"muted")},5)}}
function ab(b,c,d){return new Promise(function(f,n){if(b.srcObject&&b.srcObject.getVideoTracks){var m=b.srcObject.getVideoTracks();1!==m.length?n("INVALID_TRACKNUMBER"):(m=m[0],c?bb(b,f,n,d):(m.stop(),f()))}else n("BAD_IMPLEMENTATION")})}
function cb(b,c,d,f){function n(k){m||(m=!0,d(k))}var m=!1;navigator.mediaDevices.getUserMedia(f).then(function(k){function r(){setTimeout(function(){if(b.currentTime){var p=b.videoWidth,w=b.videoHeight;if(0===p||0===w)n("VIDEO_NULLSIZE");else{p&&(b.style.width=p.toString()+"px");w&&(b.style.height=w.toString()+"px");p={wb:null,wc:null,$b:null};try{var g=k.getVideoTracks()[0];g&&(p.$b=g,p.wb=g.getCapabilities(),p.wc=g.getSettings())}catch(l){}Ua()||Sa()?b.parentNode&&null!==b.parentNode?(m||c(b,k,
p),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),$a(b),m||c(b,k,p),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";$a(b);setTimeout(function(){b.play()},100)},80)):m||c(b,k,p)}}else n("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=k:(b.src=window.URL.createObjectURL(k),b.videoStream=k);$a(b);b.addEventListener("loadeddata",function(){var p=b.play();$a(b);"undefined"===typeof p?
r():p.then(function(){r()}).catch(function(){n("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(k){n(k)})}
function bb(b,c,d,f){if(b)if(Va()){if(f&&f.video){if(Sa()){var n=Ta();(12>n[0]||12===n[0]&&2>n[1])&&Za(f)}f.video.width&&f.video.width.ideal&&(b.style.width=f.video.width.ideal+"px");f.video.height&&f.video.height.ideal&&(b.style.height=f.video.height.ideal+"px")}Ra(b,"autoplay");Ra(b,"playsinline");f&&f.audio?b.volume=0:Ra(b,"muted");cb(b,c,function(){function m(r){if(0===r.length)d("INVALID_FALLBACKCONSTRAINTS");else{var p=r.shift();cb(b,c,function(){m(r)},p)}}var k=Ya(f);m(k)},f)}else d&&d("MEDIASTREAMAPI_NOTFOUND");
else d&&d("VIDEO_NOTPROVIDED")}var db=[1,1,2],eb=[.2,.8],Fa={};
function fb(b){function c(){++u;1===u&&(gb.ready=!0,b.sb(!1,{video:l.element,GL:a,videoTexture:l.P.get(),videoTextureCut:g.T.get()}),G!==t.pause&&(f(),G=t.play,n(0)),u=0)}function d(B){e=setTimeout(n.bind(null,B),10)}function f(){F&&(window.cancelAnimationFrame(F),F=null);e&&(window.clearTimeout(e),e=null)}function n(){if(G!==t.pause){I.reset();I.H();var B=l.element.currentTime-V;0>B&&(V=l.element.currentTime);20>1E3*B||(l.P.refresh(),V+=B,z.set("s48"),l.ga.B(),l.P.a(0),Q.g(!1,!0));for(B=0;1>B;++B)z.set("s49"),
g.T.B(),l.ga.a(0),g.W.a(1),Q.g(!1,!1),g.T.a(0),r.A(!1,g.T);E===H.visible&&(I.Cc(),z.set("s47"),l.ga.a(1),g.W.a(0),Q.g(!1,!1));a.flush();F=window.requestAnimationFrame(d)}}function m(){g.W.qc(1);z.set("s50");z.tc("u32",y.x,y.y,y.scale);Q.g(!1,!1);0!==++y.n%2&&(y.scale+=p.xc,2.5<y.scale&&(y.x+=p.yc,y.scale=1.25,y.x>p.Yb&&(y.x=p.ac,y.y+=p.zc,y.y>p.Zb&&(y.y=p.bc))));z.set("s51");g.xa.pc(1);g.W.a(0);Q.g(!1,!1);var B=Date.now();if(100<B-k){k=B;z.set("s1");I.v();g.xa.a(0);Q.g(!1,!1);a.readPixels(0,0,1,1,
a.RGBA,a.UNSIGNED_BYTE,x);B=eb[0]+S*(eb[1]-eb[0]);var P=Math.abs(x[1]/255*2-1),A=128<x[0],q=A&&P<B+.1;G===t.play&&A&&P<B-.1?(b.Ka(!0),G=t.la):G!==t.la||q||(b.Ka(!1),G=t.play);I.H()}}var k=Date.now(),r=null,p={yc:.1,zc:.1,xc:1.25/3,ac:.25,bc:.25,Yb:.75,Zb:.75},w=[.16,.16],g={T:null,W:null,xa:null,Mc:null},l={element:null,P:null,ga:null,ka:null},x=new Uint8Array([0,0,0,0]),t={dc:-1,Wb:0,play:1,la:2,pause:3},G=t.Wb,H={hidden:0,visible:1},E=b.Pb?H.visible:H.hidden,y={n:0,x:.25,y:.25,scale:1.25},F=null,
e=null,u=0,C="undefined"!==typeof b.Fa?b.Fa:"./",S=(("undefined"!==typeof b.fb?b.fb:.55)-eb[0])/(eb[1]-eb[0]),V=0,T={rc:function(B){S=B},Ac:function(B){E=B?H.visible:H.hidden},ib:function(B,P){if(B&&G===t.pause||!B&&G!==t.pause)return Promise.resolve();P=P?ab(l.element,!B,l.ka):Promise.resolve();B?(G=t.pause,f()):(G=t.la,f(),G=t.play,n(0));return P},zb:function(){r&&(r.h(),r=null);Aa.h();G=t.dc},l:function(){l.ka={video:{facingMode:{ideal:"user"},width:{min:480,max:1280,ideal:800},height:{min:480,
max:1280,ideal:600}},audio:!1};bb(Va()?document.createElement("video"):!1,function(B){T.start(B)},function(){errorCallback("NO_WEBCAM")},l.ka)},start:function(B){l.element=B;T.Ob();T.yb();T.uc();ba(C+'NNC.json',T.Vb.bind(null,c))},Ob:function(){z.mb([{id:"s48",name:"_",Y:"attribute vec2 a0;uniform vec2 u33,u34;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u34+u33*a0;}",Z:["a0"],R:[2],b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
c:["u1","u33","u34"],precision:"lowp"},{id:"s49",name:"_",b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",Y:"attribute vec2 a0;uniform sampler2D u35;uniform vec2 u36;const vec2 k=vec2(.25,.5),j=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u35,k);vec2 d=a.gb,b=a.a*u36;vec4 c=texture2D(u35,j);float l=c.a,g=c.y;vec2 f=vec2(1./cos(g),1.);b*=f;vec2 i=a0*.5+e;vv0=d+(i-e)*b,gl_Position=vec4(a0,0.,1.);}",Z:["a0"],R:[2],c:["u1","u35","u36"],
precision:"lowp"},{id:"s50",name:"_",Y:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",b:"uniform sampler2D u37,u35;uniform vec3 u32,u38;uniform float u39,u40,u41,u42,u43,u44;const vec4 e=vec4(.25,.25,.25,.25);const float f=1e-3;void main(){vec4 b=texture2D(u35,vec2(.25,.5));float a=floor(b.r+f),c=0.;vec4 h=texture2D(u37,vec2(.125,.625)),i=texture2D(u37,vec2(.375,.625));float d=dot(h,e),j=dot(i,e);bool k=d>u42&&d>j+u43;k?a=2.:a>u41?a=0.:a>1.9&&(b.a>u40||b.a<u39)?a=0.:a>1.9?a+=1.:0.;if(a<.9)b.gba=u32,a=1.;else{float l=dot(e,texture2D(u37,vec2(.375,.875))),m=dot(e,texture2D(u37,vec2(.625,.875))),n=dot(e,texture2D(u37,vec2(.875,.875))),o=dot(e,texture2D(u37,vec2(.125,.875)));c=clamp(o,-1.+f,1.-f);float p=step(1.5,a);a*=p;float g=b.a*u44;b.gba+=vec3(l,m,n)*u38*g;}b.r=a+c*.5+.5,gl_FragColor=b;}",
c:"u37 u35 u32 u39 u40 u41 u43 u42 u38 u44".split(" ")},{id:"s51",name:"_",b:"uniform sampler2D u35,u45;uniform float u46;varying vec2 vv0;const vec2 e=vec2(.5,.5);void main(){vec4 a=texture2D(u35,e),b=texture2D(u45,e);float c=step(2.,a.r),d=fract(a.r);vec4 f=vec4(c,d,0.,1.);gl_FragColor=mix(f,b,u46);}",c:["u35","u45","u46"]},{id:"s47",name:"_",b:"uniform sampler2D u35,u47;uniform vec2 u36;varying vec2 vv0;const vec2 j=vec2(1.,1.);const vec3 k=vec3(0.,.7,1.);void main(){vec4 g=texture2D(u35,vec2(.5,.5));vec3 l=texture2D(u47,vv0).rgb;vec2 h=g.gb;float m=g.a;vec2 b=m*u36,d=h+b,c=h;c-=b/2.,d-=b/2.;vec2 n=.5*(c+d),i=step(c,vv0)*step(vv0,d);float o=i.x*i.y;vec2 a=2.*abs(n-vv0)/b;a=pow(a,3.*j);float f=max(a.x,a.y);f*=o,gl_FragColor=vec4(mix(l,k,f),1.);}",
c:["u35","u47","u36"]}]);z.G("s49",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u35",value:1},{type:"2f",name:"u36",value:w}]);z.G("s51",[{type:"1i",name:"u35",value:0},{type:"1i",name:"u45",value:1},{type:"1f",name:"u46",value:.9}]);z.G("s47",[{type:"1i",name:"u35",value:0},{type:"1i",name:"u47",value:1},{type:"2f",name:"u36",value:w}]);z.G("s50",[{type:"1i",name:"u37",value:0},{type:"1i",name:"u35",value:1},{type:"1f",name:"u39",value:1.1},{type:"1f",name:"u40",value:5.8},{type:"1f",name:"u41",
value:55},{type:"1f",name:"u42",value:.95},{type:"1f",name:"u43",value:1.1},{type:"1f",name:"u44",value:w[0]},{type:"3f",name:"u38",value:[db[0]*w[0],db[1]*w[1],db[2]]}])},yb:function(){l.P=U.instance({s:l.element,isPot:!1,isFloat:!1,isFlipY:!0});l.ga=U.instance({isPot:!1,od:!0,isFloat:!1,width:400,height:400});g.T=U.instance({isPot:!0,isFloat:!1,width:64});g.W=Ba.instance({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.25,.25,0])});g.xa=Ba.instance({width:1,height:1,isFloat:!0,isPot:!1,
array:new Float32Array([0,.5,0,1])})},uc:function(){var B=[.5,.5],P=l.element.videoHeight/l.element.videoWidth,A=Aa.C()/Aa.u();P>A?1>=P?B[0]*=P:B[1]/=P:(B[0]*=P,P=1/A,B[0]*=P,B[1]*=P);B[1]*=A;z.G("s48",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u33",value:B},{type:"2f",name:"u34",value:[.5,.5]}])},Vb:function(B,P){P="object"===typeof P?P:JSON.parse(P);r=new Qa;r.lc(P.layers);r.nc({bb:"gpuRawAvg",fc:m});B&&B()}};return T}
var gb={ready:!1,set_sensibility:function(b){gb.ready&&gb.M.rc(b)},toggle_pause:function(b,c){return gb.ready?gb.M.ib(b,c):Promise.reject()},destroy:function(){return new Promise(function(b,c){gb.M.ib(!0,!0).catch(function(){c()}).finally(function(){gb.M.zb();b()})})},toggle_display:function(b){gb.ready&&gb.M.Ac(b)},init:function(b){function c(d){b.callbackReady&&b.callbackReady(d?d:"UNKNOW_ERROR")}gb.M=fb({Pb:"undefined"===typeof b.isDisplayVideo?!0:b.isDisplayVideo,sb:function(d,f){b.callbackReady&&
b.callbackReady(d,f)},Ka:b.callbackTrack,fb:b.sensibility,Fa:b.NNCpath});if(!Aa.l({Oa:b.canvasId,width:400,height:400,debug:!1,ua:!1,premultipliedAlpha:!0}))return c&&c("COMPAT_FAIL"),!1;z.l();gb.M.l();return!0}};window.GLANCETRACKERAPI=gb;
;return GLANCETRACKERAPI;})();